(window.webpackJsonp=window.webpackJsonp||[]).push([[18,10],{925:function(t,e,i){"use strict";i(5),i(7),i(8),i(6),i(9);var o=i(26),n=(i(0),i(28),i(61),i(62),i(27),i(3),i(37),i(46));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"basePage",transition:{name:"slide",mode:"out-in",css:!1,beforeEnter:function(t){if(!document.querySelector("#__nuxt").classList.contains("quit")){var e=document.querySelector("#__nuxt").classList.contains("back")?"-100%":"100%";this.$anime.set(t,{scale:1,opacity:0,translateX:e})}},enter:function(t,e){var i=document.querySelector("#__nuxt").classList.contains("back")?"-100%":"100%";this.$anime({targets:t,opacity:[0,1],translateX:[i,"0"],duration:500,easing:"easeInOutSine",complete:e})},leave:function(t,e){if(document.querySelector("#__nuxt").classList.contains("quit"))this.$anime({targets:t,translateY:[0,"100%"],duration:500,easing:"easeInOutSine",complete:e});else{var i=document.querySelector("#__nuxt").classList.contains("back")?"100%":"-100%";this.$anime({targets:t,opacity:[1,0],translateX:["0",i],duration:500,easing:"easeInOutSine",complete:e})}},afterLeave:function(t){document.querySelector("#__nuxt").classList.remove("quit"),document.querySelector("#__nuxt").classList.remove("back")}},data:function(){return{name:"basePage",exid:this.$route.params.id,programid:this.$route.params.fromprogram||!1,withindex:this.$route.params.withindex||-1,backto:this.$route.params.backto||!1,hasBack:!1,hasNext:!1,hasInfo:!1}},computed:s(s({},Object(n.d)({getCurrentPagerHeight:"getCurrentPagerHeight"})),{},{isVoicemed:function(){return $nuxt.$config.env.environment.indexOf("voicemed_")>-1},isAirlyn:function(){return $nuxt.$config.env.environment.indexOf("voicemed_")<0},nuxtloading:function(){return $nuxt.$loading.loading},defaultHomeUrl:function(){return"/"}}),methods:s(s({},Object(n.c)({setCurrentPage:"setCurrentPage",setCurrentPagerHeight:"setCurrentPagerHeight"})),{},{exerciseStepBack:function(){if(console.log("exit test",this.backto,this.programid),"standalone"==this.backto)return $nuxt.$airlyn.finishExercise({reason:"user-cancelled",result:{}}).finally((function(){console.log("exercise finished by user")})),void $nuxt.$airlyn.closeExercise().finally((function(){console.log("exercise closed, success")}));"today"!=this.backto?"discovery"!=this.backto?this.programid?"-1"==this.programid||-1==this.programid||"false"==this.programid||0==this.programid?$nuxt.$router.replace($nuxt.localePath("/user/today")):$nuxt.$router.replace($nuxt.localePath("/ml/programs/"+this.programid)):$nuxt.$router.replace($nuxt.localePath("/user/today")):$nuxt.$router.replace($nuxt.localePath("/home")):$nuxt.$router.replace($nuxt.localePath("/user/today"))},buildSuffix:function(){var t=[],e=!!this.programid&&this.programid;return t.push("-1"!==e&&e),t.push(this.withindex?this.withindex:"-1"),t.push(!!this.backto&&this.backto),t.join("/")},hasJoinedProgramById:function(t){return this.$nuxt.$store.getters.hasJoinedProgramById(t)},getProgramJoinedAtById:function(t){return this.$nuxt.$store.getters.getProgramJoinedAtById(t)},getProgramById:function(t){return this.$nuxt.$store.getters.getProgramById(t)},getOverallProgressProgramById:function(t){return this.$nuxt.$store.getters.getOverallProgressProgramById(t)},getDoneCountByProgramId:function(t){return this.$nuxt.$store.getters.getDoneCountByProgramId(t)},getNextExerciseByProgramId:function(t){return this.$nuxt.$store.getters.getNextExerciseByProgramId(t)},getExercisetocompleteCountProgramById:function(t){return this.$nuxt.$store.getters.getExercisetocompleteCountProgramById(t)},getExercisecompletedCountProgramById:function(t){return this.$nuxt.$store.getters.getExercisecompletedCountProgramById(t)},printDeviceError:function(t,e,i,o){this.$analytics.logEvent("permission_error",{title:"errors."+t+"."+e.name.toLowerCase()+".title",kind:t}),console.error("Got device error",e),!e||"NotAllowedError"!==e.name&&"NotFoundError"!==e.name&&"denied"!=e.exception.state&&"DENIED"!=e.exception.state?this.showError(this.$t("errors.generic.title"),this.$t("errors.generic.description"),i,o):this.$root.$emit("showPermssionError",!0)},printDeviceErrorOLD:function(t,e,i,o){if(this.$analytics.logEvent("permission_error",{title:"errors."+t+"."+e.name.toLowerCase()+".title",kind:t}),console.error("Got device error",e),e.exception&&"mic"==t&&("denied"==e.exception.state||"DENIED"==e.exception.state))return e.name="DeniedError",void this.$root.$emit("showError",{title:this.$t("errors."+t+"."+e.name.toLowerCase()+".title"),error:this.$t("errors."+t+"."+e.name.toLowerCase()+".description"),hasretry:!0,click:function(){return $nuxt.$airlyn.openPermissionPanel().then((function(t){console.log("got openPermission Panel then",t,JSON.stringify(t))})).catch((function(t){console.log("got openPermission Panel catch",t,JSON.stringify(t))})).finally((function(){"function"==typeof o&&(console.log("dopo il setting riport cmq a inizio"),o())})),!0},resetEvent:o||function(){},retryBtn:"Settings"});!e||"NotAllowedError"!==e.name&&"NotFoundError"!==e.name?this.showError(this.$t("errors.generic.title"),this.$t("errors.generic.description"),i,o):this.showError(this.$t("errors."+t+"."+e.name.toLowerCase()+".title"),this.$t("errors."+t+"."+e.name.toLowerCase()+".description"),i,o)},manageMicError:function(t,e,i){this.printDeviceError("mic",t,e,i)},manageCamError:function(t,e,i){this.printDeviceError("cam",t,e,i)},manageMicCamError:function(t,e,i){this.printDeviceError("miccam",t,e,i)},showError:function(t,e,i,o){this.$root.$emit("showError",{title:t,error:e,hasretry:null!==i,click:i||function(){},resetEvent:o||function(){}})},swipeEvent:function(t){this.$root.$emit("swipe",t)},attachSwipeListener:function(){document.addEventListener("swiped-left",this.swipeEvent),document.addEventListener("swiped-right",this.swipeEvent)},detachSwipeListeners:function(){document.removeEventListener("swiped-left",this.swipeEvent),document.removeEventListener("swiped-right",this.swipeEvent)},fixWindowVariables:function(t){void 0===window[t]&&"undefined"!==window.top[t]&&(window[t]=window.top[t])}}),beforeMount:function(){var t=this;console.log("PRE loaded base Page"),console.log("fix loading variables"),["currentExercise","currentVMToken","currentVMKey","currentVMUrl"].forEach((function(e){t.fixWindowVariables(e)})),this.setCurrentPage(this)},beforeDestroy:function(){this.detachSwipeListeners()},mounted:function(){var t=this;console.log("loaded base Page"),console.log("try Load index",this.name,this.dynamicTexts),this.dynamicTexts&&Object.keys(this.dynamicTexts).length>0&&Object.keys(this.dynamicTexts).map((function(e){t.$appConfiguration.getText(e).then((function(i){t.dynamicTexts[e]=i})).catch((function(i){t.dynamicTexts[e]=t.$t(t.name+"."+e)}))})),null!==this.getCurrentPagerHeight&&document.querySelector(".v-main__wrap > div.pager")&&(document.querySelector(".v-main__wrap > div.pager").style.height=this.getCurrentPagerHeight+"px"),this.$nextTick((function(){t.attachSwipeListener(),null===t.getCurrentPagerHeight&&document.querySelector(".v-main__wrap > div.pager")&&t.setCurrentPagerHeight(Math.max(document.querySelector(".v-main__wrap > div.pager").clientHeight,document.querySelector(".v-main__wrap > div.pager").offsetHeight))}))}}},926:function(t,e,i){"use strict";i.r(e);i(5),i(50);var o={props:{title:{type:String,default:"Info"},transition:{type:String,default:"dialog-bottom-transition"},contentclasses:{type:String,default:""},description:{type:String,default:"Info text"},infoImage:{type:String,default:null},showSuperTitle:{type:Boolean,default:!0},thumbInTitle:{type:Boolean,default:!0},show:{type:Boolean,default:!1}},data:function(){return{}},computed:{showDialog:function(){return this.show}},methods:{closeClick:function(t){this.$emit("close",t)}},mounted:function(){}},n=i(42),r=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:t.transition,scrollable:"","content-class":"infoDialog "+t.contentclasses},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e("fullpage-card",{scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{class:[(t.showSuperTitle?"with":"without")+"__supertitle",(t.thumbInTitle?"with":"without")+"__thumbInTitle"]},[t.showSuperTitle?e("div",{staticClass:"text-center supertitle"},[t._v("About")]):t._e(),t._v(" "),t.infoImage&&!0===t.thumbInTitle?e("img",{staticClass:"titleImage",attrs:{src:t.infoImage}}):t._e(),t._v(" "),e("div",{staticClass:"text-center infodialog__title",domProps:{innerHTML:t._s(t.title)}})])]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center content"},[t.infoImage&&!1===t.thumbInTitle?e("img",{staticClass:"errorimage",attrs:{src:t.infoImage}}):t._e(),t._v(" "),e("span",{class:[t.contentclasses,"withdynamicTexts"],domProps:{innerHTML:t._s(t.description)}})])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{class:["pager"]},[e("v-btn",{attrs:{color:"nextvm",nuxt:""},on:{click:t.closeClick}},[t._t("closebtn",(function(){return[e("v-icon",[t._v("mdi-reload")]),t._v("Â "),e("span",{domProps:{innerHTML:t._s(t.$t("generic.done"))}})]}))],2)],1)]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null);e.default=r.exports;installComponents(r,{FullpageCard:i(220).default})},927:function(t,e,i){"use strict";i(3),i(5),i(7),i(0),i(8),i(6),i(9);var o=i(26),n=i(925),r=i(46);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.a={name:"expage",mixins:[n.a],computed:a(a({},Object(r.d)({getExercises:"getExercises",getCurrentExercise:"getCurrentExercise"})),{},{exercise:function(){return this.getCurrentExercise}}),mounted:function(){console.log("monti pagina interna ex",this.getExercises,this.getCurrentExercise),this.getExercises||console.warn("Cannot retrieve exercise list in page"),0===this.getExercises.length&&console.error("Cannot retrieve exercise list in page")}}},948:function(t,e,i){(function(t){var o,n,r,s,a=i(222);i(43),i(37),i(0),i(5),i(50),i(55),i(36),i(39),i(6),i(949),i(28),i(320),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343),i(344),i(345),s=function(){return function(){"use strict";var t={935:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Arcs=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new n.Shapes(e),u=new r.AudioData(t),h=s/2,l=a/2;this._options=o({count:30,diameter:s/3,lineWidth:3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&u.setFrequencyBand(this._options.frequencyBand),u.scaleData(Math.min(a,s)),"number"!=typeof this._options.count&&(this._options.count=1),"number"!=typeof this._options.diameter&&(this._options.diameter=1);for(var d=0;d<=this._options.count/2;d++){var p=Math.floor(u.data.length/this._options.count)*d,f=u.data[p],_=(a-this._options.diameter)/this._options.count*d,v=180-45/(255/f/2),g=180+45/(255/f/2),m=2*f;c.arc(_+m/2,h,m,v,g,this._options)}var y=Math.floor(u.data.length/2),x=u.data[y];for(c.circle(l,h,this._options.diameter*(x/255),this._options),d=this._options.count/2;d<=this._options.count;d++){var b=Math.floor(u.data.length/this._options.count)*d,C=u.data[b];_=(a-this._options.diameter)/this._options.count*d+this._options.diameter,v=180-45/(255/C/2),g=180+45/(255/C/2),m=2*C,c.arc(_-m/2,h,m,v+180,g+180,this._options)}},t}();e.Arcs=s},519:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Circles=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new n.Shapes(e),u=new r.AudioData(t),h=a/2,l=s/2;this._options=o({count:40,diameter:0,fillColor:"rgba(0,0,0,0)",frequencyBand:"mids"},this._options),this._options.frequencyBand&&u.setFrequencyBand(this._options.frequencyBand),u.scaleData(Math.min(a,s));for(var d=0;d<this._options.count;d++){var p=Math.floor(u.data.length/this._options.count)*d,f=u.data[p];c.circle(h,l,this._options.diameter+f,this._options)}},t}();e.Circles=s},938:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Cubes=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i,s,a,c,u,h,l,d,p,f,_,v,g=e.canvas,m=g.height,y=g.width,x=new n.Shapes(e),b=new r.AudioData(t);this._options=o({count:20,frequencyBand:"mids",gap:5},this._options);var C=Math.floor((y-this._options.gap*this._options.count)/this._options.count);if((null===(i=this._options)||void 0===i?void 0:i.cubeHeight)||(this._options.cubeHeight=C),this._options.frequencyBand&&b.setFrequencyBand(this._options.frequencyBand),b.scaleData(Math.min(y,m)),null===(s=this._options)||void 0===s?void 0:s.mirroredX)for(var w=1,E=Math.ceil(b.data.length/2);E<b.data.length;E++)b.data[E]=b.data[Math.ceil(b.data.length/2)-w],w++;if(null===(a=this._options)||void 0===a?void 0:a.top)for(E=0;E<this._options.count;E++)for(var P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],M=(this._options.gap+C)*E,O=Math.ceil($/C),S=0;S<O;S++){var k=S*(this._options.cubeHeight+this._options.gap);x.rectangle(M,k,C,this._options.cubeHeight,this._options)}if(null===(c=this._options)||void 0===c?void 0:c.right)for(E=0;E<this._options.count;E++)for(P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],k=E*(this._options.cubeHeight+this._options.gap),O=Math.ceil($/C),S=0;S<O;S++)M=y-(this._options.gap+C)*S,x.rectangle(M,k,C,this._options.cubeHeight,this._options);if((null===(u=this._options)||void 0===u?void 0:u.bottom)||!(null===(h=this._options)||void 0===h?void 0:h.top)&&!(null===(l=this._options)||void 0===l?void 0:l.right)&&!(null===(d=this._options)||void 0===d?void 0:d.left)&&!(null===(p=this._options)||void 0===p?void 0:p.center))for(E=0;E<this._options.count;E++)for(P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],M=(this._options.gap+C)*E,O=Math.ceil($/C),S=0;S<O;S++)k=m-S*(this._options.cubeHeight+this._options.gap),x.rectangle(M,k,C,this._options.cubeHeight,this._options);if(null===(f=this._options)||void 0===f?void 0:f.left)for(E=0;E<this._options.count;E++)for(P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],k=E*(this._options.cubeHeight+this._options.gap),O=Math.ceil($/C),S=0;S<O;S++)M=(this._options.gap+C)*S,x.rectangle(M,k,C,this._options.cubeHeight,this._options);if(null===(_=this._options)||void 0===_?void 0:_.center){for(E=0;E<this._options.count;E++)for(P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],M=(this._options.gap+C)*E,O=Math.ceil($/C),S=0;S<O;S++)k=m/2-S*(this._options.cubeHeight+this._options.gap),x.rectangle(M,k,C,this._options.cubeHeight,this._options);if(null===(v=this._options)||void 0===v?void 0:v.mirroredY)for(E=0;E<this._options.count;E++)for(P=Math.floor(b.data.length/this._options.count)*E,$=b.data[P],M=(this._options.gap+C)*E,O=Math.ceil($/C),S=0;S<O;S++)k=m/2+S*(this._options.cubeHeight+this._options.gap),x.rectangle(M,k,C,this._options.cubeHeight,this._options)}},t}();e.Cubes=s},540:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Flower=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new n.Shapes(e),u=new r.AudioData(t);this._options=o({count:20,diameter:s/3,frequencyBand:"mids",rotate:0},this._options);var h=a/2,l=s/2,d=360/this._options.count;this._options.frequencyBand&&u.setFrequencyBand(this._options.frequencyBand),u.scaleData(Math.min(a,s));for(var p=0;p<this._options.count;p++){var f=Math.floor(u.data.length/this._options.count)*p,_=u.data[f],v=c.toRadians(d*p+this._options.rotate),g=c.toRadians(d*(p+1)+this._options.rotate),m=this._options.diameter/2*Math.cos(v)+h,y=this._options.diameter/2*Math.sin(v)+l,x=this._options.diameter/2*Math.cos(g)+h,b=this._options.diameter/2*Math.sin(g)+l,C=this._options.diameter+_,w=C/2*Math.cos(v)+h,E=C/2*Math.sin(v)+l,P=C/2*Math.cos(g)+h,$=C/2*Math.sin(g)+l;c.polygon([{x:m,y:y},{x:w,y:E},{x:P,y:$},{x:x,y:b}],this._options)}},t}();e.Flower=s},522:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Glob=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i,s=e.canvas,a=s.height,c=s.width,u=new n.Shapes(e),h=new r.AudioData(t),l=c/2,d=a/2;if(this._options=o({count:100,diameter:a/3,frequencyBand:"mids",rounded:!0},this._options),this._options.frequencyBand&&h.setFrequencyBand(this._options.frequencyBand),h.scaleData(Math.min(c,a)),null===(i=this._options)||void 0===i?void 0:i.mirroredX)for(var p=1,f=Math.ceil(h.data.length/2);f<h.data.length;f++)h.data[f]=h.data[Math.ceil(h.data.length/2)-p],p++;var _=[];for(f=0;f<this._options.count;f++){var v=Math.floor(h.data.length/this._options.count)*f,g=h.data[v],m=360/this._options.count,y=this._options.diameter+g,x=l+y/2*Math.cos(u.toRadians(m*f)),b=d+y/2*Math.sin(u.toRadians(m*f));_.push({x:x,y:b})}_.push(_[0]),u.polygon(_,this._options)},t}();e.Glob=s},658:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Lines=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i,s,a,c,u,h,l,d,p,f,_,v=e.canvas,g=v.height,m=v.width,y=new n.Shapes(e),x=new r.AudioData(t);if(this._options=o({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&x.setFrequencyBand(this._options.frequencyBand),x.scaleData(Math.min(m,g)),null===(i=this._options)||void 0===i?void 0:i.mirroredX)for(var b=1,C=Math.ceil(x.data.length/2);C<x.data.length;C++)x.data[C]=x.data[Math.ceil(x.data.length/2)-b],b++;if(null===(s=this._options)||void 0===s?void 0:s.top)for(C=1;C<=this._options.count;C++){var w=Math.floor(x.data.length/this._options.count)*C,E=x.data[w],P=0,$=O=m/this._options.count*C,M=E;y.line(O,P,$,M,this._options)}if(null===(a=this._options)||void 0===a?void 0:a.right)for(C=1;C<=this._options.count;C++){w=Math.floor(x.data.length/this._options.count)*C;var O=m;$=m-(E=x.data[w]),M=P=g/this._options.count*C,y.line(O,P,$,M,this._options)}if((null===(c=this._options)||void 0===c?void 0:c.bottom)||!(null===(u=this._options)||void 0===u?void 0:u.top)&&!(null===(h=this._options)||void 0===h?void 0:h.right)&&!(null===(l=this._options)||void 0===l?void 0:l.left)&&!(null===(d=this._options)||void 0===d?void 0:d.center))for(C=1;C<=this._options.count;C++)w=Math.floor(x.data.length/this._options.count)*C,E=x.data[w],$=O=m/this._options.count*C,M=(P=g)-E,y.line(O,P,$,M,this._options);if(null===(p=this._options)||void 0===p?void 0:p.left)for(C=1;C<=this._options.count;C++)w=Math.floor(x.data.length/this._options.count)*C,O=0,$=E=x.data[w],M=P=g/this._options.count*C,y.line(O,P,$,M,this._options);if(null===(f=this._options)||void 0===f?void 0:f.center)for(C=1;C<=this._options.count;C++)w=Math.floor(x.data.length/this._options.count)*C,E=x.data[w],$=O=m/this._options.count*C,M=(P=g/2)-E,y.line(O,P,$,M,this._options),(null===(_=this._options)||void 0===_?void 0:_.mirroredY)&&($=O=m/this._options.count*C,M=(P=g/2)+E,y.line(O,P,$,M,this._options))},t}();e.Lines=s},771:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.LinesCustom=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i,s,a,c,u,h,l,d,p,f,_,v,g=e.canvas,m=g.height,y=g.width,x=new n.Shapes(e),b=new r.AudioData(t);if(this._options=o({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&b.setFrequencyBand(this._options.frequencyBand),b.scaleData(Math.min(y,m)),null===(i=this._options)||void 0===i?void 0:i.mirroredX)for(var C=1,w=Math.ceil(b.data.length/2);w<b.data.length;w++)b.data[w]=b.data[Math.ceil(b.data.length/2)-C],C++;if(null===(s=this._options)||void 0===s?void 0:s.top)for(w=1;w<=this._options.count;w++){var E=Math.floor(b.data.length/this._options.count)*w,P=b.data[E],$=0,M=S=y/this._options.count*w,O=P;x.line(S,$,M,O,this._options)}if(null===(a=this._options)||void 0===a?void 0:a.right)for(w=1;w<=this._options.count;w++){E=Math.floor(b.data.length/this._options.count)*w;var S=y;M=y-(P=b.data[E]),O=$=m/this._options.count*w,x.line(S,$,M,O,this._options)}if((null===(c=this._options)||void 0===c?void 0:c.bottom)||!(null===(u=this._options)||void 0===u?void 0:u.top)&&!(null===(h=this._options)||void 0===h?void 0:h.right)&&!(null===(l=this._options)||void 0===l?void 0:l.left)&&!(null===(d=this._options)||void 0===d?void 0:d.center))for(w=1;w<=this._options.count;w++)E=Math.floor(b.data.length/this._options.count)*w,P=b.data[E],M=S=y/this._options.count*w,O=($=m)-P,x.line(S,$,M,O,this._options);if(null===(p=this._options)||void 0===p?void 0:p.left)for(w=1;w<=this._options.count;w++)E=Math.floor(b.data.length/this._options.count)*w,S=0,M=P=b.data[E],O=$=m/this._options.count*w,x.line(S,$,M,O,this._options);if(null===(f=this._options)||void 0===f?void 0:f.center){var k={fillColor:this._options.lineColor,lineColor:this._options.lineColor,lineWidth:1},B=y/2,j=Math.ceil(this._options.count/2)+1,q=j,T={lineColor:this._options.lineColor,lineWidth:this._options.lineWidth,rounded:this._options.rounded},D={lineColor:this._options.lineColor,lineWidth:this._options.lineWidth,rounded:this._options.rounded},I={lineColor:this._options.lineColor,lineWidth:this._options.lineWidth,rounded:this._options.rounded},L={lineColor:this._options.lineColor,lineWidth:this._options.lineWidth,rounded:this._options.rounded},A=this._options.lineWidth/2-1,H=B/j;for(w=1;w<j;w++)E=Math.floor(b.data.length/this._options.count)*w,M=S=H*(q-w),O=($=m/2)-(P=b.data[E]),x.roundLine(S,$,M,O,T),x.circle(M,O,A,k),(null===(_=this._options)||void 0===_?void 0:_.mirroredY)&&(M=S=H*(q-w),O=($=m/2)+P,x.roundLine(S,$,M,O,D),x.circle(M,O,A,k)),M=S=1===w?B:B+H*(w-1),O=($=m/2)-P,x.roundLine(S,$,M,O,I),x.circle(M,O,A,k),(null===(v=this._options)||void 0===v?void 0:v.mirroredY)&&(M=S=1==w?B:B+H*(w-1),O=($=m/2)+P,x.roundLine(S,$,M,O,L),x.circle(M,O,A,k))}},t}();e.LinesCustom=s},817:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Shine=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i,s=e.canvas,a=s.height,c=s.width,u=new n.Shapes(e),h=new r.AudioData(t);this._options=o({count:30,rotate:0,diameter:a/3,frequencyBand:"mids"},this._options);var l=c/2,d=a/2,p=360/this._options.count;this._options.frequencyBand&&h.setFrequencyBand(this._options.frequencyBand),h.scaleData(Math.min(c,a));for(var f=0;f<this._options.count;f++){var _=Math.floor(h.data.length/this._options.count)*f,v=h.data[_],g=u.toRadians(p*f+this._options.rotate),m=(null===(i=this._options)||void 0===i?void 0:i.offset)?this._options.diameter-v/2:this._options.diameter,y=this._options.diameter+v,x=m/2*Math.cos(g)+l,b=m/2*Math.sin(g)+d,C=y/2*Math.cos(g)+l,w=y/2*Math.sin(g)+d;u.line(x,b,C,w,this._options)}},t}();e.Shine=s},123:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Square=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new n.Shapes(e),u=new r.AudioData(t);this._options=o({count:40,diameter:s/3,frequencyBand:"mids"},this._options);var h=this._options.count/4,l=a/2,d=s/2;this._options.frequencyBand&&u.setFrequencyBand(this._options.frequencyBand),u.scaleData(Math.min(a,s));for(var p=0;p<h;p++){var f=Math.floor(u.data.length/this._options.count)*p,_=u.data[f],v=this._options.diameter/h,g=l-this._options.diameter/2+v*p,m=d-this._options.diameter/2;c.line(g,m,g,m-_,this._options)}for(p=0;p<h;p++){f=Math.floor(u.data.length/this._options.count)*(2*p),_=u.data[f];var y=this._options.diameter/h;g=l+this._options.diameter/2,m=d-this._options.diameter/2+y*p,c.line(g,m,g+_,m,this._options)}for(p=0;p<h;p++)f=Math.floor(u.data.length/this._options.count)*(3*p),_=u.data[f],v=this._options.diameter/h,g=l-this._options.diameter/2+v*p,m=d+this._options.diameter/2,c.line(g,m,g,m+_,this._options);for(p=0;p<h;p++)f=Math.floor(u.data.length/this._options.count)*(4*p),_=u.data[f],y=this._options.diameter/h,g=l-this._options.diameter/2,m=d-this._options.diameter/2+y*p,c.line(g,m,g-_,m,this._options)},t}();e.Square=s},270:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Turntable=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new n.Shapes(e),u=new r.AudioData(t);this._options=o({count:20,rotate:0,diameter:s/3,cubeHeight:20,frequencyBand:"mids",gap:5},this._options);var h=a/2,l=s/2,d=360/this._options.count;this._options.frequencyBand&&u.setFrequencyBand(this._options.frequencyBand),u.scaleData(Math.min(a,s));for(var p=0;p<this._options.count;p++)for(var f=Math.floor(u.data.length/this._options.count)*p,_=u.data[f],v=0;v<_/this._options.cubeHeight;v++){var g=this._options.diameter+this._options.cubeHeight*v+this._options.gap,m=this._options.diameter+this._options.cubeHeight*(v+1),y=c.toRadians(d*p+this._options.rotate+this._options.gap/4),x=c.toRadians(d*(p+1)+this._options.rotate),b=g/2*Math.cos(y)+h,C=g/2*Math.sin(y)+l,w=g/2*Math.cos(x)+h,E=g/2*Math.sin(x)+l,P=m/2*Math.cos(y)+h,$=m/2*Math.sin(y)+l,M=m/2*Math.cos(x)+h,O=m/2*Math.sin(x)+l;c.polygon([{x:b,y:C},{x:P,y:$},{x:M,y:O},{x:w,y:E}],this._options)}},t}();e.Turntable=s},857:function(t,e,i){var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Wave=void 0;var n=i(426),r=i(941),s=function(){function t(t){this._options=null!=t?t:{}}return t.prototype.draw=function(t,e){var i=e.canvas,s=i.height,a=i.width,c=new r.AudioData(t),u=new n.Shapes(e);if(this._options=o({count:64,frequencyBand:"mids"},this._options),this._options.frequencyBand&&c.setFrequencyBand(this._options.frequencyBand),c.scaleData(Math.min(a,s)),this._options.mirroredX)for(var h=1,l=Math.ceil(c.data.length/2);l<c.data.length;l++)c.data[l]=c.data[Math.ceil(c.data.length/2)-h],h++;if(this._options.top){var d=[{x:0,y:0}];for(l=0;l<=this._options.count;l++){var p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p];d.push({x:Math.floor(a/this._options.count)*l,y:f})}d.push({x:a,y:0}),u.polygon(d,this._options)}if(this._options.right){for(d=[{x:a,y:0}],l=0;l<=this._options.count;l++)p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p],d.push({x:a-f,y:Math.floor(a/this._options.count)*l});d.push({x:a,y:s}),u.polygon(d,this._options)}if(this._options.bottom||!this._options.top&&!this._options.right&&!this._options.left&&!this._options.center){for(d=[{x:0,y:s}],l=0;l<=this._options.count;l++)p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p],d.push({x:Math.floor(a/this._options.count)*l,y:s-f});d.push({x:a,y:s}),u.polygon(d,this._options)}if(this._options.left){for(d=[{x:0,y:0}],l=0;l<=this._options.count;l++)p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p],d.push({x:f,y:Math.floor(a/this._options.count)*l});d.push({x:0,y:s}),u.polygon(d,this._options)}if(this._options.center){for(d=[{x:0,y:s/2}],l=0;l<=this._options.count;l++)p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p],d.push({x:Math.floor(a/this._options.count)*l,y:s/2-f});if(d.push({x:a,y:s/2}),u.polygon(d,this._options),this._options.mirroredY){for(d=[{x:0,y:s/2}],l=0;l<=this._options.count;l++)p=Math.floor(c.data.length/this._options.count)*l,f=c.data[p],d.push({x:Math.floor(a/this._options.count)*l,y:s/2+f});d.push({x:a,y:s/2}),u.polygon(d,this._options)}}},t}();e.Wave=s},941:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioData=void 0;var i=function(){function t(t){this.data=t}return t.prototype.setFrequencyBand=function(t){var e=Math.floor(.0625*this.data.length),i=Math.floor(.0625*this.data.length),o=Math.floor(.375*this.data.length),n={base:this.data.slice(0,e),lows:this.data.slice(e+1,e+i),mids:this.data.slice(e+i+1,e+i+o),highs:this.data.slice(e+i+o+1)};this.data=n[t]},t.prototype.scaleData=function(t){t<255&&(this.data=this.data.map((function(e){var i=Math.round(e/255*100)/100;return t*i})))},t}();e.AudioData=i},426:function(t,e){var i=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{i=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Shapes=void 0;var n=function(){function t(t){this._canvasContext=t}return t.prototype.toRadians=function(t){return t*Math.PI/180},t.prototype.toDegrees=function(t){return 180*t/Math.PI},t.prototype._rotatePoint=function(t,e,i,o,n){var r=this.toRadians(n);return{x:Math.cos(r)*(i-t)-Math.sin(r)*(o-e)+t,y:Math.sin(r)*(i-t)+Math.cos(r)*(o-e)+e}},t.prototype._makeGradient=function(t,e){var i=0,o=this._canvasContext.canvas.height/2,n=this._canvasContext.canvas.width,r=this._canvasContext.canvas.height/2;if(e){var s=this._canvasContext.canvas.width/2,a=this._canvasContext.canvas.height/2,c=this._rotatePoint(s,a,i,o,e);i=c.x,o=c.y;var u=this._rotatePoint(s,a,n,r,e);n=u.x,r=u.y}var h=this._canvasContext.createLinearGradient(i,o,n,r);return t.forEach((function(e,i){h.addColorStop(1/t.length*i,e)})),h},t.prototype._makeImage=function(t){return i(this,void 0,void 0,(function(){var e,i=this;return o(this,(function(o){return(e=new Image).src=t,[2,new Promise((function(t,o){e.onload=function(){var o=i._canvasContext.createPattern(e,"repeat");t(o)}}))]}))}))},t.prototype._implementOptions=function(t,e){var i,o,n,r,s,a,c,u,h,l,d,p,f=this;void 0===e&&(e=!0),"string"==typeof(null==t?void 0:t.lineColor)?this._canvasContext.strokeStyle=t.lineColor:(null===(i=null==t?void 0:t.lineColor)||void 0===i?void 0:i.gradient)?this._canvasContext.strokeStyle=this._makeGradient(t.lineColor.gradient,t.lineColor.rotate):(null===(o=null==t?void 0:t.lineColor)||void 0===o?void 0:o.image)?this._makeImage(null===(n=null==t?void 0:t.lineColor)||void 0===n?void 0:n.image).then((function(t){return f._canvasContext.strokeStyle=t})):this._canvasContext.strokeStyle="#000","string"==typeof(null==t?void 0:t.fillColor)?this._canvasContext.fillStyle=t.fillColor:(null===(r=null==t?void 0:t.fillColor)||void 0===r?void 0:r.gradient)?this._canvasContext.fillStyle=this._makeGradient(t.fillColor.gradient,t.fillColor.rotate):(null===(s=null==t?void 0:t.fillColor)||void 0===s?void 0:s.image)?this._makeImage(null===(a=null==t?void 0:t.fillColor)||void 0===a?void 0:a.image).then((function(t){return f._canvasContext.fillStyle=t})):this._canvasContext.fillStyle="#000",this._canvasContext.lineCap=null!==(c=(null==t?void 0:t.rounded)?"round":"butt")&&void 0!==c?c:"butt",this._canvasContext.lineWidth=null!==(u=null==t?void 0:t.lineWidth)&&void 0!==u?u:1,this._canvasContext.shadowColor=null!==(l=null===(h=null==t?void 0:t.glow)||void 0===h?void 0:h.color)&&void 0!==l?l:"rgba(0,0,0,0)",this._canvasContext.shadowBlur=null!==(p=null===(d=null==t?void 0:t.glow)||void 0===d?void 0:d.strength)&&void 0!==p?p:0,this._canvasContext.shadowOffsetX=0,this._canvasContext.shadowOffsetY=0,e&&this._canvasContext.closePath(),this._canvasContext.stroke(),e&&this._canvasContext.fill()},t.prototype.arc=function(t,e,i,o,n,r){return this._canvasContext.beginPath(),this._canvasContext.arc(t,e,i/2,this.toRadians(o),this.toRadians(n)),this._implementOptions(r,!1),this},t.prototype.circle=function(t,e,i,o){return this._canvasContext.beginPath(),this._canvasContext.arc(t,e,i/2,0,2*Math.PI),this._implementOptions(o),this},t.prototype.line=function(t,e,i,o,n){return this._canvasContext.beginPath(),this._canvasContext.moveTo(t,e),this._canvasContext.lineTo(i,o),this._implementOptions(n),this},t.prototype.roundLine=function(t,e,i,o,n){return this._canvasContext.beginPath(),this._canvasContext.moveTo(t,e),this._canvasContext.lineCap="round",this._canvasContext.lineTo(i,o),this._implementOptions(n),this},t.prototype.polygon=function(t,e){var i;this._canvasContext.beginPath(),this._canvasContext.moveTo(t[0].x,t[0].y);for(var o=0;o<t.length;o++){var n=t[o],r=null!==(i=t[o+1])&&void 0!==i?i:n,s=(n.x+r.x)/2,a=(n.y+r.y)/2;(null==e?void 0:e.rounded)?this._canvasContext.quadraticCurveTo(t[o].x,t[o].y,s,a):this._canvasContext.lineTo(t[o].x,t[o].y)}return this._implementOptions(e),this},t.prototype.rectangle=function(t,e,i,o,n){var r,s=null!==(r=null==n?void 0:n.radius)&&void 0!==r?r:0;return i<2*s&&(s=i/2),o<2*s&&(s=o/2),this._canvasContext.beginPath(),this._canvasContext.moveTo(t+s,e),this._canvasContext.arcTo(t+i,e,t+i,e+o,s),this._canvasContext.arcTo(t+i,e+o,t,e+o,s),this._canvasContext.arcTo(t,e+o,t,e,s),this._canvasContext.arcTo(t,e,t+i,e,s),this._implementOptions(n),this},t}();e.Shapes=n}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}var o={};return function(){var t=o;Object.defineProperty(t,"__esModule",{value:!0}),t.Wave=void 0;var e=i(935),n=i(519),r=i(938),s=i(540),a=i(522),c=i(658),u=i(771),h=i(817),l=i(123),d=i(270),p=i(857),f=function(){function t(t,i,o){void 0===o&&(o=!1);var f=this;this.animations={Arcs:e.Arcs,Circles:n.Circles,Cubes:r.Cubes,Flower:s.Flower,Glob:a.Glob,Lines:c.Lines,LinesCustom:u.LinesCustom,Shine:h.Shine,Square:l.Square,Turntable:d.Turntable,Wave:p.Wave},this._activeAnimations=[],this._canvasElement=i,this._canvasContext=this._canvasElement.getContext("2d"),this._muteAudio=o,this._interacted=!1,t instanceof HTMLAudioElement?(this._audioElement=t,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?["touchstart","touchmove","touchend","mouseup","click"].forEach((function(t){document.body.addEventListener(t,(function(){return f.connectAnalyser()}),{once:!0})})):this._audioElement.addEventListener("play",(function(){return f.connectAnalyser()}),{once:!0})):(this._audioContext=t.context,this._audioSource=t.source,this._audioAnalyser=this._audioContext.createAnalyser(),this._play())}return t.prototype.connectAnalyser=function(){this._interacted||(this._interacted=!0,this._audioContext=new AudioContext,this._audioSource=this._audioContext.createMediaElementSource(this._audioElement),this._audioAnalyser=this._audioContext.createAnalyser(),this._play())},t.prototype._play=function(){var t=this;this._audioSource.connect(this._audioAnalyser),this._muteAudio||this._audioSource.connect(this._audioContext.destination),this._audioAnalyser.smoothingTimeConstant=.85,this._audioAnalyser.fftSize=1024;var e=new Uint8Array(this._audioAnalyser.frequencyBinCount);!function i(){t._audioAnalyser.getByteFrequencyData(e),t._canvasContext.clearRect(0,0,t._canvasContext.canvas.width,t._canvasContext.canvas.height),t._activeAnimations.forEach((function(i){i.draw(e,t._canvasContext)})),window.requestAnimationFrame(i)}()},t.prototype.addAnimation=function(t){this._activeAnimations.push(t)},t.prototype.clearAnimations=function(){this._activeAnimations=[]},t}();t.Wave=f}(),o}()},"object"==a(e)&&"object"==a(t)?t.exports=s():(n=[],void 0===(r="function"==typeof(o=s)?o.apply(e,n):o)||(t.exports=r))}).call(this,i(99)(t))},949:function(t,e,i){"use strict";var o=i(1),n=i(321),r=i(179);o({target:"Array",proto:!0},{fill:n}),r("fill")},964:function(t,e,i){"use strict";i.r(e);i(3),i(5),i(8),i(6),i(9);var o=i(26),n=(i(28),i(61),i(0),i(40),i(7),i(27),i(927)),r=i(46),s=i(948);function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){Object(o.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={name:"audioPlayer",mixins:[n.a],data:function(){return{step:0,exid:this.$route.params.id,programid:this.$route.params.fromprogram||!1,withindex:this.$route.params.withindex||!1,backto:this.$route.params.backto||!1,name:"audioPlayer",play:!1,audiofile:null,loaded:!1,ended:!1,currentTime:"00:00",currentTimeS:0,uuid:"0",audio:void 0,totalDuration:0,about:{show:!1}}},transition:{name:"fade",mode:"out-in",css:!1,beforeEnter:function(t){this.$anime.set(t,{scale:1,opacity:0})},enter:function(t,e){this.$anime({targets:t,opacity:[0,1],duration:500,easing:"easeInOutSine",complete:e})},leave:function(t,e){this.$anime({targets:t,opacity:[1,0],duration:500,easing:"easeInOutSine",complete:e}),document.body.classList.remove("bodyblock")}},computed:c(c({},Object(r.d)({getCurrentUser:"getCurrentUser",getExercises:"getExercises",getCurrentExercise:"getCurrentExercise",skipTutorial:"skipTutorial",isCurrentUserGuest:"isCurrentUserGuest"})),{},{localCurrentUser:function(){return $nuxt.$config.env.environment.indexOf("library")>-1?$nuxt.$useractions.retrieveMeta():this.getCurrentUser},exercise:function(){return this.getCurrentExercise},duration:function(){return this.audio?this.convertTimeHHMMSS(this.totalDuration):""},playerId:function(){return"player-"+this.uuid},currentPercent:function(){if(this.totalDuration<=0)return 0;if(0===this.currentTimeS)return 0;if(this.audio){var t=this.currentTimeS/this.totalDuration*100;return t>100?100:t}return 0}}),methods:c(c({},Object(r.c)({setCurrentExerciseIndex:"setCurrentExerciseIndex",setCurrentExerciseById:"setCurrentExerciseById",setCurrentUser:"setCurrentUser",setIsGuest:"setIsGuest",addDoneExercise:"addDoneExercise",setCurrentExerciseByData:"setCurrentExerciseByData"})),{},{nextStep:function(){var t=this;this.step<1&&(this.step+=1,this.$nextTick((function(){t.startMediaExcerise()})))},backStep:function(){0!==this.step?this.step=0:this.exitClick()},closeInfo:function(){this.about.show=!1},infoStep:function(){this.play&&this.playClick(),this.about.show=!0},prevStep:function(){!0!==this.about.show?this.exitClick():this.closeInfo()},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx".replace(/[xy]/g,(function(t){var e;return e=16*Math.random()|0,("x"===t?e:3&e|8).toString(16)}))},convertTimeHHMMSS:function(t){var e=new Date(1e3*t).toISOString().substr(11,8);return 0===e.indexOf("00:")?e.substr(3):e},playClick:function(){this.play=!this.play,this.play?this.audio.play():this.audio.pause()},forwardClick:function(){this.audio.currentTime=this.audio.currentTime+10,this.currentTimeS=this.audio.currentTime},rewindClick:function(){this.audio.currentTime=this.audio.currentTime-10,this.currentTimeS=this.audio.currentTime},exitClick:function(){this.$analytics.logEvent("exercise_quit",{id:this.getCurrentExercise.id,name:this.getCurrentExercise.title,program_id:this.getCurrentExercise.program_id||null,type:this.getCurrentExercise.type}),document.querySelector("#__nuxt")&&document.querySelector("#__nuxt").classList.add("quit"),this.exerciseStepBack()},attachCanvasWave:function(){document.querySelector(".waveContainer_v2").getBoundingClientRect().width;var t=document.querySelector("#"+this.playerId),e=document.querySelector("#"+this.playerId+"_canvas"),i=(e.closest("div"),new s.Wave(t,e));i.addAnimation(new i.animations.LinesCustom({mirroredY:!0,mirroredX:!0,frequencyBand:"mids",count:14,center:!0,lineColor:"#FFF",lineWidth:6,rounded:!0}))},_handleLoaded:function(){var t=this;this.audio.readyState>=2?(this.loaded=!0,this.totalDuration=parseInt(this.audio.duration),this.step>0&&this.$nextTick((function(){t.attachCanvasWave(),t.playClick()}))):this.$root.$emit("showError",{hasretry:!0,title:$nuxt.$t("errors.global.title"),error:$nuxt.$t("errors.global.msg_loadaudiotrack"),click:null,resetEvent:function(){return $nuxt.$router.replace($nuxt.localePath(this.defaultHomeUrl)),$nuxt.$airlyn.finishExercise({reason:"exercise-audio-fail",result:{}}).finally((function(){console.log("exercise audio cannot be loaded, error")})),$nuxt.$airlyn.closeExercise().finally((function(){console.log("exercise closed, success")})),!0}})},_handlePlayingUI:function(t){var e=parseInt(this.audio.currentTime);this.currentTimeS=parseInt(this.audio.currentTime),this.currentTime=this.convertTimeHHMMSS(this.totalDuration-e)},_handlePlayPause:function(t){"pause"===t.type&&!1===this.play&&(this.currentTime="00:00",this.play=!1,console.log("finish?"))},_handleEnd:function(t){var e=this;if(console.log("audio finito",t),this.play=!1,this.ended=!0,this.isCurrentUserGuest)return this.getCurrentExercise.completed=!0,this.$root.$emit("completedExercise",this.getCurrentExercise),void this.$nextTick((function(){e.$root.$emit("showPager",{show:!1});var t=e.buildSuffix();t.length>0&&(t="/"+t),e.$router.push($nuxt.localePath("/ml/greetings/"+e.exid+t))}));var i=!1;this.$exerciseManager.completeExercise(this.getCurrentExercise,null,null,{},this.localCurrentUser).then((function(t){console.log("got record result",t),t.exercise&&t.response&&t.exercise.completed?(i=!0,e.getCurrentExercise.completed=t.exercise.completed):i="Error with restApi"})).catch((function(t){console.error("Errore invio api [breathing_exercises_audio]:",t),e.$captureException(t),i=$nuxt.$t("errors.global.title"),e.$analytics.logEvent("error",{title:"cannot send exercise audio"})})).finally((function(){!0===i?(e.addDoneExercise(1),e.$nextTick((function(){e.$root.$emit("showPager",{show:!1});var t=e.buildSuffix();t.length>0&&(t="/"+t),e.$router.push($nuxt.localePath("/ml/greetings/"+e.exid+t))}))):e.$root.$emit("showError",{hasretry:!0,title:$nuxt.$t("errors.global.uhoh"),error:i,leaveBtn:e.$t("generic.startanyway"),click:function(){return e.startAgain(),!0},resetEvent:function(){return this.exerciseStepBack(),!0}})}))},startAgain:function(){this.ended=!1,this.audio.currentTime=0,this.currentTimeS=0,this.play=!1},init:function(){this.ended=!1,this.audio.addEventListener("timeupdate",this._handlePlayingUI),this.audio.addEventListener("loadeddata",this._handleLoaded),this.audio.addEventListener("pause",this._handlePlayPause),this.audio.addEventListener("play",this._handlePlayPause),this.audio.addEventListener("ended",this._handleEnd)},getAudio:function(){return this.$el.querySelectorAll("audio")[0]},handleBack:function(){console.log("got backbutton"),this.prevStep()},retrieveCurrentExerciseAndSet:function(){var t=this;if(this.hasJoinedProgramById(this.programid)){var e=this.getProgramById(this.programid);if(this.withindex>-1){var i=e.exercises.filter((function(e){return e.id===t.exid&&e.program_index==t.withindex}));i.length>0&&this.setCurrentExerciseByData(i[0])}else this.setCurrentExerciseByData(null)}else this.setCurrentExerciseById(this.exid)},startMediaExcerise:function(){this.attachCanvasWave(),this.audio.load()}}),mounted:function(){var t=this;this.$capacitor&&this.$capacitor.isNativePlatform()&&(this.$backEmitter.callback=this.handleBack),this.uuid=this.generateUUID(),this.exid?(this.retrieveCurrentExerciseAndSet(),this.getCurrentExercise?(this.audiofile=this.getCurrentExercise.audio,this.audio=this.getAudio(),this.init()):(console.warn("cannot find exercise ",this.exid),this.exerciseStepBack()),this.$nextTick((function(){t.name="audioPlayer",t.$root.$emit("showNext",!1),t.$root.$emit("showPager",{show:!1}),t.$root.$emit("showOverlay",{show:!1}),t.audio&&(t.$analytics.logEvent("exercise_listening",{id:t.getCurrentExercise.id,name:t.getCurrentExercise.title,program_id:t.getCurrentExercise.program_id||null,program_name:t.hasJoinedProgramById(t.getCurrentExercise.program_id)?t.getProgramById(t.getCurrentExercise.program_id).name:null,type:t.getCurrentExercise.type}),t.$exerciseManager.startExercise(t.getCurrentExercise),t.$analytics.setScreenName(t.getCurrentExercise.title+" listening page"))}))):(console.warn("cannot find exercise[2] ",this.exid),this.exerciseStepBack())},beforeDestroy:function(){this.$capacitor&&this.$capacitor.isNativePlatform()&&(this.$backEmitter.callback=null),this.audio&&(this.audio.removeEventListener("timeupdate",this._handlePlayingUI),this.audio.removeEventListener("loadeddata",this._handleLoaded),this.audio.removeEventListener("pause",this._handlePlayPause),this.audio.removeEventListener("play",this._handlePlayPause),this.audio.removeEventListener("ended",this._handleEnd))}},h=i(42),l=Object(h.a)(u,(function(){var t=this,e=t._self._c;return e("fullpage-card",{class:["audioExercise withpage","mediaexercise_step_"+t.step],attrs:{hidefooter:!1},scopedSlots:t._u([{key:"header",fn:function(){return[t.step>0?e("v-row",{staticClass:"navigation",attrs:{"align-content":"center",justify:"space-between"}},[e("v-btn",{attrs:{icon:""},on:{click:t.exitClick}},[e("v-icon",[t._v("mdi-close-circle-outline")])],1),t._v(" "),t.getCurrentExercise?e("div",{staticClass:"exercise__title"},[e("span",{domProps:{innerHTML:t._s(t.getCurrentExercise.title)}})]):t._e(),t._v(" "),e("v-btn",{attrs:{icon:""},on:{click:t.infoStep}},[e("v-icon",[t._v("mdi-information-outline")])],1)],1):t._e()]},proxy:!0},{key:"body",fn:function(){return[e("transition",{attrs:{appear:"",name:"fade"}},[0==t.step?e("div",{staticClass:"tutorial_info"},[e("div",{staticClass:"tutorial__header header"},[e("div",{class:["exercise_type icon_holder",t.getCurrentExercise.type]},[t._v("Â ")])]),t._v(" "),e("div",{staticClass:"tutorial__body body"},[e("div",{staticClass:"tutorial__title"},[t._v(t._s(t.getCurrentExercise.title))]),t._v(" "),e("div",{staticClass:"tutorial_exinfo"},[e("v-icon",[t._v("mdi-clock-time-four-outline")]),t._v("Â \n            "+t._s(t.$humanizeTime(t.getCurrentExercise.duration))+"\n          ")],1),t._v(" "),e("div",{staticClass:"tutorial__content",domProps:{innerHTML:t._s(t.getCurrentExercise.about||"")}})])]):e("div",{staticStyle:{"min-width":"100%"}},[e("div",{staticClass:"playerArea",staticStyle:{"min-width":"100%"}},[e("div",{class:["waveContainer_v2",t.play?"playing":"",t.ended?"ended":""]},[e("canvas",{attrs:{id:t.playerId+"_canvas"}})])])])]),t._v(" "),e("audio",{ref:"audiofile",staticStyle:{display:"none"},attrs:{id:t.playerId,loop:!1,src:t.audiofile,preload:"auto",playsinline:"",crossorigin:"anonymous"}})]},proxy:!0},{key:"footer",fn:function(){return[t.loaded&&t.step>0?e("div",{staticClass:"footer_container"},[e("div",{staticClass:"runningTime"},[e("v-progress-linear",{key:t.currentTime,staticStyle:{"margin-bottom":"12px"},model:{value:t.currentPercent,callback:function(e){t.currentPercent=e},expression:"currentPercent"}}),t._v(" "),t.play?e("span",[t._v("-"+t._s(t.currentTime))]):t._e(),t._v(" "),t.play?t._e():e("span",[t._v(t._s(t.duration))])],1),t._v(" "),e("v-row",{staticClass:"player",attrs:{"align-content":"center",justify:"space-between"}},[e("v-btn",{attrs:{icon:"",disabled:t.audio.currentTime<10},on:{click:t.rewindClick}},[e("v-icon",[t._v("mdi-rewind-10")])],1),t._v(" "),e("v-btn",{staticClass:"btn_play",attrs:{disabled:!t.loaded},on:{click:t.playClick}},[t.play?t._e():e("v-icon",[t._v("mdi-play")]),t._v(" "),t.play?e("v-icon",[t._v("mdi-pause")]):t._e()],1),t._v(" "),e("v-btn",{attrs:{icon:"",disabled:t.audio.currentTime>t.totalDuration-10},on:{click:t.forwardClick}},[e("v-icon",[t._v("mdi-fast-forward-10")])],1)],1)],1):t._e(),t._v(" "),0===t.step?e("div",{staticClass:"steps"},[e("v-btn",{attrs:{color:"backvm",text:"",nuxt:""},on:{click:t.backStep}},[t._v("\n        "+t._s(t.$t("generic.back"))+"\n      ")]),t._v(" "),e("v-spacer",{staticClass:"spacer"}),t._v(" "),e("v-btn",{staticClass:"nextController",attrs:{color:"nextvm"},on:{click:t.nextStep}},[t._v("\n        "+t._s(t.$t("generic.start_arrow"))+"Â \n      ")])],1):t._e(),t._v(" "),t.getCurrentExercise?e("infodialog",{attrs:{show:t.about.show,contentclasses:"infoContent",title:t.getCurrentExercise.title,description:t.getCurrentExercise.about||"",infoImage:t.getCurrentExercise.aboutImage||t.getCurrentExercise.thumbnail},on:{close:t.closeInfo},scopedSlots:t._u([{key:"closebtn",fn:function(){return[t._v("Alright")]},proxy:!0}],null,!1,2600066686)}):t._e()]},proxy:!0}])})}),[],!1,null,null,null);e.default=l.exports;installComponents(l,{Infodialog:i(926).default,FullpageCard:i(220).default})}}]);
//# sourceMappingURL=204a62f.js.map