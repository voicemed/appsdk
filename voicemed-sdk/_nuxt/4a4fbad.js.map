{"version":3,"sources":["webpack:///./mixins.js/basepage.js","webpack:///./components/countdown.vue","webpack:///./components/countdown.vue?cd31","webpack:///./components/countdown.vue?6c73","webpack:///./components/exerciseanimationprogress.vue","webpack:///./components/exerciseanimationprogress.vue?fb08","webpack:///./components/exerciseanimationprogress.vue?ee9d","webpack:///./pages/ml/exerciseexecutor/noise.vue","webpack:///./pages/ml/exerciseexecutor/noise.vue?3ff5","webpack:///./pages/ml/exerciseexecutor/noise.vue?d6f8"],"names":["name","transition","mode","css","beforeEnter","el","document","querySelector","classList","contains","startPoint","this","$anime","set","scale","opacity","translateX","enter","done","targets","duration","easing","complete","leave","translateY","afterLeave","remove","data","exid","$route","params","id","programid","fromprogram","withindex","backto","hasBack","hasNext","hasInfo","currentTutorial","tutorialList","tutorialShownHard","computed","_objectSpread","mapGetters","getCurrentPagerHeight","getTutorialShown","getLocalTutorialShown","isVoicemed","$nuxt","$config","env","environment","indexOf","isAirlyn","nuxtloading","$loading","loading","defaultHomeUrl","methods","mapActions","setCurrentPage","setCurrentPagerHeight","setTutorialRunPerPage","setTutorialRun","setTutorialRunLocal","setPreferenceTutorial","tutorialClose","$set","tutorialHasNext","_index","index","find","v","exerciseStepBack","console","log","$router","replace","localePath","buildSuffix","suffixes","programCheck","push","join","tutorialNext","visible","_next","position","height","scrollTop","top","appHeight","arrowTop","Math","max","warn","footerHeight","$nextTick","scrollTo","left","behavior","getTutorialIndex","length","getTutorialText","tutorial","$t","title","getTutorialDialogStyle","_rule","topPosition","$capacitor","isNativePlatform","updated","width","right","Object","entries","map","_ref","_ref2","_slicedToArray","k","concat","getTutorialStyle","baseOffset","_ref3","_ref4","initTutorial","_this","_tutorialCards","_toConsumableArray","querySelectorAll","_checkRun","$store","getters","getTutorialRun","getTutorialRunPerPage","localTutorials","forEach","item","indexTutorial","parseInt","dataset","tutorialindex","getBoundingClientRect","tutorialarrow","tutorialwidth","window","sort","a","b","setTimeout","itemRef","hasJoinedProgramById","getProgramJoinedAtById","getProgramById","getOverallProgressProgramById","getDoneCountByProgramId","getNextExerciseByProgramId","getExercisetocompleteCountProgramById","getExercisecompletedCountProgramById","printDeviceError","prefix","error","clickEvent","resetEvent","$analytics","logEvent","toLowerCase","exception","state","showError","$root","$emit","printDeviceErrorOLD","hasretry","click","$airlyn","openPermissionPanel","then","r","JSON","stringify","catch","e","finally","retryBtn","manageMicError","manageCamError","manageMicCamError","swipeEvent","attachSwipeListener","addEventListener","detachSwipeListeners","removeEventListener","retrievePreferenceTutorial","_this2","preferenceConfigure","key","preferenceGet","value","preferenceSet","beforeMount","beforeDestroy","mounted","_this3","dynamicTexts","keys","text","$appConfiguration","getText","style","_local","clientHeight","offsetHeight","EVENT_ABORT","EVENT_PROGRESS","EVENT_START","EVENT_VISIBILITY_CHANGE","props","interval","type","Number","default","timerLength","reverse","Boolean","now","Function","Date","emits","EVENT_END","counting","totalMilliseconds","requestId","endTime","elapsed","totalSeconds","floor","watch","$props","deep","immediate","handler","handleVisibilityChange","beforeUnmount","pause","restart","start","visibilityState","continue","getElapsed","delay","min","init","prev","requestAnimationFrame","step","range","progress","end","cancelAnimationFrame","abort","update","component","_c","_self","staticClass","exerciseSteps","startPercent","doneClass","String","maxPercent","runningPercent","primaryColor","exercisescount","currentExercise","currentPercent","getRotation","_vm","class","attrs","_t","mixins","basepage","components","CountDownItem","beforeRouteLeave","to","from","next","$closeStream","audioLevels","peakLevel","averageLevel","audioInput","bottomsheet","show","uploadProgress","passed","hasWarning","errorMessage","finish","intervals","getExercises","getCurrentExercise","getAudioDevices","exercise","currentUploadProgress","perc","finalPerc","timer","timerRest","getTitle","exitStep","add","retryNoise","setupAll","leaveMe","$refs","noisecountdown","removeAllListeners","stopRecording","audio","audioRecorder","stop","prevStep","clearTimeout","back","nextStep","suffix","$exerciseManager","kindHOLD","sendDataToRest","blob","today","_userID","$auth","user","_id","userId","getMilliseconds","file","File","lastModified","FormData","append","deviceInfo","headers","Authorization","strategy","token","get","timeout","longTaskTimeout","onUploadProgress","loaded","total","$axios","$post","$apiConstants","preNoiseCheck_v2","errorTitle","resultCode","message","leaveBtn","$gtag","$captureException","gotData","buffers","_this4","exportMonoWAV","gotDataNative","base64","mimetype","$base64ToBlob","_this5","recordDataBase64","mimeType","getBuffers","timerChange","timerEnd","countdownrunning","countDownTimer","_this6","initCountDown","startTimer","clear","record","initCountDownNative","_this7","addListener","info","peakPower","averagePower","startRecording","useAGC","initMicrophone","stream","inputPoint","audioContext","createGain","realAudioInput","createMediaStreamSource","connect","disconnect","convertToMono","$Recorder","worker","$worker","createRecorderWorker","input","splitter","createChannelSplitter","merger","createChannelMerger","_this8","navigator","mediaDevices","getSupportedConstraints","AudioContext","$captureMessage","$enumerateMediaDevices","$initAudio","_this9","$deviceInfo","getInfo","setDeviceCode","checkMicPerm","result","scopedSlots","_u","fn","_v","_s","proxy","directives","rawName","expression","domProps","_e","model","callback","$$v","staticStyle","ref","on","installComponents","Exerciseanimationprogress","FullpageCard"],"mappings":"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","file":"4a4fbad.js","sourcesContent":["import {mapGetters, mapActions} from 'vuex'\n\nexport default {\n  name: 'basePage',\n  transition: {\n    name: 'slide',\n    mode: 'out-in',\n    css: false,\n    beforeEnter(el) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime.set(el, {\n        scale: 1,\n        opacity: 0,\n        translateX: startPoint\n      })\n    },\n    enter(el, done) {\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime({\n        targets: el,\n        opacity: [0, 1],\n        translateX: [startPoint, \"0\"],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      })\n    },\n    leave(el, done) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        this.$anime({\n          targets: el,\n          /*opacity: [1, 0],*/\n          translateY: [0, '100%'],\n          duration: 500,\n          easing: 'easeInOutSine',\n          complete: done\n        });\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '100%' : '-100%';\n      this.$anime({\n        targets: el,\n        opacity: [1, 0],\n        translateX: [\"0\", startPoint],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      });\n    },\n    afterLeave(el) {\n      document.querySelector('#__nuxt').classList.remove('quit');\n      document.querySelector('#__nuxt').classList.remove('back');\n    }\n  },\n  data() {\n    return {\n      \"name\": \"basePage\",\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || -1),\n      backto: (this.$route.params.backto || false),\n      hasBack: false,\n      hasNext: false,\n      hasInfo: false,\n      currentTutorial: false,\n      tutorialList: [],\n      tutorialShownHard: false\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getCurrentPagerHeight: 'getCurrentPagerHeight',\n      getTutorialShown: \"getTutorialShown\",\n      getLocalTutorialShown: \"getLocalTutorialShown\",\n    }),\n    isVoicemed() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_')>-1\n    },\n    isAirlyn() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_')<0\n    },\n    nuxtloading() {\n      return $nuxt.$loading.loading\n    },\n    defaultHomeUrl() {\n      //We know that we can customize the opening url:\n      return \"/user/today\";\n      if(this.isAirlyn) {\n        return \"/user/today\";\n      }\n      if(this.isVoicemed) {\n        return \"/home\";\n      }\n    }\n  },\n  methods: {\n    ...mapActions({\n      setCurrentPage: 'setCurrentPage',\n      setCurrentPagerHeight: 'setCurrentPagerHeight',\n      setTutorialRunPerPage: 'setTutorialRunPerPage',\n      setTutorialRun: 'setTutorialRun'\n    }),\n    setTutorialRunLocal() {\n      this.setPreferenceTutorial();\n    },\n\n\n    tutorialClose() {\n      this.$set(this, \"tutorialList\", []);\n      this.setTutorialRunLocal();\n      this.currentTutorial = null;\n    },\n    tutorialHasNext() {\n      const _index = this.currentTutorial.index;\n      const _next = this.tutorialList.find((v) => v.index === _index + 1);\n      if (_next) {\n        return true;\n      }\n      return false\n    },\n    exerciseStepBack() {\n      console.log('exit test', this.backto, this.programid)\n      if (this.backto == 'today') {\n        $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        return\n      }\n      if (this.backto == 'discovery') {\n        $nuxt.$router.replace($nuxt.localePath(\"/home\"));\n        return\n      }\n      if (this.programid) {\n        if (this.programid == \"-1\" || this.programid == -1 || this.programid == \"false\" || this.programid == false) {\n          $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        } else {\n          $nuxt.$router.replace($nuxt.localePath(\"/ml/programs/\" + this.programid));\n        }\n        return\n      }\n\n      $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n    },\n    buildSuffix() {\n      let suffixes = [];\n      const programCheck = this.programid ? this.programid : false;\n      suffixes.push(programCheck!=='-1'?programCheck:false);\n      suffixes.push(this.withindex ? this.withindex : \"-1\")\n      suffixes.push(this.backto ? this.backto : false)\n      return suffixes.join(\"/\")\n    },\n    tutorialNext() {\n      let _index = this.currentTutorial ? this.currentTutorial.index : 0;\n      if (this.currentTutorial) {\n        this.currentTutorial.visible = false;\n        this.setTutorialRunLocal();\n        //this.setTutorialRun({\"page\":this.name,\"index\":this.currentTutorial.index})\n      } else {\n        _index = this.tutorialList[0].index - 1;\n      }\n      const _next = this.tutorialList.find((v) => v.index === _index + 1);\n      if (_next) {\n        //const position = _next.itemRef.getBoundingClientRect()\n        //_next.position = position;\n        this.currentTutorial = _next;\n        const dialogHeight = 200;\n        const dialogOffset = 10;\n        //Ottieni posizione minima di scroll top\n        const itemHeight = dialogHeight + dialogOffset + _next.position.height;\n\n        let scrollTop = _next.position.top > this.appHeight / 2 ?\n          _next.position.top - (dialogHeight + dialogOffset) :\n          _next.position.top - dialogOffset;\n        if (_next.arrowTop) {\n          scrollTop = _next.position.top - (_next.position.height + dialogOffset);\n        }\n        scrollTop = Math.max(0, scrollTop); //Evita che sia inferiore a zero\n        //Verifica se l'elemento da selezionare sta dentro lo scroll:\n        console.warn(\"Nuovo scroll Top:\", scrollTop, this.appHeight, this.footerHeight, _next.position.height)\n        this.$nextTick(() => {\n          document.querySelector(\".indexPage\").scrollTo({\n            top: scrollTop,\n            left: 0,\n            behavior: 'smooth'\n          });\n        })\n        _next.visible = true\n\n      } else {\n        //Close tutorial...\n        this.tutorialClose()\n      }\n    },\n    getTutorialIndex() {\n      if (this.currentTutorial) {\n        if (this.currentTutorial.index > this.tutorialList.length) {\n          return this.tutorialList.length\n        }\n        return this.currentTutorial.index\n      }\n      return \"\"\n    },\n    getTutorialText(tutorial) {\n      return this.$t('tutorials.' + this.name + '.text_' + tutorial.index, {\"title\": tutorial.title})\n    },\n    getTutorialDialogStyle(tutorial) {\n      const _rule = {};\n      const position = tutorial.position; //.itemRef.getBoundingClientRect()\n      let topPosition = position.top;\n      if (this.$capacitor && this.$capacitor.isNativePlatform() && tutorial.updated == false) {\n//        tutorial.position = tutorial.itemRef.getBoundingClientRect();\n        topPosition = position.top; // - document.querySelector(\".indexPage\").scrollTop;\n        tutorial.updated = true;\n        console.warn('apply tutorial offset for mobile phones')\n      }\n      if ((topPosition) > 300) {\n        _rule.top = (topPosition - 200) + \"px\";\n      } else {\n        _rule.top = (topPosition + position.height + 10) + \"px\";\n      }\n      console.warn('DialogStyle for tutorial', tutorial, _rule)\n\n      if (tutorial.width !== 'fill') {\n        _rule.left = \"calc(\" + position.left + \"px - 75vw + \" + position.width + \"px )\";\n      } else {\n        _rule.left = \"0px\";\n        _rule.right = \"0px\";\n      }\n      return Object.entries(_rule).map(([k, v]) => `${k}:${v}`).join(';')\n    },\n    getTutorialStyle(tutorial) {\n      const _rule = {};\n      const position = tutorial.position; //itemRef.getBoundingClientRect()\n      const baseOffset = 8;\n      let topPosition = position.top;\n      if (this.$capacitor && this.$capacitor.isNativePlatform() && tutorial.updated == false) {\n//        tutorial.position = tutorial.itemRef.getBoundingClientRect();\n        topPosition = position.top; // - document.querySelector(\".indexPage\").scrollTop;\n        tutorial.updated = true;\n      }\n      console.warn('Style for tutorial', tutorial, topPosition)\n      if (tutorial.width === 'fill') {\n        _rule.top = (topPosition - (baseOffset / 2)) + \"px\";\n        _rule.left = \"0px\";\n        _rule.right = \"0px\";\n        _rule.height = (position.height + baseOffset) + \"px\";\n      } else {\n        _rule.top = (topPosition - (baseOffset / 2)) + \"px\";\n        _rule.left = (position.left - (baseOffset / 2)) + \"px\";\n        _rule.right = \"0px\";\n        _rule.height = (position.height + baseOffset) + \"px\";\n        _rule.width = (position.width + baseOffset) + \"px\";\n      }\n\n      return Object.entries(_rule).map(([k, v]) => `${k}:${v}`).join(';')\n    },\n    initTutorial() {\n      const _tutorialCards = [...document.querySelectorAll('.hastutorial')];\n      //Se tutorial mai mostrator\n      let _checkRun = false;\n      if (this.$capacitor && this.$capacitor.isNativePlatform()) {\n        _checkRun = this.tutorialShownHard; //Forza il valore in fase di init.\n      } else {\n        this.tutorialShownHard =this.$nuxt.$store.getters.getTutorialRun(this.name);\n        _checkRun = this.$nuxt.$store.getters.getTutorialRunPerPage(this.name);\n      }\n      if (typeof this.getTutorialShown[this.name] !== 'undefined' || _checkRun || this.tutorialShownHard) {\n        console.warn(\"hide tutorial, not needed at this round\");\n        return;\n      }\n      this.$set(this, 'tutorialList', []);\n      if (_tutorialCards.length > 0) {\n        document.querySelector(\".indexPage\").scrollTo({\n          top: 0,\n          left: 0,\n          behavior: 'smooth'\n        });\n        const localTutorials = this.getLocalTutorialShown;\n        console.warn(\"got local tutorials\", localTutorials)\n        _tutorialCards.forEach((item) => {\n          const indexTutorial = parseInt(item.dataset.tutorialindex)\n          if (typeof localTutorials[this.name + \"_\" + indexTutorial] === 'undefined') {\n            const position = item.getBoundingClientRect();\n            this.tutorialList.push({\n              \"position\": position,\n              'visible': false,\n              'itemRef': item,\n              'updated': false,\n              'arrowTop': item.dataset.tutorialarrow == \"top\",\n              \"title\": item.dataset.tutorial,\n              \"width\": item.dataset.tutorialwidth,\n              \"index\": indexTutorial\n            })\n          }\n        })\n        window.tutorialList = this.tutorialList;\n      }\n\n      if (this.tutorialList.length > 0) {\n        this.tutorialList = this.tutorialList.sort((a, b) => {\n          if (a.index > b.index) {\n            return 1;\n          }\n          if (b.index > a.index) {\n            return -1;\n          }\n          return 0;\n        })\n      }\n      if (this.tutorialList.length > 0) {\n        this.currentTutorial = 0;\n        this.$nextTick(() => {\n          setTimeout(() => {\n            //wait 200 ms to start first tutorial.\n            /*Fill all tutorial positions*/\n            this.tutorialList.forEach((item) => {\n              item.position = item.itemRef.getBoundingClientRect();\n            })\n            this.tutorialNext();\n            this.setTutorialRunPerPage(this.name);\n          }, 200);\n        })\n      }\n\n    },\n    hasJoinedProgramById(id) {\n      return this.$nuxt.$store.getters.hasJoinedProgramById(id)\n    },\n    getProgramJoinedAtById(id) {\n      return this.$nuxt.$store.getters.getProgramJoinedAtById(id)\n    },\n    getProgramById(id) {\n      return this.$nuxt.$store.getters.getProgramById(id)\n    },\n    getOverallProgressProgramById(id) {\n      return this.$nuxt.$store.getters.getOverallProgressProgramById(id)\n    },\n    getDoneCountByProgramId(id) {\n      return this.$nuxt.$store.getters.getDoneCountByProgramId(id)\n    },\n    getNextExerciseByProgramId(id) {\n      return this.$nuxt.$store.getters.getNextExerciseByProgramId(id)\n    },\n    getExercisetocompleteCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisetocompleteCountProgramById(id)\n    },\n    getExercisecompletedCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisecompletedCountProgramById(id)\n    },\n    printDeviceError(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\" || error.exception.state == \"denied\" || error.exception.state == \"DENIED\")) {\n        this.$root.$emit('showPermssionError', true)\n        return\n      }\n\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    printDeviceErrorOLD(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error.exception && prefix == \"mic\") {\n        if (error.exception.state == \"denied\" || error.exception.state == \"DENIED\") {\n          error.name = \"DeniedError\";\n          this.$root.$emit('showError', {\n            title: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n            error: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n            hasretry: true,\n            click: function () {\n              $nuxt.$airlyn.openPermissionPanel().then((r) => {\n                console.log('got openPermission Panel then', r, JSON.stringify(r))\n              }).catch((e) => {\n                console.log('got openPermission Panel catch', e, JSON.stringify(e))\n              }).finally(() => {\n                //esegui comunque il reset event...\n                if (typeof resetEvent == 'function') {\n                  console.log('dopo il setting riport cmq a inizio')\n                  resetEvent()\n                }\n              })\n              return true\n            },\n            resetEvent: resetEvent || function () {\n            },\n            retryBtn: \"Settings\"\n          });\n          return\n        }\n      }\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\")) {\n        //Permission error\n        this.showError(\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n          clickEvent,\n          resetEvent\n        );\n        return\n      }\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    manageMicError(e, clickEvent, resetEvent) {\n      this.printDeviceError('mic', e, clickEvent, resetEvent);\n    },\n    manageCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('cam', e, clickEvent, resetEvent);\n    },\n    manageMicCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('miccam', e, clickEvent, resetEvent);\n    },\n    showError(title, error, clickEvent, resetEvent) {\n      this.$root.$emit('showError', {\n        title: title,\n        error: error,\n        hasretry: clickEvent !== null ? true : false,\n        click: clickEvent || function () {\n        },\n        resetEvent: resetEvent || function () {\n        }\n      });\n    },\n    swipeEvent(e) {\n      //console.log(e.target); // element that was swiped\n      //console.log(e.detail); // see event data below\n      this.$root.$emit(\"swipe\", e);\n    },\n    attachSwipeListener() {\n      document.addEventListener('swiped-left', this.swipeEvent);\n      document.addEventListener('swiped-right', this.swipeEvent);\n    },\n    detachSwipeListeners() {\n      document.removeEventListener('swiped-left', this.swipeEvent);\n      document.removeEventListener('swiped-right', this.swipeEvent);\n    },\n    retrievePreferenceTutorial() {\n      if (this.$capacitor && this.$capacitor.isNativePlatform()) {\n        this.$airlyn.preferenceConfigure({'group': 'airlyn'}).finally(() => {\n          console.log('preferences ready');\n          const key = \"tutorial_\" + this.name;\n          this.$airlyn.preferenceGet({'key': key}).then((r) => {\n            console.log('preference read (' + key + ')!', r);\n            if (r && r.value && (r.value === 1 || r.value == '1')) {\n              console.log('got preference Tutorial SEEN for', key, r.value);\n              this.tutorialShownHard = true;\n            }\n          })\n        })\n      }\n    },\n    setPreferenceTutorial() {\n      if (this.$capacitor && this.$capacitor.isNativePlatform()) {\n        const key = \"tutorial_\" + this.name;\n        this.$airlyn.preferenceSet({'key': key, 'value': \"1\"}).finally(() => {\n          console.log('preference stored for!', key);\n        })\n      }\n      this.setTutorialRun({\"page\": this.name, \"index\": this.currentTutorial.index})\n      this.tutorialShownHard = true;\n    }\n  },\n  beforeMount() {\n    console.log('PRE loaded base Page')\n    this.setCurrentPage(this);\n  },\n  beforeDestroy() {\n    this.detachSwipeListeners();\n  },\n  mounted() {\n    console.log('loaded base Page')\n    this.tutorialShownHard = false;\n    //Init Preferences if app is native:\n    this.retrievePreferenceTutorial()\n    console.log('try Load index', this.name, this.dynamicTexts);\n    if (this.dynamicTexts && Object.keys(this.dynamicTexts).length > 0) {\n      Object.keys(this.dynamicTexts).map((text) => {\n        this.$appConfiguration.getText(text).then((r) => {\n          this.dynamicTexts[text] = r;\n        }).catch((e) => {\n          this.dynamicTexts[text] = this.$t(this.name + '.' + text);\n        })\n      })\n    }\n    if (this.getCurrentPagerHeight !== null && document.querySelector('.v-main__wrap > div.pager')) {\n      document.querySelector('.v-main__wrap > div.pager').style.height = this.getCurrentPagerHeight + \"px\";\n    }\n    this.$nextTick(() => {\n      //check tutorial by Name: const localTutorials = this.getLocalTutorialShown;\n      if (this.$capacitor && this.$capacitor.isNativePlatform()) {\n        console.log('Richiesto al passaggio precedente');\n      } else {\n        const _local = this.getLocalTutorialShown;\n        if (_local && typeof _local[this.name] !== 'undefined') {\n          this.tutorialShownHard = true;\n        } else {\n          this.tutorialShownHard = false;\n        }\n\n      }\n\n      //Start swipe features:\n      this.attachSwipeListener();\n      if (this.getCurrentPagerHeight === null) {\n        if (document.querySelector('.v-main__wrap > div.pager')) {\n          this.setCurrentPagerHeight(Math.max(document.querySelector('.v-main__wrap > div.pager').clientHeight, document.querySelector('.v-main__wrap > div.pager').offsetHeight));\n        }\n      }\n    });\n  }\n\n}\n","\nconst MILLISECONDS_SECOND = 1000;\nconst EVENT_ABORT = 'abort';\nconst EVENT_END = 'end';\nconst EVENT_PROGRESS = 'progress';\nconst EVENT_START = 'start';\nconst EVENT_VISIBILITY_CHANGE = 'visibilitychange';\n\nexport default {\n  name: \"CountDown\",\n  props: {\n    interval: {\n      type: Number,\n      default: 1000\n    },\n    timerLength: {\n      type: Number,\n      default: 10000\n    },\n    reverse: {\n      type: Boolean,\n      default: false\n    },\n    now: {\n      type: Function,\n      default: () => Date.now(),\n    },\n    emits: {\n      EVENT_ABORT,\n      EVENT_END,\n      EVENT_PROGRESS,\n      EVENT_START\n    }\n  },\n  data() {\n    return {\n      counting: false,\n      totalMilliseconds: 0,\n      requestId: 0,\n      endTime: 0,\n      elapsed: 0\n    }\n  },\n  computed: {\n    totalSeconds() {\n      return Math.floor(this.totalMilliseconds / MILLISECONDS_SECOND);\n    }\n  },\n  watch: {\n    $props: {\n      deep: true,\n      immediate: true,\n      handler() {\n        this.totalMilliseconds = this.timerLength;\n        this.endTime = this.now() + this.timerLength;\n        //this.start();\n      }\n    },\n  },\n  mounted() {\n    document.addEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n  },\n\n  beforeUnmount() {\n    document.removeEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n    this.pause();\n  },\n  methods: {\n    restart() {\n      this.totalMilliseconds = this.timerLength;\n      this.endTime = this.now() + this.timerLength;\n      this.elapsed = 0;\n      this.start();\n    },\n    start() {\n      if (this.counting) {\n        return;\n      }\n      this.counting = true;\n      this.$emit(EVENT_START);\n      if (document.visibilityState === 'visible') {\n        this.continue();\n      }\n    },\n    getElapsed() {\n      return this.elapsed;\n    },\n    continue() {\n      if (!this.counting) {\n        return;\n      }\n      const delay = Math.min(this.totalMilliseconds, this.interval);\n      if (delay > 0) {\n        let init;\n        let prev;\n        const step = (now) => {\n          if (!init) {\n            init = now;\n          }\n          if (!prev) {\n            prev = now;\n          }\n          const range = now - init;\n          if (range >= delay || range + ((now - prev) / 2) >= delay) {\n            this.progress();\n          } else {\n            this.requestId = requestAnimationFrame(step);\n          }\n          prev = now;\n        };\n        this.requestId = requestAnimationFrame(step);\n      } else {\n        this.end();\n      }\n    },\n    pause() {\n      cancelAnimationFrame(this.requestId);\n    },\n    progress() {\n      if (!this.counting) {\n        return;\n      }\n      this.totalMilliseconds -= this.interval;\n      this.elapsed += this.interval;\n      if (this.totalMilliseconds > 0) {\n        this.$emit(EVENT_PROGRESS, {\n          totalSeconds: this.totalSeconds,\n          totalMilliseconds: this.totalMilliseconds,\n          interval: this.interval,\n          elapsed: this.elapsed\n        });\n      }\n      this.continue();\n    },\n    abort() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_ABORT);\n    },\n    end() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_END, {\n        totalSeconds: this.totalSeconds,\n        totalMilliseconds: this.totalMilliseconds,\n        interval: this.interval,\n        elapsed: this.elapsed\n      });\n      this.totalMilliseconds = 0;\n    },\n    update() {\n      if (this.counting) {\n        this.totalMilliseconds = Math.max(0, this.endTime - this.now());\n      }\n    },\n    handleVisibilityChange() {\n      switch (document.visibilityState) {\n        case 'visible':\n          this.update();\n          this.continue();\n          break;\n        case 'hidden':\n          this.pause();\n          break;\n        default:\n      }\n    }\n  }\n\n\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./countdown.vue?vue&type=template&id=e4d0548a\"\nimport script from \"./countdown.vue?vue&type=script&lang=js\"\nexport * from \"./countdown.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n  export default {\n    props: {\n      value : {\n        type:Number,\n        default:0\n      },\n      exerciseSteps:{\n        type:Number,\n        default:1\n      },\n      startPercent: {\n        type:Number,\n        default: 0\n      },\n      doneClass: {\n        type:String,\n        default:'done'\n      },\n      maxPercent : {\n        type:Number,\n        default: 1\n      },\n      runningPercent: {\n        type:Number,\n        default: 0\n      }\n    },\n    computed : {\n      primaryColor() {\n        return $nuxt.$config.env.environment.indexOf('voicemed_')>-1?\"#EC483F\":\"#848CE6\";\n      },\n      exercisescount() {\n        return this.exerciseSteps\n      },\n      currentExercise() {\n        return this.value\n      },\n      currentPercent() {\n        return this.runningPercent\n      }\n    },\n    methods: {\n      getRotation(index) {\n        if(index === 0) {\n          return \"transform:rotate(0deg);\";\n        }\n        //Get deg for position\n        const angles = 360/(this.exercisescount)*(index);\n        return \"transform:rotate(\"+angles+\"deg);\";\n      },\n    }\n  }\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./exerciseanimationprogress.vue?vue&type=template&id=106df5ae\"\nimport script from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\nexport * from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport basepage from \"~/mixins.js/basepage\";\nimport CountDownItem from \"~/components/countdown\";\nimport {mapGetters} from 'vuex'\n\nconst timerMax = 5;\n\nexport default {\n  name: 'ml_start',\n  mixins: [basepage],\n  components: {\n    CountDownItem\n  },\n  beforeRouteLeave(to, from, next) {\n    document.querySelector('.nextvm').classList.remove('pumpAnimation');\n    this.$closeStream();\n    next();\n  },\n  data() {\n    return {\n      audioLevels: {\n        peakLevel: 0,\n        averageLevel: 0\n      },\n      audioInput: {},\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || false),\n      backto: (this.$route.params.backto || false),\n      \"name\": \"ml_start\",\n      \"deviceInfo\": \"\",\n      \"hasBack\": true,\n      \"hasNext\": true,\n      \"timer\": 0,\n      \"countdownrunning\": false,\n      \"startTimer\": false,\n      'audio': {\n        \"audioContext\": null,\n        \"audioInput\": null,\n        \"realAudioInput\": null,\n        \"inputPoint\": null,\n        \"audioRecorder\": null,\n        \"stereo\": false\n      },\n      bottomsheet: {\n        show: false\n      },\n      uploadProgress: 0,\n      passed: false,\n      hasWarning: false,\n      errorMessage: \"\",\n      loading: false,\n      finish: false,\n      intervals: []\n\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getExercises: 'getExercises',\n      getCurrentExercise: 'getCurrentExercise',\n      getAudioDevices: 'getAudioDevices'\n    }),\n    exercise() {\n      return this.getCurrentExercise\n    },\n\n    currentUploadProgress: function () {\n      const perc = (this.uploadProgress) * 100;\n      if (perc > 100) {\n        return 100;\n      }\n      return perc;\n    },\n    currentPercent() {\n      const perc = ((this.timer / this.timerLength) * 100) * 75 / 100;\n      const updPerc = this.currentUploadProgress * 25 / 100;\n      const finalPerc = perc + updPerc\n      if (finalPerc > 100) {\n        return 100;\n      }\n      return finalPerc;\n    },\n    timerLength() {\n      return timerMax\n    },\n    timerRest() {\n      return timerMax - this.timer\n    },\n    getTitle() {\n      let _title = this.$t(this.name + '.title')\n      return _title.replace(\"%s\", this.timer);\n    }\n  },\n  methods: {\n    exitStep() {\n      if (document.querySelector('#__nuxt')) {\n        document.querySelector('#__nuxt').classList.add('quit');\n      }\n      this.exerciseStepBack()\n    },\n    retryNoise() {\n      this.bottomsheet.show = false;\n      this.setupAll();\n      return true;\n    },\n    leaveMe() {\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        $nuxt.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          if (document.querySelector('#__nuxt')) {\n            document.querySelector('#__nuxt').classList.add('quit');\n          }\n          this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        if (document.querySelector('#__nuxt')) {\n          document.querySelector('#__nuxt').classList.add('quit');\n        }\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n      }\n\n    },\n    prevStep() {\n      this.intervals.map((interval) => {\n        try {\n          clearTimeout(interval)\n        } catch (e) {\n        }\n      })\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          this.$router.back();\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        this.$router.back();\n      }\n\n\n    },\n    nextStep() {\n      let suffix = this.buildSuffix();\n      if(suffix.length>0) {\n        suffix = \"/\" + suffix\n      }\n      if (this.exercise.type === this.$exerciseManager.kindHOLD) {\n\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runnersilent\" + suffix));\n      } else {\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runner\" + suffix));\n      }\n    },\n    sendDataToRest(blob) {\n      /*\n            var url = (window.URL || window.webkitURL).createObjectURL(blob);\n            var link = document.getElementById(\"downloader\");\n            link.href = url;\n            link.download = 'output_noise.wav';\n            link.click();\n      */\n      this.passed = false;\n      this.loading = true;\n      this.$nuxt.$loading.start()\n      //Axios send rest API...\n      const today = new Date();\n      const _userID = this.$auth.user ? (this.$auth.user._id || this.$auth.user.userId) : today.getMilliseconds();\n      const fileName = 'soundcheck_' + _userID + '.wav'\n\n      const file = new File([blob], fileName, {type: 'audio/x-wav', lastModified: Date.now()})\n      const params = new FormData();\n      params.append('audio', file, file.name);\n      params.append('device_code', this.deviceInfo)\n      if (this.audioInput) {\n        params.append('device_info', JSON.stringify(this.audioInput));\n      }\n      const headers = {\n        Authorization: this.$auth.strategy.token.get(),\n        timeout: this.$exerciseManager.longTaskTimeout,\n        onUploadProgress: (progress) => {\n          this.uploadProgress = progress.loaded / progress.total;\n        }\n      }\n      this.$axios.$post($nuxt.$apiConstants.preNoiseCheck_v2,\n        params,\n        headers,\n      ).then((r) => {\n        console.log('noiseCheck result', r)\n        this.uploadProgress = 1;\n        this.passed = false;\n        this.hasWarning = false;\n        this.errorMessage = \"\";\n        let errorTitle = \"\";\n        let errorMessage = \"\";\n\n        if (r && r.resultCode) {\n          /*\n          QUIET_STATUS_CODE = 308\n          QUIET_MSG = 'Wonderful! Your recording environment sounds extremely quiet.'\n\n          MODERATE_STATUS_CODE = 309\n          MODERATE_MSG = 'Not bad! But your recording environment sounds like is becoming noisy, be careful.'\n\n          NOISY_STATUS_CODE = 310\n          NOISY_MSG = 'Too noisy! It\\'s better for you to change the environment. Try also to close doors and windows.'\n          Se l'analisi è andata a buon fine, altrimenti uno di questi:\n          NO_SIGNAL_ERROR_CODE = 301\n          NO_SIGNAL_MSG = 'No signal was detected.'\n\n          EMPTY_FILE_ERROR_CODE = 307\n          EMPTY_FILE_MSG = 'Your recording is empty! Please contact the assistance.'\n           */\n          if(r.resultCode>310) {\n            this.passed = true;\n          } else if(r.resultCode>307) {\n            this.passed = true;\n            this.hasWarning = true;\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          } else {\n            this.passed = false;\n            errorTitle = this.$t('errors.noise.title');\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          }\n        } else {\n          this.passed = false;\n          errorTitle = this.$t('errors.noise.title');\n          errorMessage = this.$t('errors.noise.description');\n        }\n        if (this.passed === false) {\n          this.$root.$emit('showError', {\n            hasretry: true,\n            title: errorTitle,\n            error: errorMessage,\n            leaveBtn: this.$t('generic.startanyway'),\n            click: () => {\n              this.setupAll();\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseReCheck',\n                'event_category': 'Exercises',\n              })\n              return true;\n            },\n            resetEvent: () => {\n              this.passed = true;\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseStartAnyWay',\n                'event_category': 'Exercises',\n              })\n              //this.$root.$emit('nextstep');\n              this.bottomsheet.show = true;\n              return true;\n            }\n          });\n        }\n      }).catch((e) => {\n        console.log('noiseCheck error', e)\n        console.error(\"Errore invio api [pre_noise_check]:\", e);\n        this.$analytics.logEvent(\"error\", {\n          \"title\":'noise check error'\n        });\n        this.$captureException(e);\n        this.$root.$emit('showError', {\n          hasretry: false,\n          title: \"An error has occurred\",\n          error: \"Sorry an issue with the VoiceServer has occurred\",\n          click: () => {\n            this.setupAll();\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseReCheck',\n              'event_category': 'Exercises',\n            })\n            return true;\n          },\n          resetEvent: () => {\n            this.passed = true;\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseStartAnyWay',\n              'event_category': 'Exercises',\n            })\n            //this.$root.$emit('nextstep');\n            this.bottomsheet.show = true;\n            return true;\n          }\n        });\n      }).finally(() => {\n        if (this.passed) {\n          //this.$root.$emit('nextstep'); > non emettere il next step.\n          this.$root.$emit('disableNext', false);\n          this.$nextTick(() => {\n            document.querySelector('.nextvm').classList.add('pumpAnimation')\n          });\n        }\n        this.loading = false;\n        this.finish = true;\n        this.$nuxt.$loading.finish();\n      });\n    },\n    gotData(buffers) {\n      console.log('got buffers');\n      this.$nuxt.$loading.finish();\n      this.audio.audioRecorder.exportMonoWAV((blob) => {\n        this.$closeStream(); //Ferma gli stream di registrazione non servono più\n        this.sendDataToRest(blob)\n      });\n    },\n    gotDataNative(base64, mimetype) {\n      console.log('ready to store file for sending...', mimetype);\n      const blob = this.$base64ToBlob(base64, mimetype);\n      this.sendDataToRest(blob)\n    },\n    stopRecording() {\n\n      this.$nuxt.$loading.start();\n      this.loading = true;\n      if (this.$capacitor.isNativePlatform()) {\n        console.log('request stop recording!')\n        this.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().then((r) => {\n          if (r && r.value) {\n            this.gotDataNative(r.value.recordDataBase64, r.value.mimeType);\n          } else {\n            console.error('(catch)Errore stop :', e);\n            this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n              this.exitStep()\n              return true;\n            });\n          }\n        }).catch((e) => {\n          console.error('(catch)Errore stop :', e);\n          this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }).finally(() => {\n          this.$nuxt.$loading.finish();\n        })\n      } else {\n        console.log('request stop web')\n        this.audio.audioRecorder.stop();\n        console.log('retrieve buffers')\n        this.audio.audioRecorder.getBuffers(this.gotData);\n      }\n    },\n    timerChange(progress) {\n      this.timer = this.timerLength - progress.totalSeconds;\n    },\n    timerEnd() {\n      console.log('timer finito, ', this.timer);\n      this.countdownrunning = false;\n      this.loading = true;\n      this.stopRecording();\n    },\n    countDownTimer() {\n      if (this.countdownrunning === false) {\n        this.intervals.push(setTimeout(() => {\n          this.$nextTick(() => {\n            console.log('avvia tutto');\n            this.countdownrunning = true;\n            console.log(this.$refs);\n            this.$refs.noisecountdown.restart();\n          });\n        }, 1000));\n        return;\n      }\n    },\n    initCountDown() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      this.countDownTimer();\n    },\n    initCountDownNative() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      $nuxt.$airlyn.addListener('airlynUpdateMeters', (info) => {\n//console.log('got meters',/*info.peakPowers, */ $nuxt.$normalizeLevels(info.peakPowers));\n        //console.log('got meters', info);\n        if (info) {\n          if (info.peakPower) {\n            this.audioLevels.peakLevel = info.peakPower\n          }\n          if (info.averagePower) {\n            this.audioLevels.averageLevel = info.averagePower\n          }\n        }\n\n      });\n      $nuxt.$airlyn.addListener('airlynUpdateMic', (info) => {\n        console.log('got mic INFO', info);\n        this.audioInput = info;\n      });\n\n      this.$airlyn.startRecording({useAGC: true}).then((r) => {\n        console.log('start recording...', r);\n        if (r && r.value === true) {\n          this.countDownTimer();\n        } else {\n          console.error('(then)Errore start :', r);\n          this.manageMicError({\"name\": \"Cannot start Recording\"}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error('(catch)Errore start :', e);\n        this.manageMicError({\"name\": \"Cannot start Recording\", error: e}, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n\n    },\n    initMicrophone(stream) {\n      this.audio.inputPoint = this.audio.audioContext.createGain();\n      this.audio.realAudioInput = this.audio.audioContext.createMediaStreamSource(stream);\n      this.audio.audioInput = this.audio.realAudioInput;\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.realAudioInput.disconnect();\n      this.audio.audioInput = this.convertToMono(this.audio.realAudioInput);\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.audioRecorder = new this.$Recorder(this.audio.inputPoint, {worker: this.$worker.createRecorderWorker()});\n\n      /*\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      */\n      this.initCountDown()\n    },\n    convertToMono(input) {\n      var splitter = this.audio.audioContext.createChannelSplitter(2);\n      var merger = this.audio.audioContext.createChannelMerger(2);\n      input.connect(splitter);\n      splitter.connect(merger, 0, 0);\n      splitter.connect(merger, 0, 1);\n      return merger;\n    },\n    setupAll() {\n      this.loading = false;\n      this.finish = false;\n      this.$closeStream();\n      if (this.$capacitor.isNativePlatform()) {\n        this.timer = 0\n        this.countdownrunning = false;\n        this.initCountDownNative();\n      } else {\n        let message = [];\n        console.log(JSON.stringify(this.getAudioDevices));\n        console.log(navigator.mediaDevices.getSupportedConstraints());\n        message.push(\"Ready to record Audio\");\n        message.push(JSON.stringify(this.getAudioDevices));\n        message.push(\"Supported Constraints:\");\n        message.push(JSON.stringify(navigator.mediaDevices.getSupportedConstraints()));\n        if (null == this.audio.audioContext) {\n          this.audio.audioContext = new AudioContext();\n        }\n        this.$captureMessage(message.join(\"\\n \"));\n        //Debug mode - enumerate device and store info on Sentry:\n        this.$enumerateMediaDevices().then((mediaDevices) => {\n          console.log('got devices', mediaDevices);\n          return this.$initAudio(mediaDevices).then((stream) => {\n            console.log(stream);\n            window.stream = stream;\n            if (null == this.audio.audioContext) {\n              this.audio.audioContext = new AudioContext();\n            }\n            this.timer = 0\n            this.countdownrunning = false;\n            this.initMicrophone(stream)\n          });\n        }).catch((e) => {\n          console.error('errore init microfono non gestito', e);\n          this.$captureException(e);\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n\n        })\n      }\n    }\n  },\n  mounted() {\n    this.$root.$emit('showPager', {\"show\": true});\n    this.$deviceInfo.getInfo().then((r) => {\n      this.deviceInfo = r;\n      this.$exerciseManager.setDeviceCode(r);\n    });\n    if (this.$capacitor.isNativePlatform()) {\n      this.$closeStream();\n      this.$airlyn.checkMicPerm().then((r) => {\n        console.log('Permessi al microfono garantiti?', r, JSON.stringify(r));\n        if (r && r.result === true) {\n          console.log('permessi OK!');\n        } else {\n          const e = {\n            \"name\": \"NotAllowedError\",\n            exception: r\n          }\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error(\"Permission request fails\", e)\n        this.manageMicError({\n          \"name\": \"NotAllowedError\",\n          exception: e\n        }, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n    }\n    this.$nextTick(() => {\n      this.$root.$emit('showPager', {\"show\": true});\n      this.$root.$emit('setNextText', this.$t('generic.start_chevron'));\n      this.$root.$emit('disableNext', true);\n    })\n    this.intervals.push(setTimeout(() => {\n      this.$nextTick(() => {\n        this.setupAll();\n      });\n    }, 700));\n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./noise.vue?vue&type=template&id=2dff977e\"\nimport script from \"./noise.vue?vue&type=script&lang=js\"\nexport * from \"./noise.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Exerciseanimationprogress: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/exerciseanimationprogress.vue').default,FullpageCard: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/fullpage-card.vue').default})\n"],"sourceRoot":""}