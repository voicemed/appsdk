{"version":3,"sources":["webpack:///./mixins.js/basepage.js","webpack:///./components/countdown.vue","webpack:///./components/countdown.vue?cd31","webpack:///./components/countdown.vue?6c73","webpack:///./components/exerciseanimationprogress.vue","webpack:///./components/exerciseanimationprogress.vue?fb08","webpack:///./components/exerciseanimationprogress.vue?ee9d","webpack:///./pages/ml/exerciseexecutor/noise.vue","webpack:///./pages/ml/exerciseexecutor/noise.vue?3ff5","webpack:///./pages/ml/exerciseexecutor/noise.vue?d6f8"],"names":["name","transition","mode","css","beforeEnter","el","document","querySelector","classList","contains","startPoint","this","$anime","set","scale","opacity","translateX","enter","done","targets","duration","easing","complete","leave","translateY","afterLeave","remove","data","exid","$route","params","id","programid","fromprogram","withindex","backto","hasBack","hasNext","hasInfo","computed","_objectSpread","mapGetters","getCurrentPagerHeight","isVoicemed","$nuxt","$config","env","environment","indexOf","isAirlyn","nuxtloading","$loading","loading","defaultHomeUrl","methods","mapActions","setCurrentPage","setCurrentPagerHeight","exerciseStepBack","console","log","$airlyn","finishExercise","finally","closeExercise","$router","replace","localePath","buildSuffix","suffixes","programCheck","push","join","hasJoinedProgramById","$store","getters","getProgramJoinedAtById","getProgramById","getOverallProgressProgramById","getDoneCountByProgramId","getNextExerciseByProgramId","getExercisetocompleteCountProgramById","getExercisecompletedCountProgramById","printDeviceError","prefix","error","clickEvent","resetEvent","$analytics","logEvent","toLowerCase","exception","state","showError","$t","$root","$emit","printDeviceErrorOLD","title","hasretry","click","openPermissionPanel","then","r","JSON","stringify","catch","e","retryBtn","manageMicError","manageCamError","manageMicCamError","swipeEvent","attachSwipeListener","addEventListener","detachSwipeListeners","removeEventListener","fixWindowVariables","variable","window","top","beforeMount","_this","forEach","item","beforeDestroy","mounted","_this2","dynamicTexts","Object","keys","length","map","text","$appConfiguration","getText","style","height","$nextTick","Math","max","clientHeight","offsetHeight","EVENT_ABORT","EVENT_PROGRESS","EVENT_START","EVENT_VISIBILITY_CHANGE","props","interval","type","Number","default","timerLength","reverse","Boolean","now","Function","Date","emits","EVENT_END","counting","totalMilliseconds","requestId","endTime","elapsed","totalSeconds","floor","watch","$props","deep","immediate","handler","handleVisibilityChange","beforeUnmount","pause","restart","start","visibilityState","continue","getElapsed","delay","min","init","prev","requestAnimationFrame","step","range","progress","end","cancelAnimationFrame","abort","update","component","_c","_self","staticClass","value","exerciseSteps","startPercent","doneClass","String","maxPercent","runningPercent","primaryColor","exercisescount","currentExercise","currentPercent","getRotation","index","_vm","class","attrs","_t","mixins","basepage","components","CountDownItem","beforeRouteLeave","to","from","next","$closeStream","audioLevels","peakLevel","averageLevel","audioInput","bottomsheet","show","uploadProgress","passed","hasWarning","errorMessage","finish","intervals","getExercises","getCurrentExercise","getAudioDevices","exercise","currentUploadProgress","perc","finalPerc","timer","timerRest","getTitle","exitStep","add","retryNoise","setupAll","leaveMe","$refs","noisecountdown","$capacitor","isNativePlatform","removeAllListeners","stopRecording","audio","audioRecorder","stop","prevStep","clearTimeout","back","nextStep","suffix","$exerciseManager","kindHOLD","sendDataToRest","blob","_this3","today","_userID","$auth","user","_id","userId","getMilliseconds","file","File","lastModified","FormData","append","deviceInfo","headers","Authorization","currentVMToken","timeout","longTaskTimeout","onUploadProgress","loaded","total","$axios","$post","$apiConstants","preNoiseCheck_v2","errorTitle","resultCode","message","leaveBtn","$gtag","$captureException","gotData","buffers","_this4","exportMonoWAV","gotDataNative","base64","mimetype","$base64ToBlob","_this5","recordDataBase64","mimeType","getBuffers","timerChange","timerEnd","countdownrunning","countDownTimer","_this6","setTimeout","initCountDown","startTimer","clear","record","initCountDownNative","_this7","addListener","info","peakPower","averagePower","startRecording","useAGC","initMicrophone","stream","inputPoint","audioContext","createGain","realAudioInput","createMediaStreamSource","connect","disconnect","convertToMono","$Recorder","worker","$worker","createRecorderWorker","input","splitter","createChannelSplitter","merger","createChannelMerger","_this8","navigator","mediaDevices","getSupportedConstraints","AudioContext","$captureMessage","$enumerateMediaDevices","$initAudio","_this9","$deviceInfo","getInfo","setDeviceCode","checkMicPerm","result","scopedSlots","_u","key","fn","_v","_s","proxy","directives","rawName","expression","domProps","_e","model","callback","$$v","staticStyle","ref","on","$set","installComponents","Exerciseanimationprogress","FullpageCard"],"mappings":"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","file":"b56ee48.js","sourcesContent":["import {mapGetters, mapActions} from 'vuex'\n\nexport default {\n  name: 'basePage',\n  transition: {\n    name: 'slide',\n    mode: 'out-in',\n    css: false,\n    beforeEnter(el) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime.set(el, {\n        scale: 1,\n        opacity: 0,\n        translateX: startPoint\n      })\n    },\n    enter(el, done) {\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime({\n        targets: el,\n        opacity: [0, 1],\n        translateX: [startPoint, \"0\"],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      })\n    },\n    leave(el, done) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        this.$anime({\n          targets: el,\n          /*opacity: [1, 0],*/\n          translateY: [0, '100%'],\n          duration: 500,\n          easing: 'easeInOutSine',\n          complete: done\n        });\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '100%' : '-100%';\n      this.$anime({\n        targets: el,\n        opacity: [1, 0],\n        translateX: [\"0\", startPoint],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      });\n    },\n    afterLeave(el) {\n      document.querySelector('#__nuxt').classList.remove('quit');\n      document.querySelector('#__nuxt').classList.remove('back');\n    }\n  },\n  data() {\n    return {\n      \"name\": \"basePage\",\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || -1),\n      backto: (this.$route.params.backto || false),\n      hasBack: false,\n      hasNext: false,\n      hasInfo: false\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getCurrentPagerHeight: 'getCurrentPagerHeight'\n    }),\n    isVoicemed() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_') > -1\n    },\n    isAirlyn() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_') < 0\n    },\n    nuxtloading() {\n      return $nuxt.$loading.loading\n    },\n    defaultHomeUrl() {\n      //We know that we can customize the opening url:\n      return \"/\";\n      if (this.isAirlyn) {\n        return \"/\";\n      }\n      if (this.isVoicemed) {\n        return \"/\";\n      }\n    }\n  },\n  methods: {\n    ...mapActions({\n      setCurrentPage: 'setCurrentPage',\n      setCurrentPagerHeight: 'setCurrentPagerHeight'\n    }),\n    exerciseStepBack() {\n      console.log('exit test', this.backto, this.programid)\n      if (this.backto == \"standalone\") {\n        $nuxt.$airlyn.finishExercise({\"reason\": 'user-cancelled', \"result\": {}}).finally(() => {\n          console.log('exercise finished by user')\n        });\n        $nuxt.$airlyn.closeExercise().finally(() => {\n          console.log('exercise closed, success')\n        });\n        return\n      }\n      if (this.backto == 'today') {\n        $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        return\n      }\n      if (this.backto == 'discovery') {\n        $nuxt.$router.replace($nuxt.localePath(\"/home\"));\n        return\n      }\n      if (this.programid) {\n        if (this.programid == \"-1\" || this.programid == -1 || this.programid == \"false\" || this.programid == false) {\n          $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        } else {\n          $nuxt.$router.replace($nuxt.localePath(\"/ml/programs/\" + this.programid));\n        }\n        return\n      }\n\n      $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n    },\n    buildSuffix() {\n      let suffixes = [];\n      const programCheck = this.programid ? this.programid : false;\n      suffixes.push(programCheck !== '-1' ? programCheck : false);\n      suffixes.push(this.withindex ? this.withindex : \"-1\")\n      suffixes.push(this.backto ? this.backto : false)\n      return suffixes.join(\"/\")\n    }, hasJoinedProgramById(id) {\n      return this.$nuxt.$store.getters.hasJoinedProgramById(id)\n    },\n    getProgramJoinedAtById(id) {\n      return this.$nuxt.$store.getters.getProgramJoinedAtById(id)\n    },\n    getProgramById(id) {\n      return this.$nuxt.$store.getters.getProgramById(id)\n    },\n    getOverallProgressProgramById(id) {\n      return this.$nuxt.$store.getters.getOverallProgressProgramById(id)\n    },\n    getDoneCountByProgramId(id) {\n      return this.$nuxt.$store.getters.getDoneCountByProgramId(id)\n    },\n    getNextExerciseByProgramId(id) {\n      return this.$nuxt.$store.getters.getNextExerciseByProgramId(id)\n    },\n    getExercisetocompleteCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisetocompleteCountProgramById(id)\n    },\n    getExercisecompletedCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisecompletedCountProgramById(id)\n    },\n    printDeviceError(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\" || error.exception.state == \"denied\" || error.exception.state == \"DENIED\")) {\n        this.$root.$emit('showPermssionError', true)\n        return\n      }\n\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    printDeviceErrorOLD(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error.exception && prefix == \"mic\") {\n        if (error.exception.state == \"denied\" || error.exception.state == \"DENIED\") {\n          error.name = \"DeniedError\";\n          this.$root.$emit('showError', {\n            title: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n            error: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n            hasretry: true,\n            click: function () {\n              $nuxt.$airlyn.openPermissionPanel().then((r) => {\n                console.log('got openPermission Panel then', r, JSON.stringify(r))\n              }).catch((e) => {\n                console.log('got openPermission Panel catch', e, JSON.stringify(e))\n              }).finally(() => {\n                //esegui comunque il reset event...\n                if (typeof resetEvent == 'function') {\n                  console.log('dopo il setting riport cmq a inizio')\n                  resetEvent()\n                }\n              })\n              return true\n            },\n            resetEvent: resetEvent || function () {\n            },\n            retryBtn: \"Settings\"\n          });\n          return\n        }\n      }\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\")) {\n        //Permission error\n        this.showError(\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n          clickEvent,\n          resetEvent\n        );\n        return\n      }\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    manageMicError(e, clickEvent, resetEvent) {\n      this.printDeviceError('mic', e, clickEvent, resetEvent);\n    },\n    manageCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('cam', e, clickEvent, resetEvent);\n    },\n    manageMicCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('miccam', e, clickEvent, resetEvent);\n    },\n    showError(title, error, clickEvent, resetEvent) {\n      this.$root.$emit('showError', {\n        title: title,\n        error: error,\n        hasretry: clickEvent !== null ? true : false,\n        click: clickEvent || function () {\n        },\n        resetEvent: resetEvent || function () {\n        }\n      });\n    },\n    swipeEvent(e) {\n      //console.log(e.target); // element that was swiped\n      //console.log(e.detail); // see event data below\n      this.$root.$emit(\"swipe\", e);\n    },\n    attachSwipeListener() {\n      document.addEventListener('swiped-left', this.swipeEvent);\n      document.addEventListener('swiped-right', this.swipeEvent);\n    },\n    detachSwipeListeners() {\n      document.removeEventListener('swiped-left', this.swipeEvent);\n      document.removeEventListener('swiped-right', this.swipeEvent);\n    },\n    fixWindowVariables(variable) {\n      if (typeof window[variable] === 'undefined') {\n        if (window.top[variable] !== 'undefined') {\n          window[variable] = window.top[variable];\n        }\n      }\n    }\n  },\n  beforeMount() {\n    console.log('PRE loaded base Page')\n\n    console.log('fix loading variables');\n      ['currentExercise', 'currentVMToken', 'currentVMKey', 'currentVMUrl'].forEach((item) => {\n      this.fixWindowVariables(item);\n    })\n\n    this.setCurrentPage(this);\n  },\n  beforeDestroy() {\n    this.detachSwipeListeners();\n  },\n  mounted() {\n    console.log('loaded base Page')\n    //Init Preferences if app is native:\n    console.log('try Load index', this.name, this.dynamicTexts);\n    if (this.dynamicTexts && Object.keys(this.dynamicTexts).length > 0) {\n      Object.keys(this.dynamicTexts).map((text) => {\n        this.$appConfiguration.getText(text).then((r) => {\n          this.dynamicTexts[text] = r;\n        }).catch((e) => {\n          this.dynamicTexts[text] = this.$t(this.name + '.' + text);\n        })\n      })\n    }\n    if (this.getCurrentPagerHeight !== null && document.querySelector('.v-main__wrap > div.pager')) {\n      document.querySelector('.v-main__wrap > div.pager').style.height = this.getCurrentPagerHeight + \"px\";\n    }\n    this.$nextTick(() => {\n      //Start swipe features:\n      this.attachSwipeListener();\n      if (this.getCurrentPagerHeight === null) {\n        if (document.querySelector('.v-main__wrap > div.pager')) {\n          this.setCurrentPagerHeight(Math.max(document.querySelector('.v-main__wrap > div.pager').clientHeight, document.querySelector('.v-main__wrap > div.pager').offsetHeight));\n        }\n      }\n    });\n  }\n\n}\n","\nconst MILLISECONDS_SECOND = 1000;\nconst EVENT_ABORT = 'abort';\nconst EVENT_END = 'end';\nconst EVENT_PROGRESS = 'progress';\nconst EVENT_START = 'start';\nconst EVENT_VISIBILITY_CHANGE = 'visibilitychange';\n\nexport default {\n  name: \"CountDown\",\n  props: {\n    interval: {\n      type: Number,\n      default: 1000\n    },\n    timerLength: {\n      type: Number,\n      default: 10000\n    },\n    reverse: {\n      type: Boolean,\n      default: false\n    },\n    now: {\n      type: Function,\n      default: () => Date.now(),\n    },\n    emits: {\n      EVENT_ABORT,\n      EVENT_END,\n      EVENT_PROGRESS,\n      EVENT_START\n    }\n  },\n  data() {\n    return {\n      counting: false,\n      totalMilliseconds: 0,\n      requestId: 0,\n      endTime: 0,\n      elapsed: 0\n    }\n  },\n  computed: {\n    totalSeconds() {\n      return Math.floor(this.totalMilliseconds / MILLISECONDS_SECOND);\n    }\n  },\n  watch: {\n    $props: {\n      deep: true,\n      immediate: true,\n      handler() {\n        this.totalMilliseconds = this.timerLength;\n        this.endTime = this.now() + this.timerLength;\n        //this.start();\n      }\n    },\n  },\n  mounted() {\n    document.addEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n  },\n\n  beforeUnmount() {\n    document.removeEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n    this.pause();\n  },\n  methods: {\n    restart() {\n      this.totalMilliseconds = this.timerLength;\n      this.endTime = this.now() + this.timerLength;\n      this.elapsed = 0;\n      this.start();\n    },\n    start() {\n      if (this.counting) {\n        return;\n      }\n      this.counting = true;\n      this.$emit(EVENT_START);\n      if (document.visibilityState === 'visible') {\n        this.continue();\n      }\n    },\n    getElapsed() {\n      return this.elapsed;\n    },\n    continue() {\n      if (!this.counting) {\n        return;\n      }\n      const delay = Math.min(this.totalMilliseconds, this.interval);\n      if (delay > 0) {\n        let init;\n        let prev;\n        const step = (now) => {\n          if (!init) {\n            init = now;\n          }\n          if (!prev) {\n            prev = now;\n          }\n          const range = now - init;\n          if (range >= delay || range + ((now - prev) / 2) >= delay) {\n            this.progress();\n          } else {\n            this.requestId = requestAnimationFrame(step);\n          }\n          prev = now;\n        };\n        this.requestId = requestAnimationFrame(step);\n      } else {\n        this.end();\n      }\n    },\n    pause() {\n      cancelAnimationFrame(this.requestId);\n    },\n    progress() {\n      if (!this.counting) {\n        return;\n      }\n      this.totalMilliseconds -= this.interval;\n      this.elapsed += this.interval;\n      if (this.totalMilliseconds > 0) {\n        this.$emit(EVENT_PROGRESS, {\n          totalSeconds: this.totalSeconds,\n          totalMilliseconds: this.totalMilliseconds,\n          interval: this.interval,\n          elapsed: this.elapsed\n        });\n      }\n      this.continue();\n    },\n    abort() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_ABORT);\n    },\n    end() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_END, {\n        totalSeconds: this.totalSeconds,\n        totalMilliseconds: this.totalMilliseconds,\n        interval: this.interval,\n        elapsed: this.elapsed\n      });\n      this.totalMilliseconds = 0;\n    },\n    update() {\n      if (this.counting) {\n        this.totalMilliseconds = Math.max(0, this.endTime - this.now());\n      }\n    },\n    handleVisibilityChange() {\n      switch (document.visibilityState) {\n        case 'visible':\n          this.update();\n          this.continue();\n          break;\n        case 'hidden':\n          this.pause();\n          break;\n        default:\n      }\n    }\n  }\n\n\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./countdown.vue?vue&type=template&id=e4d0548a\"\nimport script from \"./countdown.vue?vue&type=script&lang=js\"\nexport * from \"./countdown.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n  export default {\n    props: {\n      value : {\n        type:Number,\n        default:0\n      },\n      exerciseSteps:{\n        type:Number,\n        default:1\n      },\n      startPercent: {\n        type:Number,\n        default: 0\n      },\n      doneClass: {\n        type:String,\n        default:'done'\n      },\n      maxPercent : {\n        type:Number,\n        default: 1\n      },\n      runningPercent: {\n        type:Number,\n        default: 0\n      }\n    },\n    computed : {\n      primaryColor() {\n        return $nuxt.$config.env.environment.indexOf('voicemed_')>-1?\"#EC483F\":\"#848CE6\";\n      },\n      exercisescount() {\n        return this.exerciseSteps\n      },\n      currentExercise() {\n        return this.value\n      },\n      currentPercent() {\n        return this.runningPercent\n      }\n    },\n    methods: {\n      getRotation(index) {\n        if(index === 0) {\n          return \"transform:rotate(0deg);\";\n        }\n        //Get deg for position\n        const angles = 360/(this.exercisescount)*(index);\n        return \"transform:rotate(\"+angles+\"deg);\";\n      },\n    }\n  }\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./exerciseanimationprogress.vue?vue&type=template&id=106df5ae\"\nimport script from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\nexport * from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\nimport basepage from \"~/mixins.js/basepage\";\nimport CountDownItem from \"~/components/countdown\";\nimport {mapGetters} from 'vuex'\n\nconst timerMax = 5;\n\nexport default {\n  name: 'ml_start',\n  mixins: [basepage],\n  components: {\n    CountDownItem\n  },\n  beforeRouteLeave(to, from, next) {\n    document.querySelector('.nextvm').classList.remove('pumpAnimation');\n    this.$closeStream();\n    next();\n  },\n  data() {\n    return {\n      audioLevels: {\n        peakLevel: 0,\n        averageLevel: 0\n      },\n      audioInput: {},\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || false),\n      backto: (this.$route.params.backto || false),\n      \"name\": \"ml_start\",\n      \"deviceInfo\": \"\",\n      \"hasBack\": true,\n      \"hasNext\": true,\n      \"timer\": 0,\n      \"countdownrunning\": false,\n      \"startTimer\": false,\n      'audio': {\n        \"audioContext\": null,\n        \"audioInput\": null,\n        \"realAudioInput\": null,\n        \"inputPoint\": null,\n        \"audioRecorder\": null,\n        \"stereo\": false\n      },\n      bottomsheet: {\n        show: false\n      },\n      uploadProgress: 0,\n      passed: false,\n      hasWarning: false,\n      errorMessage: \"\",\n      loading: false,\n      finish: false,\n      intervals: []\n\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getExercises: 'getExercises',\n      getCurrentExercise: 'getCurrentExercise',\n      getAudioDevices: 'getAudioDevices'\n    }),\n    exercise() {\n      return this.getCurrentExercise\n    },\n\n    currentUploadProgress: function () {\n      const perc = (this.uploadProgress) * 100;\n      if (perc > 100) {\n        return 100;\n      }\n      return perc;\n    },\n    currentPercent() {\n      const perc = ((this.timer / this.timerLength) * 100) * 75 / 100;\n      const updPerc = this.currentUploadProgress * 25 / 100;\n      const finalPerc = perc + updPerc\n      if (finalPerc > 100) {\n        return 100;\n      }\n      return finalPerc;\n    },\n    timerLength() {\n      return timerMax\n    },\n    timerRest() {\n      return timerMax - this.timer\n    },\n    getTitle() {\n      let _title = this.$t(this.name + '.title')\n      return _title.replace(\"%s\", this.timer);\n    }\n  },\n  methods: {\n    exitStep() {\n      if (document.querySelector('#__nuxt')) {\n        document.querySelector('#__nuxt').classList.add('quit');\n      }\n      this.exerciseStepBack()\n    },\n    retryNoise() {\n      this.bottomsheet.show = false;\n      this.setupAll();\n      return true;\n    },\n    leaveMe() {\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        $nuxt.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          if (document.querySelector('#__nuxt')) {\n            document.querySelector('#__nuxt').classList.add('quit');\n          }\n          this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        if (document.querySelector('#__nuxt')) {\n          document.querySelector('#__nuxt').classList.add('quit');\n        }\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n      }\n\n    },\n    prevStep() {\n      this.intervals.map((interval) => {\n        try {\n          clearTimeout(interval)\n        } catch (e) {\n        }\n      })\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          this.$router.back();\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        this.$router.back();\n      }\n\n\n    },\n    nextStep() {\n      let suffix = this.buildSuffix();\n      if(suffix.length>0) {\n        suffix = \"/\" + suffix\n      }\n      if (this.exercise.type === this.$exerciseManager.kindHOLD) {\n\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runnersilent\" + suffix));\n      } else {\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runner\" + suffix));\n      }\n    },\n    sendDataToRest(blob) {\n      /*\n            var url = (window.URL || window.webkitURL).createObjectURL(blob);\n            var link = document.getElementById(\"downloader\");\n            link.href = url;\n            link.download = 'output_noise.wav';\n            link.click();\n      */\n      this.passed = false;\n      this.loading = true;\n      this.$nuxt.$loading.start()\n      //Axios send rest API...\n      const today = new Date();\n      const _userID = this.$auth.user ? (this.$auth.user._id || this.$auth.user.userId) : today.getMilliseconds();\n      const fileName = 'soundcheck_' + _userID + '.wav'\n\n      const file = new File([blob], fileName, {type: 'audio/x-wav', lastModified: Date.now()})\n      const params = new FormData();\n      params.append('audio', file, file.name);\n      params.append('device_code', this.deviceInfo)\n      if (this.audioInput) {\n        params.append('device_info', JSON.stringify(this.audioInput));\n      }\n      const headers = {\n        Authorization: 'Bearer '+window.currentVMToken,\n        timeout: this.$exerciseManager.longTaskTimeout,\n        onUploadProgress: (progress) => {\n          this.uploadProgress = progress.loaded / progress.total;\n        }\n      }\n      this.$axios.$post(($nuxt.$apiConstants.preNoiseCheck_v2),\n        params,\n        headers,\n      ).then((r) => {\n        console.log('noiseCheck result', r)\n        this.uploadProgress = 1;\n        this.passed = false;\n        this.hasWarning = false;\n        this.errorMessage = \"\";\n        let errorTitle = \"\";\n        let errorMessage = \"\";\n\n        if (r && r.resultCode) {\n          /*\n          QUIET_STATUS_CODE = 308\n          QUIET_MSG = 'Wonderful! Your recording environment sounds extremely quiet.'\n\n          MODERATE_STATUS_CODE = 309\n          MODERATE_MSG = 'Not bad! But your recording environment sounds like is becoming noisy, be careful.'\n\n          NOISY_STATUS_CODE = 310\n          NOISY_MSG = 'Too noisy! It\\'s better for you to change the environment. Try also to close doors and windows.'\n          Se l'analisi  andata a buon fine, altrimenti uno di questi:\n          NO_SIGNAL_ERROR_CODE = 301\n          NO_SIGNAL_MSG = 'No signal was detected.'\n\n          EMPTY_FILE_ERROR_CODE = 307\n          EMPTY_FILE_MSG = 'Your recording is empty! Please contact the assistance.'\n           */\n          if(r.resultCode>310) {\n            this.passed = true;\n          } else if(r.resultCode>307) {\n            this.passed = true;\n            this.hasWarning = true;\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          } else {\n            this.passed = false;\n            errorTitle = this.$t('errors.noise.title');\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          }\n        } else {\n          this.passed = false;\n          errorTitle = this.$t('errors.noise.title');\n          errorMessage = this.$t('errors.noise.description');\n        }\n        if (this.passed === false) {\n          this.$root.$emit('showError', {\n            hasretry: true,\n            title: errorTitle,\n            error: errorMessage,\n            leaveBtn: this.$t('generic.startanyway'),\n            click: () => {\n              this.setupAll();\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseReCheck',\n                'event_category': 'Exercises',\n              })\n              return true;\n            },\n            resetEvent: () => {\n              this.passed = true;\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseStartAnyWay',\n                'event_category': 'Exercises',\n              })\n              //this.$root.$emit('nextstep');\n              this.bottomsheet.show = true;\n              return true;\n            }\n          });\n        }\n      }).catch((e) => {\n        console.log('noiseCheck error', e)\n        console.error(\"Errore invio api [pre_noise_check]:\", e);\n        this.$analytics.logEvent(\"error\", {\n          \"title\":'noise check error'\n        });\n        this.$captureException(e);\n        this.$root.$emit('showError', {\n          hasretry: false,\n          title: \"An error has occurred\",\n          error: \"Sorry an issue with the VoiceServer has occurred\",\n          click: () => {\n            this.setupAll();\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseReCheck',\n              'event_category': 'Exercises',\n            })\n            return true;\n          },\n          resetEvent: () => {\n            this.passed = true;\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseStartAnyWay',\n              'event_category': 'Exercises',\n            })\n            //this.$root.$emit('nextstep');\n            this.bottomsheet.show = true;\n            return true;\n          }\n        });\n      }).finally(() => {\n        if (this.passed) {\n          //this.$root.$emit('nextstep'); > non emettere il next step.\n          this.$root.$emit('disableNext', false);\n          this.$nextTick(() => {\n            document.querySelector('.nextvm').classList.add('pumpAnimation')\n          });\n        }\n        this.loading = false;\n        this.finish = true;\n        this.$nuxt.$loading.finish();\n      });\n    },\n    gotData(buffers) {\n      console.log('got buffers');\n      this.$nuxt.$loading.finish();\n      this.audio.audioRecorder.exportMonoWAV((blob) => {\n        this.$closeStream(); //Ferma gli stream di registrazione non servono pi\n        this.sendDataToRest(blob)\n      });\n    },\n    gotDataNative(base64, mimetype) {\n      console.log('ready to store file for sending...', mimetype);\n      const blob = this.$base64ToBlob(base64, mimetype);\n      this.sendDataToRest(blob)\n    },\n    stopRecording() {\n\n      this.$nuxt.$loading.start();\n      this.loading = true;\n      if (this.$capacitor.isNativePlatform()) {\n        console.log('request stop recording!')\n        this.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().then((r) => {\n          if (r && r.value) {\n            this.gotDataNative(r.value.recordDataBase64, r.value.mimeType);\n          } else {\n            console.error('(catch)Errore stop :', e);\n            this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n              this.exitStep()\n              return true;\n            });\n          }\n        }).catch((e) => {\n          console.error('(catch)Errore stop :', e);\n          this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }).finally(() => {\n          this.$nuxt.$loading.finish();\n        })\n      } else {\n        console.log('request stop web')\n        this.audio.audioRecorder.stop();\n        console.log('retrieve buffers')\n        this.audio.audioRecorder.getBuffers(this.gotData);\n      }\n    },\n    timerChange(progress) {\n      this.timer = this.timerLength - progress.totalSeconds;\n    },\n    timerEnd() {\n      console.log('timer finito, ', this.timer);\n      this.countdownrunning = false;\n      this.loading = true;\n      this.stopRecording();\n    },\n    countDownTimer() {\n      if (this.countdownrunning === false) {\n        this.intervals.push(setTimeout(() => {\n          this.$nextTick(() => {\n            console.log('avvia tutto');\n            this.countdownrunning = true;\n            console.log(this.$refs);\n            this.$refs.noisecountdown.restart();\n          });\n        }, 1000));\n        return;\n      }\n    },\n    initCountDown() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      this.countDownTimer();\n    },\n    initCountDownNative() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      $nuxt.$airlyn.addListener('airlynUpdateMeters', (info) => {\n//console.log('got meters',/*info.peakPowers, */ $nuxt.$normalizeLevels(info.peakPowers));\n        //console.log('got meters', info);\n        if (info) {\n          if (info.peakPower) {\n            this.audioLevels.peakLevel = info.peakPower\n          }\n          if (info.averagePower) {\n            this.audioLevels.averageLevel = info.averagePower\n          }\n        }\n\n      });\n      $nuxt.$airlyn.addListener('airlynUpdateMic', (info) => {\n        console.log('got mic INFO', info);\n        this.audioInput = info;\n      });\n\n      this.$airlyn.startRecording({useAGC: true}).then((r) => {\n        console.log('start recording...', r);\n        if (r && r.value === true) {\n          this.countDownTimer();\n        } else {\n          console.error('(then)Errore start :', r);\n          this.manageMicError({\"name\": \"Cannot start Recording\"}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error('(catch)Errore start :', e);\n        this.manageMicError({\"name\": \"Cannot start Recording\", error: e}, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n\n    },\n    initMicrophone(stream) {\n      this.audio.inputPoint = this.audio.audioContext.createGain();\n      this.audio.realAudioInput = this.audio.audioContext.createMediaStreamSource(stream);\n      this.audio.audioInput = this.audio.realAudioInput;\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.realAudioInput.disconnect();\n      this.audio.audioInput = this.convertToMono(this.audio.realAudioInput);\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.audioRecorder = new this.$Recorder(this.audio.inputPoint, {worker: this.$worker.createRecorderWorker()});\n\n      /*\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      */\n      this.initCountDown()\n    },\n    convertToMono(input) {\n      var splitter = this.audio.audioContext.createChannelSplitter(2);\n      var merger = this.audio.audioContext.createChannelMerger(2);\n      input.connect(splitter);\n      splitter.connect(merger, 0, 0);\n      splitter.connect(merger, 0, 1);\n      return merger;\n    },\n    setupAll() {\n      this.loading = false;\n      this.finish = false;\n      this.$closeStream();\n      if (this.$capacitor.isNativePlatform()) {\n        this.timer = 0\n        this.countdownrunning = false;\n        this.initCountDownNative();\n      } else {\n        let message = [];\n        console.log(JSON.stringify(this.getAudioDevices));\n        console.log(navigator.mediaDevices.getSupportedConstraints());\n        message.push(\"Ready to record Audio\");\n        message.push(JSON.stringify(this.getAudioDevices));\n        message.push(\"Supported Constraints:\");\n        message.push(JSON.stringify(navigator.mediaDevices.getSupportedConstraints()));\n        if (null == this.audio.audioContext) {\n          this.audio.audioContext = new AudioContext();\n        }\n        this.$captureMessage(message.join(\"\\n \"));\n        //Debug mode - enumerate device and store info on Sentry:\n        this.$enumerateMediaDevices().then((mediaDevices) => {\n          console.log('got devices', mediaDevices);\n          return this.$initAudio(mediaDevices).then((stream) => {\n            console.log(stream);\n            window.stream = stream;\n            if (null == this.audio.audioContext) {\n              this.audio.audioContext = new AudioContext();\n            }\n            this.timer = 0\n            this.countdownrunning = false;\n            this.initMicrophone(stream)\n          });\n        }).catch((e) => {\n          console.error('errore init microfono non gestito', e);\n          this.$captureException(e);\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n\n        })\n      }\n    }\n  },\n  mounted() {\n    this.$root.$emit('showPager', {\"show\": true});\n    this.$deviceInfo.getInfo().then((r) => {\n      this.deviceInfo = r;\n      this.$exerciseManager.setDeviceCode(r);\n    });\n    if (this.$capacitor.isNativePlatform()) {\n      this.$closeStream();\n      this.$airlyn.checkMicPerm().then((r) => {\n        console.log('Permessi al microfono garantiti?', r, JSON.stringify(r));\n        if (r && r.result === true) {\n          console.log('permessi OK!');\n        } else {\n          const e = {\n            \"name\": \"NotAllowedError\",\n            exception: r\n          }\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error(\"Permission request fails\", e)\n        this.manageMicError({\n          \"name\": \"NotAllowedError\",\n          exception: e\n        }, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n    }\n    this.$nextTick(() => {\n      this.$root.$emit('showPager', {\"show\": true});\n      this.$root.$emit('setNextText', this.$t('generic.start_chevron'));\n      this.$root.$emit('disableNext', true);\n    })\n    this.intervals.push(setTimeout(() => {\n      this.$nextTick(() => {\n        this.setupAll();\n      });\n    }, 700));\n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./noise.vue?vue&type=template&id=2ab22628\"\nimport script from \"./noise.vue?vue&type=script&lang=js\"\nexport * from \"./noise.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Exerciseanimationprogress: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/exerciseanimationprogress.vue').default,FullpageCard: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/fullpage-card.vue').default})\n"],"sourceRoot":""}