(window.webpackJsonp=window.webpackJsonp||[]).push([[24,5,6,8,11,12,13],{1007:function(t,r,i){"use strict";i.r(r);i(4),i(50),i(8),i(9);var n=i(178),s=i(26),o=(i(0),i(7),i(5),i(37),i(112),i(36),i(39),i(370),i(114),i(3),i(28),i(62),i(927)),a=i(930),c=i(46);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=3e3,h={10010:"incorrect_execution",10011:"no_audio",10012:"no_audio",10013:"incorrect_execution",10014:"incorrect_execution",10015:"",10016:"",10017:"too_noise",10018:"no_audio",10019:"",10020:"",10021:"",10022:"",10023:"",10024:"",10025:"",10026:"",10027:"",10028:"",10029:""},m={name:"ml_exercise",mixins:[o.a],components:{CountDownItem:a.default},beforeRouteLeave:function(e,t,r){this.$closeStream(),r()},data:function(){return{audioLevels:{peakLevel:0,averageLevel:0},deviceInfo:{},showErrorData:!1,errorMappedCode:"",errorTries:0,amplitude:0,average:0,audioInput:{},intervals:[],delay:!0,delayTime:0,preload:!0,exid:this.$route.params.id,programid:this.$route.params.fromprogram||!1,withindex:this.$route.params.withindex||!1,backto:this.$route.params.backto||!1,name:"ml_exercise",hasBack:!0,hasNext:!1,current:-1,realCurrent:-1,timer:0,startCountdown:3,finish:!1,uploadProgress:0,currentTime:0,currentRemaining:0,overallRemaining:0,currentProgress:0,currentExerciseTime:0,overallProgress:0,totalRunningTime:0,timeStart:0,timeEnd:0,timePauseStart:0,timePauseGap:0,estimatedDuration:0,audio:{audioContext:null,audioInput:null,realAudioInput:null,inputPoint:null,audioRecorder:null,stereo:!1},sendHistory:{blob:null,summary:null},cycle:{current:-1,duration:0,elapsed:0},recordingPhasesDuration:{},interval:250,about:{show:!1}}},computed:l(l({},Object(c.d)({getCurrentUser:"getCurrentUser",getExercises:"getExercises",getCurrentExercise:"getCurrentExercise",isCurrentUserGuest:"isCurrentUserGuest"})),{},{localCurrentUser:function(){return $nuxt.$config.env.environment.indexOf("library")>-1?$nuxt.$useractions.retrieveMeta():this.getCurrentUser},delayBreathTime:function(){return d},exercise:function(){return this.getCurrentExercise},exercises:function(){return this.exercise?this.exercise.exercises:[]},computedDuration:function(){return!(!this.getCurrentExercise||!Array.isArray(this.getCurrentExercise.exercises))&&this.getCurrentExercise.exercises.reduce((function(e,t){return 0+(t.duration||0)}),0)},exercisescount:function(){return this.exercise?this.exercise.exercises.length:0},exercisescountReal:function(){return this.exercise?this.exercise.exercises.filter((function(e){return!1===e.pause})).length:0},currentExercise:function(){return this.current>=0&&this.current<this.exercisescount?this.exercise.exercises[this.current]:this.exercisescount>0&&this.exercise.exercises[0]},nextExercise:function(){return this.current+1>=0&&this.current+1<this.exercisescount&&this.exercise.exercises[this.current+1]},timestring:function(){return new Date(this.totalRunningTime).toISOString().substr(14,5)},remainingString:function(){var e=1e3*this.estimatedDuration-this.totalRunningTime;return"-"+new Date(e).toISOString().substr(14,5)},overallRemainingString:function(){var e=this.totalTimeMs-(this.totalRunningTime+this.currentExerciseTime);return"-"+new Date(e).toISOString().substr(14,5)},currentPercent:function(){if(this.cycle.duration<=0)return 0;if(this.cycle.elapsed+this.currentExerciseTime<=0)return 0;var e=(this.cycle.elapsed+this.currentExerciseTime)/this.cycle.duration*100;return e>100?100:e},currentUploadProgress:function(){var e=100*this.uploadProgress;return e>100?100:e},totalTime:function(){return this.exercises.reduce((function(e,t){return e+t.duration}),0)},totalTimeMs:function(){return this.exercises.reduce((function(e,t){return e+1e3*(t.duration>0?t.duration:0)}),0)},nuxtloading:function(){return $nuxt.$loading.loading}}),watch:{current:function(){var e=this;this.current>=0&&(this.cycle.current!==this.currentExercise.iteration&&(this.cycle.current=this.currentExercise.iteration,this.cycle.elapsed=0,this.cycle.duration=this.getCurrentExercise.exercises.reduce((function(t,r){return r.iteration===e.cycle.current?t+r.durationMs:t}),0)))}},methods:l(l({},Object(c.c)({addDoneExercise:"addDoneExercise",updateExercise:"updateExercise"})),{},{holdEnd:function(){var e=this;this.$refs.stepcountdown.abort(),this.currentProgress=0,this.currentTime=0,this.totalRunningTime+=this.currentExercise.durationMs,this.cycle.elapsed+=this.currentExercise.durationMs,this.recordingPhasesDuration[this.current]=(new Date).getTime()-this.recordingPhasesDuration[this.current],this.current++,this.currentExerciseTime=0,!1===this.currentExercise.pause&&this.realCurrent++,this.currentRemaining=this.getExercisePhaseDuration(!1),Object(n.a)(document.querySelectorAll(".faded")).forEach((function(e){e.classList.remove("faded")})),this.current<this.exercisescount?requestAnimationFrame((function(){e.manageExercise()})):(this.uploadProgress=0,this.finish=!0,this.finishExercise())},convertMsHHMMSS:function(e){var t=new Date(e).toISOString().substr(11,8);return 0===t.indexOf("00:")?t.substr(3):t},timerChange:function(e){var t=this,r=this.getExercisePhaseDuration(!0),i=this.getExercisePhaseDuration(!1);if(!0===this.delay)return this.delayTime-=e.interval,void(e.elapsed+e.interval>r&&this.$forceNextTick((function(){t.$refs.stepcountdown.end()})));if(this.currentExerciseTime+=e.interval,this.currentProgress=100-e.totalSeconds/i*100,this.currentRemaining=e.totalSeconds,this.currentTime=r-e.totalMilliseconds,!1===this.currentExercise.pause){var n=(this.totalRunningTime+this.currentExerciseTime)/this.totalTimeMs*100;this.overallProgress=n>100?100:n}e.elapsed+e.interval>r&&this.$forceNextTick((function(){t.$refs.stepcountdown.end()}))},finishDelay:function(){var e=this;this.$refs.stepcountdown.end(),this.$anime({targets:".exercise_delay_info",opacity:[1,0],duration:500,delay:250,easing:"easeInOutQuad",complete:function(){e.delay=!1,e.$nextTick((function(){e.startRealExercise()}))}})},timerEnd:function(e){var t=this;if(!0===this.delay)return this.delayTime-=e.interval,void this.$forceNextTick((function(){t.finishDelay()}));this.currentProgress=0,this.currentTime=0,this.totalRunningTime+=this.currentExercise.durationMs,this.cycle.elapsed+=this.currentExercise.durationMs,this.recordingPhasesDuration[this.current]=(new Date).getTime()-this.recordingPhasesDuration[this.current],this.current++,this.currentExerciseTime=0,!1===this.currentExercise.pause&&this.realCurrent++,this.currentRemaining=this.getExercisePhaseDuration(!1),Object(n.a)(document.querySelectorAll(".faded")).forEach((function(e){e.classList.remove("faded")})),this.current<this.exercisescount?requestAnimationFrame((function(){t.manageExercise()})):(this.uploadProgress=0,this.finish=!0,this.finishExercise())},leaveMe:function(){var e=this;this.intervals.map((function(e){try{clearTimeout(e)}catch(e){}})),this.$analytics.logEvent("exercise_quit",{id:this.getCurrentExercise.id,name:this.getCurrentExercise.title,program_id:this.getCurrentExercise.program_id||null,type:this.getCurrentExercise.type}),this.$refs.stepcountdown.abort(),this.$capacitor.isNativePlatform()?(this.$nuxt.$loading.start(),$nuxt.$airlyn.removeAllListeners(),this.$airlyn.stopRecording().finally((function(){e.$nuxt.$loading.finish(),e.$gtag("event","click",{event_label:"StopRecording",event_category:"Exercises",non_interaction:!0}),document.querySelector("#__nuxt")&&document.querySelector("#__nuxt").classList.add("quit"),e.exerciseStepBack()}))):(this.$closeStream(),this.audio&&this.audio.audioRecorder&&this.audio.audioRecorder.stop(),this.$gtag("event","click",{event_label:"StopRecording",event_category:"Exercises",non_interaction:!0}),document.querySelector("#__nuxt")&&document.querySelector("#__nuxt").classList.add("quit"),this.exerciseStepBack())},getRotation:function(e){return 0===e?"transform:rotate(0deg);":"transform:rotate("+360/this.exercisescount*e+"deg);"},imageError:function(){this.phasebutton.phaseimage=i(317)},prevStep:function(){var e=this;this.about.show?this.closeInfo():(this.intervals.map((function(e){try{clearTimeout(e)}catch(e){}})),this.$refs.stepcountdown.abort(),this.$capacitor.isNativePlatform()?(this.$nuxt.$loading.start(),this.$airlyn.stopRecording().finally((function(){e.$nuxt.$loading.finish(),e.$router.back(),e.$gtag("event","click",{event_label:"StopRecording",event_category:"Exercises",non_interaction:!0})}))):(this.$closeStream(),this.audio&&this.audio.audioRecorder&&this.audio.audioRecorder.stop(),this.$router.back(),this.$gtag("event","click",{event_label:"StopRecording",event_category:"Exercises",non_interaction:!0})))},nextStep:function(){this.$root.$emit("showPager",{show:!1});var e=this.buildSuffix();e.length>0&&(e="/"+e),this.$router.push($nuxt.localePath("/ml/greetings/"+this.exid+e))},finishExercise:function(){var e=this;requestAnimationFrame((function(){$nuxt.$loading.start()})),this.timeEnd=(new Date).getTime(),this.$anime.remove(".breath_item"),document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.remove("animating"),this.stopRecording(),this.$nextTick((function(){var t=Object.assign({targets:".breath_item",loop:!1,duration:3e3,begin:function(){document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.add("animating")},complete:function(){document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.remove("animating")}},e.$animationHelper.pulse);e.$anime(t)}))},completeError:function(e){console.log("show new error panels with info",e);var t=0,r=0;e&&null!=e&&(void 0!==e.statusCode&&(r=parseInt(e.statusCode)),void 0!==e.breathingServiceSoundCode&&(t=parseInt(e.breathingServiceSoundCode)));var i=void 0!==h[t]?h[t]:"";i.length<=0&&(i="error_restapi"),this.errorMappedCode=i,console.log("show new error panels with info",t,r),this.showErrorData=!0,this.$nextTick((function(){setTimeout((function(){console.log("Error downloader show");var e=document.getElementById("error_downloader");e&&e.classList.remove("hidden")}),500)}))},downloadLastRecord:function(){var e=this;console.log("retry request download last blob....");try{var t="recording_"+this.$exerciseManager.formatDateYmd(new Date)+".wav";this.$writePublicBlob(this.sendHistory.blob,t).then((function(r){console.warn("RES di download",r),e.$root.$emit("showToast",e.$t("generic.registrationstoredindocuments",{file:t}),"success")})).catch((function(t){console.error("Errore di download",t),e.$root.$emit("showToast",e.$t("generic.registrationstoredindocuments_error"),"error")})),console.log("download sent to instance")}catch(e){console.error("Errore di download",e),this.$root.$emit("showToast",this.$t("generic.registrationstoredindocuments_error"),"error")}},completeRetry:function(){if(this.getCurrentExercise&&(void 0!==this.getCurrentExercise.breathingServiceSoundCode&&parseInt(this.getCurrentExercise.breathingServiceSoundCode)<10029))return this.showErrorData=!1,void this.startExercises();this.errorTries+=1,this.showErrorData=!1,this.sendRecord(this.sendHistory.blob,this.sendHistory.summary)},sendRecord:function(e,t){var r=this;this.sendHistory.blob=e,this.sendHistory.summary=t,this.uploadProgress=0,this.loading=!0;new Date;var i=this.$useractions.retrieveID(),n=!1,s=null,o=this.exid+"_recording_"+i+".wav",a=new File([e],o,{type:"audio/x-wav",lastModified:Date.now()}),c=!1;this.localCurrentUser&&(c=this.localCurrentUser),this.deviceInfo&&c&&(c.meta.deviceInfo=this.deviceInfo),console.log(c,this.localCurrentUser),this.$exerciseManager.completeExercise(this.getCurrentExercise,(function(e){r.uploadProgress=e.loaded/e.total-.05}),a,void 0!==t?t:{},c||!1).then((function(e){if(r.uploadProgress=1,e.exercise&&e.response&&e.exercise.completed){var t=5e4;void 0!==e.breathingServiceSoundCode&&(t=parseInt(e.breathingServiceSoundCode)),void 0!==e.exercise.breathingServiceSoundCode&&(t=parseInt(e.exercise.breathingServiceSoundCode)),t>10029?n=!0:(s=e.exercise,n=$nuxt.$t("errors.global.msg_restapi"))}else s=e.exercise,n=$nuxt.$t("errors.global.msg_restapi")})).catch((function(e){e&&e.response&&e.response.data&&(s=e.response.data),console.error("Errore invio api [breathing_exercises]:",e),r.$analytics.logEvent("error",{title:"cannot send exercise"}),r.$captureException(e),n=$nuxt.$t("errors.global.title")})).finally((function(){$nuxt.$loading.finish(),!0===n?(r.isCurrentUserGuest&&r.addDoneExercise(1),r.nextStep()):r.completeError(s)}))},sendRecordOld:function(e){var t=this;this.uploadProgress=0,new Promise((function(r,i){var n=(window.URL||window.webkitURL).createObjectURL(e),s=document.getElementById("downloader");s.href=n,s.download="output_exercise.wav",s.click(),t.intervals.push(setTimeout((function(){t.uploadProgress=100,r()}),8e3))})).then((function(){t.nextStep()})).catch((function(e){t.$captureException(e)}))},gotData:function(e){var t=this;this.audio.audioRecorder.exportMonoWAV((function(e){t.$closeStream();var r={exerciseStarts:t.timeStart/1e3,exerciseEnds:t.timeEnd/1e3,pauseTime:t.timePauseGap>0?t.timePauseGap/1e3:0,totalComputedDuration:(t.timeEnd-t.timeStart)/1e3,estimatedDuration:t.estimatedDuration,clientPhases:t.recordingPhasesDuration,waveMime:"audio/wav",waveDuration:-1};t.sendRecord(e,r)}))},closeInfo:function(){var e=this;this.about.show=!1,this.resumeRecording().then((function(t){e.$refs.stepcountdown.start();var r=(new Date).getTime()-e.timePauseStart;e.timePauseGap+=r,console.log("countdown resumed total Pause: ",e.timePauseGap)})).catch((function(t){e.$airlyn.stopRecording().then((function(e){console.log("azzera registrazione",e)})).catch((function(e){console.log("errore azzera registrazione",e)})),console.log("non riesco a ripristinare esercizio..."),e.$root.$emit("showError",{hasretry:!0,title:$nuxt.$t("errors.global.uhoh"),error:$nuxt.$t("errors.global.msg_storeexercise"),click:function(){return e.startExercises(),!0},resetEvent:function(){return this.exerciseStepBack(),!0}})}))},openInfoDialog:function(){},pauseRecording:function(){var e=this;return new Promise((function(t,r){e.$capacitor.isNativePlatform()&&e.$airlyn.pauseRecording().then((function(e){e&&!0===e.value?t(!0):r(!1)})).catch((function(e){console.error("Cannot pause, ",e),r(!1)}))}))},resumeRecording:function(){var e=this;return new Promise((function(t,r){e.$capacitor.isNativePlatform()&&e.$airlyn.resumeRecording().then((function(e){e&&!0===e.value?t(!0):r(!1)})).catch((function(e){console.error("Cannot resume, ",e),r(!1)}))}))},stopRecording:function(){var t=this;this.$gtag("event","click",{event_label:"FinishRecording",event_category:"Exercises",non_interaction:!0}),Object.keys(this.recordingPhasesDuration).map((function(e){t.recordingPhasesDuration[e]=t.recordingPhasesDuration[e]>0?t.recordingPhasesDuration[e]/1e3:0}));var r={exerciseStarts:this.timeStart/1e3,exerciseEnds:this.timeEnd/1e3,pauseTime:this.timePauseGap>0?this.timePauseGap/1e3:0,totalComputedDuration:(this.timeEnd-this.timeStart)/1e3,estimatedDuration:this.estimatedDuration,clientPhases:this.recordingPhasesDuration};this.$capacitor.isNativePlatform()?(this.$airlyn.removeAllListeners(),this.$airlyn.stopRecording().then((function(i){if(i&&i.value){r.waveDuration=i.value.msDuration>0?i.value.msDuration/1e3:0,r.waveMime=i.value.mimeType;var n=t.$base64ToBlob(i.value.recordDataBase64,i.value.mimeType);t.sendRecord(n,r)}else console.error("(catch)Errore stop :",e),t.manageMicError({name:$nuxt.$t("errors.global.msg_retrieverecording"),error:e},null,(function(){return this.exerciseStepBack(),!0}))})).catch((function(e){$nuxt.$loading.finish(),console.error("(catch)Errore stop :",e),t.manageMicError({name:$nuxt.$t("errors.global.msg_retrieverecording"),error:e},null,(function(){return this.exerciseStepBack(),!0}))})).finally((function(){}))):(this.audio.audioRecorder.stop(),this.audio.audioRecorder.getBuffers(this.gotData))},getExercisePhaseDuration:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCurrentExercise?"dob"===this.getCurrentExercise.subtype&&this.currentExercise?Math.min(this.currentExercise.maxSetDuration,120)*(e?1e3:1):this.currentExercise?e?this.currentExercise.durationMs:this.currentExercise.duration:0:0},manageExercise:function(){var e=this;if(this.$anime.remove(".breath_item"),document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.remove("animating"),this.recordingPhasesDuration[this.current]=(new Date).getTime(),this.current>=0){this.estimatedDuration+=this.getExercisePhaseDuration(!1),this.$refs.stepcountdown.restart();var t=this.getExercisePhaseDuration(!0);this.nextExercise&&"hold"==this.nextExercise.animationType&&(t+=this.nextExercise.durationMs);var r=Object.assign({targets:".breath_item",loop:!1,easing:"easeOutSine",duration:t-50,begin:function(){document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.add("animating")},complete:function(){document.querySelector("div.breath_item")&&document.querySelector("div.breath_item").classList.remove("animating")}},this.currentExercise.animation);!1===this.currentExercise.pause&&requestAnimationFrame((function(){e.$anime(r)}))}},startTimer:function(){var e=this;this.intervals.push(setTimeout((function(){e.timer++,!1===e.finish&&e.startTimer()}),1e3))},startExercises:function(){var e=this;this.$analytics.logEvent("exercise_begin_recording",{id:this.getCurrentExercise.id,name:this.getCurrentExercise.title,program_id:this.getCurrentExercise.program_id||null,type:this.getCurrentExercise.type}),this.$analytics.setScreenName(this.getCurrentExercise.title+" "+this.getCurrentExercise.type+" page"),this.$gtag("event","click",{event_label:"BeginRecording",event_category:"Exercises",non_interaction:!0}),this.$exerciseManager.startExercise(this.getCurrentExercise),this.delay=!0,this.delayTime=d,this.current=0,this.realCurrent=0,this.overallProgress=0,this.currentExerciseTime=0,this.overallRemaining=this.totalTimeMs,this.finish=!1,this.cycle.current=0,this.cycle.duration=0,this.cycle.elapsed=0,this.$set(this,"recordingPhasesDuration",{}),Object(n.a)(document.querySelectorAll(".faded")).forEach((function(e){e.classList.remove("faded")})),this.$forceNextTick((function(){e.$refs.stepcountdown.restart()}))},startRealExercise:function(){var e=this;this.$capacitor.isNativePlatform()?this.$airlyn.checkMicPerm().then((function(t){if(t&&!0===t.result)e.totalRunningTime=0,e.current=0,e.realCurrent=0,e.setupAll();else{var r={name:$nuxt.$t("errors.global.msg_notallowed"),exception:t};e.manageMicError(r,null,(function(){return this.exerciseStepBack(),!0}))}})).catch((function(t){console.error("Permission request fails",t),e.manageMicError({name:$nuxt.$t("errors.global.msg_notallowed"),exception:t},null,(function(){return this.exerciseStepBack(),!0}))})):this.intervals.push(setTimeout((function(){e.totalRunningTime=0,e.current=0,e.realCurrent=0,e.setupAll()}),1e3))},initMicrophone:function(e){this.audio.inputPoint=this.audio.audioContext.createGain(),this.audio.realAudioInput=this.audio.audioContext.createMediaStreamSource(e),this.audio.audioInput=this.audio.realAudioInput,this.audio.audioInput.connect(this.audio.inputPoint),this.audio.realAudioInput.disconnect(),this.audio.audioInput=this.convertToMono(this.audio.realAudioInput),this.audio.audioInput.connect(this.audio.inputPoint),this.audio.audioRecorder=new this.$Recorder(this.audio.inputPoint,{worker:this.$worker.createRecorderWorker()}),this.audio.audioRecorder.clear(),this.audio.audioRecorder.record(),this.currentTime=0,this.timeStart=(new Date).getTime(),Object(n.a)(document.querySelectorAll(".faded")).forEach((function(e){e.classList.remove("faded")})),this.manageExercise()},convertToMono:function(e){var t=this.audio.audioContext.createChannelSplitter(2),r=this.audio.audioContext.createChannelMerger(2);return e.connect(t),t.connect(r,0,0),t.connect(r,0,1),r},setupAll:function(){var e=this;this.$closeStream(),this.timeStart=0,this.timeEnd=0,this.estimatedDuration=0,this.timePauseStart=0,this.timePauseGap=0,this.$capacitor.isNativePlatform()?($nuxt.$airlyn.addListener("airlynUpdateMeters",(function(t){if(t&&(t.peakPower&&(e.audioLevels.peakLevel=t.peakPower),t.averagePower)){var r="ios"===e.$capacitor.getPlatform()?200:150;e.audioLevels.averageLevel=t.averagePower,e.amplitude=t.peakPower*r,e.average=t.averagePower*r}})),$nuxt.$airlyn.addListener("airlynUpdateMic",(function(t){console.log("got mic INFO",t),t&&(e.audioInput=t)})),this.$airlyn.startRecording().then((function(t){t&&!0===t.value?(e.currentTime=0,e.timeStart=(new Date).getTime(),Object(n.a)(document.querySelectorAll(".faded")).forEach((function(e){e.classList.remove("faded")})),e.manageExercise()):(console.error("(then)Errore start :",t),e.manageMicError({name:$nuxt.$t("errors.global.msg_startrecording")},null,(function(){return this.exerciseStepBack(),!0})))})).catch((function(t){console.error("(catch)Errore start :",t),e.manageMicError({name:$nuxt.$t("errors.global.msg_startrecording"),error:t},null,(function(){return this.exerciseStepBack(),!0}))}))):this.$enumerateMediaDevices().then((function(t){return e.$initAudio(t).then((function(t){window.stream=t,null==e.audio.audioContext&&(e.audio.audioContext=new AudioContext),e.initMicrophone(t)}))})).catch((function(t){console.error("errore init microfono non gestito",t),e.$captureException(t),e.manageMicError(t),e.manageMicError(t,null,(function(){return this.exerciseStepBack(),!0}))})).finally((function(){e.$nuxt.$loading.finish()}))}}),mounted:function(){var e=this;this.delayTime=d,this.delay=!0,this.exercise||this.$router.replace($nuxt.localePath("/ml/exercises/"+this.exid)),this.interval=250,this.timer=0,this.$root.$emit("showPager",{show:!1});var t=Object(n.a)(document.querySelectorAll(".fakeTitles")).reduce((function(e,t){return Math.max(e,Math.max(t.offsetHeight,t.clientHeight,t.scrollHeight))}),0);document.querySelector("#exerciseTitle")&&(document.querySelector("#exerciseTitle").style.height=t+"px"),this.preload=!1,this.$nextTick((function(){e.$root.$emit("setNextText",e.$t("generic.next")),e.startExercises()})),this.$deviceInfo.getInfoObject().then((function(t){var r=e.$deviceInfo.currentUUID;e.deviceInfo={deviceId:r,deviceFamily:t.platform||"",osVersion:t.osVersion||"",manufacturer:t.manufacturer||""}})),window.overrideTester=this}},p=m,g=(i(990),i(42)),f=Object(g.a)(p,(function(){var e=this,t=e._self._c;return t("fullpage-card",{staticClass:"runner exercisecc exerciseRecording",attrs:{hidefooter:!0},scopedSlots:e._u([{key:"header",fn:function(){return[t("v-row",{staticClass:"navigation",attrs:{"align-content":"center",justify:"space-between"}},[t("v-btn",{attrs:{icon:""},on:{click:e.leaveMe}},[t("v-icon",[e._v("mdi-close-circle-outline")])],1),e._v(" "),e.getCurrentExercise?t("div",{staticClass:"exercise__title"},[t("span",{domProps:{innerHTML:e._s(e.getCurrentExercise.title)}})]):e._e(),e._v(" "),!e.finish&&e.currentExercise&&!1===e.delay?t("div",{staticClass:"sideBtn"},[t("inputmicrophone",{attrs:{average:e.average,amplitude:e.amplitude}})],1):t("v-btn",{staticStyle:{opacity:"0"},attrs:{icon:""},on:{click:e.leaveMe}},[t("v-icon",[e._v("mdi-close-circle-outline")])],1)],1),e._v(" "),e.finish||!1!==e.delay?e._e():t("div",{class:["exerciseSpecs animated faded",e.getCurrentExercise.subtype&&"dob"==e.getCurrentExercise.subtype?"voice":""]},[e.currentExercise.thumb?t("v-img",{attrs:{src:e.currentExercise.thumb,width:"20vw",contain:""}}):e._e(),e._v(" "),e.getCurrentExercise.subtype&&"dob"==e.getCurrentExercise.subtype?t("p",[e._v(e._s(e.currentExercise.title))]):e._e()],1),e._v(" "),e.preload?t("div",{staticClass:"text-center mintwoRows"},e._l(e.exercises,(function(r){return t("div",{staticClass:"fakeTitles text-center"},[t("span",[e._v(e._s(r.title))]),e._v(" "),t("p",{staticClass:"exerciseSecText"},[e._v(e._s(r.description))])])})),0):e._e()]},proxy:!0},{key:"body",fn:function(){return[!1===e.currentExercise.pause?t("div",{class:["exercises__container animated faded",e.getCurrentExercise.type]},[e.delay?t("div",{key:e.delayTime,staticClass:"exercise_delay_info"},[t("div",{staticClass:"timer text-center"},[t("p",{domProps:{innerHTML:e._s(e.$t("generic.exercisestart"))}}),e._v(" "),t("p",{staticClass:"timer__numbers"},[e._v(e._s(Math.ceil(e.delayTime/1e3)))])])]):e._e(),e._v(" "),t("transition",{attrs:{name:"fade"}},["dob"!==e.getCurrentExercise.subtype||!1!==e.currentExercise.pause||e.finish||!1!==e.delay?e._e():t("div",{staticClass:"voicepickerContainer"},[t("inputmicrophonebig",{attrs:{average:e.average,amplitude:e.amplitude}})],1)]),e._v(" "),(e.finish||e.currentExercise)&&!1===e.delay&&0==e.finish&&"dob"!==e.getCurrentExercise.subtype?t("exerciseanimationprogress",{key:e.delay,class:e.currentExercise.animationType+" "+(e.finish?"finished":""),attrs:{exerciseSteps:e.finish?0:e.getCurrentExercise.cycles,startPercent:0,maxPercent:0,doneClass:"doneNone",runningPercent:e.finish?e.currentUploadProgress:e.currentPercent},scopedSlots:e._u([{key:"inside",fn:function(){return[e.finish?e._e():t("div",{staticClass:"breath_item"}),e._v(" "),e.currentExercise?t("div",{staticClass:"action"},[t("transition",{attrs:{mode:"out-in",name:"exittop"}},[e.finish?t("div",{domProps:{innerHTML:e._s(e.$t("ml_exercise.almostdone"))}}):t("div",{key:e.current},[e._v("\n                "+e._s(e.currentExercise.title||"")+"\n              ")])])],1):e._e()]},proxy:!0}],null,!1,289655709),model:{value:e.current,callback:function(t){e.current=t},expression:"current"}}):e._e(),e._v(" "),!1===e.delay&&"dob"!==e.getCurrentExercise.subtype?t("div",{class:["timer text-center animated",e.finish?"faded":""]},[t("v-progress-linear",{model:{value:e.overallProgress,callback:function(t){e.overallProgress=t},expression:"overallProgress"}}),e._v(" "),t("small",[e.getCurrentExercise.cycles>1?[e._v(e._s(e.currentExercise.iteration)+" of "+e._s(e.getCurrentExercise.cycles)+" | \n          ")]:e._e(),e._v("\n          "+e._s(e.overallRemainingString)+"\n        ")],2)],1):e._e(),e._v(" "),!1===e.delay&&"dob"===e.getCurrentExercise.subtype?t("div",{class:["timer text-center animated type-voice",e.finish?"faded":""]},[t("small",[e._v(e._s(e.convertMsHHMMSS(e.$refs.stepcountdown.getElapsed())))])]):e._e(),e._v(" "),t("div",{staticStyle:{display:"none"}},[t("b",[e._v("Debug")]),t("br"),e._v(" "),t("p",[e._v("Peak dB:"),t("b",[e._v(e._s(e.audioLevels.peakLevel))])]),e._v(" "),t("p",[e._v("Average dB:"),t("b",[e._v(e._s(e.audioLevels.averageLevel))])])])],1):t("div",{class:["exercises__waiting animated",e.currentRemaining%2==1?"odd":"even"]},[t("small",{domProps:{innerHTML:e._s(e.$t("generic.startagain"))}}),e._v("\n      "+e._s(e.currentRemaining)+"\n    ")]),e._v(" "),t("transition",{attrs:{name:"fade"}},["dob"===e.getCurrentExercise.subtype&&!1===e.currentExercise.pause&&!1===e.delay?t("div",{staticClass:"holdcontainer voice"},[t("v-btn",{staticClass:"nextvm",attrs:{loading:e.nuxtloading},on:{click:e.holdEnd}},[t("v-icon",[e._v("mdi-square")])],1),e._v(" "),t("p",[e._v(e._s(e.$t("ml_exercise.voice.stop_hold_phase_cta")))])],1):e._e()]),e._v(" "),t("a",{staticStyle:{display:"none"},attrs:{href:"#",id:"downloader"}},[e._v("Download audio")]),e._v(" "),t("CountDownItem",{ref:"stepcountdown",attrs:{timerLength:!0===e.delay?e.delayBreathTime:e.getExercisePhaseDuration(!0)+5,interval:e.interval},on:{progress:e.timerChange,end:e.timerEnd}}),e._v(" "),e.getCurrentExercise?t("infodialog",{attrs:{show:e.about.show,contentclasses:"infoContent",title:e.getCurrentExercise.title,description:e.getCurrentExercise.about||"",infoImage:e.getCurrentExercise.aboutImage||e.getCurrentExercise.thumbnail},on:{close:e.closeInfo},scopedSlots:e._u([{key:"closebtn",fn:function(){return[e._v(e._s(e.$t("generic.alright")))]},proxy:!0}],null,!1,3628382813)}):e._e(),e._v(" "),t("completitionfailed",{attrs:{show:e.showErrorData,tries:e.errorTries,error:e.errorMappedCode},on:{retry:e.completeRetry,blobdownload:e.downloadLastRecord,close:function(t){e.showErrorData=!1}}})]},proxy:!0}])})}),[],!1,null,null,null);r.default=f.exports;installComponents(f,{Inputmicrophone:i(953).default,Inputmicrophonebig:i(954).default,Exerciseanimationprogress:i(931).default,Infodialog:i(928).default,Completitionfailed:i(955).default,FullpageCard:i(220).default})},927:function(e,t,r){"use strict";r(4),r(7),r(8),r(5),r(9);var i=r(26),n=(r(0),r(28),r(62),r(63),r(27),r(3),r(37),r(46));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a={name:"basePage",transition:{name:"slide",mode:"out-in",css:!1,beforeEnter:function(e){if(!document.querySelector("#__nuxt").classList.contains("quit")){var t=document.querySelector("#__nuxt").classList.contains("back")?"-100%":"100%";this.$anime.set(e,{scale:1,opacity:0,translateX:t})}},enter:function(e,t){var r=document.querySelector("#__nuxt").classList.contains("back")?"-100%":"100%";this.$anime({targets:e,opacity:[0,1],translateX:[r,"0"],duration:500,easing:"easeInOutSine",complete:t})},leave:function(e,t){if(document.querySelector("#__nuxt").classList.contains("quit"))this.$anime({targets:e,translateY:[0,"100%"],duration:500,easing:"easeInOutSine",complete:t});else{var r=document.querySelector("#__nuxt").classList.contains("back")?"100%":"-100%";this.$anime({targets:e,opacity:[1,0],translateX:["0",r],duration:500,easing:"easeInOutSine",complete:t})}},afterLeave:function(e){document.querySelector("#__nuxt").classList.remove("quit"),document.querySelector("#__nuxt").classList.remove("back")}},data:function(){return{name:"basePage",exid:this.$route.params.id,programid:this.$route.params.fromprogram||!1,withindex:this.$route.params.withindex||-1,backto:this.$route.params.backto||!1,hasBack:!1,hasNext:!1,hasInfo:!1}},computed:o(o({},Object(n.d)({getCurrentPagerHeight:"getCurrentPagerHeight"})),{},{isVoicemed:function(){return $nuxt.$config.env.environment.indexOf("voicemed_")>-1},isAirlyn:function(){return $nuxt.$config.env.environment.indexOf("voicemed_")<0},nuxtloading:function(){return $nuxt.$loading.loading},defaultHomeUrl:function(){return"/"}}),methods:o(o({},Object(n.c)({setCurrentPage:"setCurrentPage",setCurrentPagerHeight:"setCurrentPagerHeight"})),{},{exerciseStepBack:function(){if(console.log("exit test",this.backto,this.programid),"standalone"==this.backto||"challengemode"==this.backto)return $nuxt.$airlyn.finishExercise({reason:"user-cancelled",result:{}}).finally((function(){console.log("exercise finished by user")})),void $nuxt.$airlyn.closeExercise().finally((function(){console.log("exercise closed, success")}));"today"!=this.backto?"discovery"!=this.backto?this.programid?"-1"==this.programid||-1==this.programid||"false"==this.programid||0==this.programid?$nuxt.$router.replace($nuxt.localePath("/user/today")):$nuxt.$router.replace($nuxt.localePath("/ml/programs/"+this.programid)):$nuxt.$router.replace($nuxt.localePath("/user/today")):$nuxt.$router.replace($nuxt.localePath("/home")):$nuxt.$router.replace($nuxt.localePath("/user/today"))},buildSuffix:function(){var e=[],t=!!this.programid&&this.programid;return e.push("-1"!==t&&t),e.push(this.withindex?this.withindex:"-1"),e.push(!!this.backto&&this.backto),e.join("/")},hasJoinedProgramById:function(e){return this.$nuxt.$store.getters.hasJoinedProgramById(e)},getProgramJoinedAtById:function(e){return this.$nuxt.$store.getters.getProgramJoinedAtById(e)},getProgramById:function(e){return this.$nuxt.$store.getters.getProgramById(e)},getOverallProgressProgramById:function(e){return this.$nuxt.$store.getters.getOverallProgressProgramById(e)},getDoneCountByProgramId:function(e){return this.$nuxt.$store.getters.getDoneCountByProgramId(e)},getNextExerciseByProgramId:function(e){return this.$nuxt.$store.getters.getNextExerciseByProgramId(e)},getExercisetocompleteCountProgramById:function(e){return this.$nuxt.$store.getters.getExercisetocompleteCountProgramById(e)},getExercisecompletedCountProgramById:function(e){return this.$nuxt.$store.getters.getExercisecompletedCountProgramById(e)},printDeviceError:function(e,t,r,i){this.$analytics.logEvent("permission_error",{title:"errors."+e+"."+t.name.toLowerCase()+".title",kind:e}),console.error("Got device error",t),!t||"NotAllowedError"!==t.name&&"NotFoundError"!==t.name&&"denied"!=t.exception.state&&"DENIED"!=t.exception.state?this.showError(this.$t("errors.generic.title"),this.$t("errors.generic.description"),r,i):this.$root.$emit("showPermssionError",!0)},printDeviceErrorOLD:function(e,t,r,i){if(this.$analytics.logEvent("permission_error",{title:"errors."+e+"."+t.name.toLowerCase()+".title",kind:e}),console.error("Got device error",t),t.exception&&"mic"==e&&("denied"==t.exception.state||"DENIED"==t.exception.state))return t.name="DeniedError",void this.$root.$emit("showError",{title:this.$t("errors."+e+"."+t.name.toLowerCase()+".title"),error:this.$t("errors."+e+"."+t.name.toLowerCase()+".description"),hasretry:!0,click:function(){return $nuxt.$airlyn.openPermissionPanel().then((function(e){console.log("got openPermission Panel then",e,JSON.stringify(e))})).catch((function(e){console.log("got openPermission Panel catch",e,JSON.stringify(e))})).finally((function(){"function"==typeof i&&(console.log("dopo il setting riport cmq a inizio"),i())})),!0},resetEvent:i||function(){},retryBtn:"Settings"});!t||"NotAllowedError"!==t.name&&"NotFoundError"!==t.name?this.showError(this.$t("errors.generic.title"),this.$t("errors.generic.description"),r,i):this.showError(this.$t("errors."+e+"."+t.name.toLowerCase()+".title"),this.$t("errors."+e+"."+t.name.toLowerCase()+".description"),r,i)},manageMicError:function(e,t,r){this.printDeviceError("mic",e,t,r)},manageCamError:function(e,t,r){this.printDeviceError("cam",e,t,r)},manageMicCamError:function(e,t,r){this.printDeviceError("miccam",e,t,r)},showError:function(e,t,r,i){this.$root.$emit("showError",{title:e,error:t,hasretry:null!==r,click:r||function(){},resetEvent:i||function(){}})},swipeEvent:function(e){this.$root.$emit("swipe",e)},attachSwipeListener:function(){document.addEventListener("swiped-left",this.swipeEvent),document.addEventListener("swiped-right",this.swipeEvent)},detachSwipeListeners:function(){document.removeEventListener("swiped-left",this.swipeEvent),document.removeEventListener("swiped-right",this.swipeEvent)},fixWindowVariables:function(e){void 0===window[e]&&"undefined"!==window.top[e]&&(window[e]=window.top[e])}}),beforeMount:function(){var e=this;console.log("PRE loaded base Page"),console.log("fix loading variables"),["currentChallenge","currentExercise","currentVMToken","currentVMKey","currentVMUrl"].forEach((function(t){e.fixWindowVariables(t)})),this.setCurrentPage(this)},beforeDestroy:function(){this.detachSwipeListeners()},mounted:function(){var e=this;console.log("loaded base Page"),console.log("try Load index",this.name,this.dynamicTexts),this.dynamicTexts&&Object.keys(this.dynamicTexts).length>0&&Object.keys(this.dynamicTexts).map((function(t){e.$appConfiguration.getText(t).then((function(r){e.dynamicTexts[t]=r})).catch((function(r){e.dynamicTexts[t]=e.$t(e.name+"."+t)}))})),null!==this.getCurrentPagerHeight&&document.querySelector(".v-main__wrap > div.pager")&&(document.querySelector(".v-main__wrap > div.pager").style.height=this.getCurrentPagerHeight+"px"),this.$nextTick((function(){e.attachSwipeListener(),null===e.getCurrentPagerHeight&&document.querySelector(".v-main__wrap > div.pager")&&e.setCurrentPagerHeight(Math.max(document.querySelector(".v-main__wrap > div.pager").clientHeight,document.querySelector(".v-main__wrap > div.pager").offsetHeight))}))}}},928:function(e,t,r){"use strict";r.r(t);r(4),r(50);var i={props:{title:{type:String,default:"Info"},transition:{type:String,default:"dialog-bottom-transition"},contentclasses:{type:String,default:""},description:{type:String,default:"Info text"},infoImage:{type:String,default:null},showSuperTitle:{type:Boolean,default:!0},thumbInTitle:{type:Boolean,default:!0},show:{type:Boolean,default:!1}},data:function(){return{}},computed:{showDialog:function(){return this.show}},methods:{closeClick:function(e){this.$emit("close",e)}},mounted:function(){}},n=r(42),s=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:e.transition,scrollable:"","content-class":"infoDialog "+e.contentclasses},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t("fullpage-card",{scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{class:[(e.showSuperTitle?"with":"without")+"__supertitle",(e.thumbInTitle?"with":"without")+"__thumbInTitle"]},[e.showSuperTitle?t("div",{staticClass:"text-center supertitle"},[e._v("About")]):e._e(),e._v(" "),e.infoImage&&!0===e.thumbInTitle?t("img",{staticClass:"titleImage",attrs:{src:e.infoImage}}):e._e(),e._v(" "),t("div",{staticClass:"text-center infodialog__title",domProps:{innerHTML:e._s(e.title)}})])]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"text-center content"},[e.infoImage&&!1===e.thumbInTitle?t("img",{staticClass:"errorimage",attrs:{src:e.infoImage}}):e._e(),e._v(" "),t("span",{class:[e.contentclasses,"withdynamicTexts"],domProps:{innerHTML:e._s(e.description)}})])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{class:["pager"]},[t("v-btn",{attrs:{color:"nextvm",nuxt:""},on:{click:e.closeClick}},[e._t("closebtn",(function(){return[t("v-icon",[e._v("mdi-reload")]),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.$t("generic.done"))}})]}))],2)],1)]},proxy:!0}],null,!0)})],1)}),[],!1,null,null,null);t.default=s.exports;installComponents(s,{FullpageCard:r(220).default})},930:function(e,t,r){"use strict";r.r(t);r(316);var i="abort",n="progress",s="start",o="visibilitychange",a={name:"CountDown",props:{interval:{type:Number,default:1e3},timerLength:{type:Number,default:1e4},reverse:{type:Boolean,default:!1},now:{type:Function,default:function(){return Date.now()}},emits:{EVENT_ABORT:i,EVENT_END:"end",EVENT_PROGRESS:n,EVENT_START:s}},data:function(){return{counting:!1,totalMilliseconds:0,requestId:0,endTime:0,elapsed:0}},computed:{totalSeconds:function(){return Math.floor(this.totalMilliseconds/1e3)}},watch:{$props:{deep:!0,immediate:!0,handler:function(){this.totalMilliseconds=this.timerLength,this.endTime=this.now()+this.timerLength}}},mounted:function(){document.addEventListener(o,this.handleVisibilityChange)},beforeUnmount:function(){document.removeEventListener(o,this.handleVisibilityChange),this.pause()},methods:{restart:function(){this.totalMilliseconds=this.timerLength,this.endTime=this.now()+this.timerLength,this.elapsed=0,this.start()},start:function(){this.counting||(this.counting=!0,this.$emit(s),"visible"===document.visibilityState&&this.continue())},getElapsed:function(){return this.elapsed},continue:function(){var e=this;if(this.counting){var t=Math.min(this.totalMilliseconds,this.interval);if(t>0){var r,i;this.requestId=requestAnimationFrame((function n(s){r||(r=s),i||(i=s);var o=s-r;o>=t||o+(s-i)/2>=t?e.progress():e.requestId=requestAnimationFrame(n),i=s}))}else this.end()}},pause:function(){cancelAnimationFrame(this.requestId)},progress:function(){this.counting&&(this.totalMilliseconds-=this.interval,this.elapsed+=this.interval,this.totalMilliseconds>0&&this.$emit(n,{totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds,interval:this.interval,elapsed:this.elapsed}),this.continue())},abort:function(){this.counting&&(this.pause(),this.counting=!1,this.$emit(i))},end:function(){this.counting&&(this.pause(),this.counting=!1,this.$emit("end",{totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds,interval:this.interval,elapsed:this.elapsed}),this.totalMilliseconds=0)},update:function(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},handleVisibilityChange:function(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause()}}}},c=r(42),u=Object(c.a)(a,(function(){return(0,this._self._c)("div",{staticClass:"countdown_wrapper"})}),[],!1,null,null,null);t.default=u.exports},931:function(e,t,r){"use strict";r.r(t);r(316);var i={props:{value:{type:Number,default:0},exerciseSteps:{type:Number,default:1},startPercent:{type:Number,default:0},doneClass:{type:String,default:"done"},maxPercent:{type:Number,default:1},runningPercent:{type:Number,default:0}},computed:{primaryColor:function(){return $nuxt.$config.env.environment.indexOf("voicemed_")>-1?"#EC483F":"#848CE6"},exercisescount:function(){return this.exerciseSteps},currentExercise:function(){return this.value},currentPercent:function(){return this.runningPercent}},methods:{getRotation:function(e){return 0===e?"transform:rotate(0deg);":"transform:rotate("+360/this.exercisescount*e+"deg);"}}},n=r(42),s=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("div",{class:["donut_progress"]},[t("vc-donut",{attrs:{background:"#FFFFFF",foreground:"#848CE633",size:100,unit:"%",thickness:5,sections:[{label:"progress",value:e.currentPercent,color:e.primaryColor}],total:100,"start-angle":0,"auto-adjust-text-size":!0}},[e._t("inside")],2)],1)}),[],!1,null,null,null);t.default=s.exports},936:function(e,t,r){e.exports=r.p+"img/sine.8ad1fba.svg"},937:function(e,t,r){e.exports=r.p+"img/errorwifi.d845bd4.png"},938:function(e,t,r){e.exports=r.p+"img/error_execution.90c4571.png"},939:function(e,t,r){e.exports=r.p+"img/error_mic.86398f0.png"},940:function(e,t,r){e.exports=r.p+"img/error_noise.47fabbd.png"},941:function(e,t,r){e.exports=r.p+"img/error_wifi.95a69e8.png"},949:function(e,t,r){var i=r(991);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,r(135).default)("a34f83b6",i,!1,{sourceMap:!1})},953:function(e,t,r){"use strict";r.r(t);r(316);var i={props:{amplitude:{type:Number,default:!1},average:{type:Number,default:!1}},data:function(){return{bar1:0,bar2:0,bar3:0,threshold:1.2}},computed:{currentAverage:function(){if(!(this.average<15)){return Math.round(this.average/10)%2==1&&!0,Math.round(this.average)}},currentAmplitude:function(){if(this.amplitude<15)return this.bar1=0,this.bar2=0,void(this.bar3=0);Math.round(this.amplitude/10)%2==1?(this.bar1=Math.min(this.amplitude*this.threshold/2,10),this.bar2=Math.min(this.amplitude*this.threshold,60),this.bar3=Math.min(this.amplitude*this.threshold/2,10)):(this.bar1=Math.min(this.amplitude*this.threshold,60),this.bar2=Math.min(this.amplitude*this.threshold/2,10),this.bar3=Math.min(this.amplitude*this.threshold,60))}}},n=r(42),s=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mic-input",attrs:{"data-amplitude":e.currentAmplitude}},[t("div",{staticClass:"bar bar1",style:"height:"+e.bar1+"%;"}),e._v(" "),t("div",{staticClass:"bar bar2",style:"height:"+e.bar2+"%;"}),e._v(" "),t("div",{staticClass:"bar bar3",style:"height:"+e.bar3+"%;"})])}),[],!1,null,null,null);t.default=s.exports},954:function(e,t,r){"use strict";r.r(t);r(316);var i={props:{amplitude:{type:Number,default:!1},average:{type:Number,default:!1}},data:function(){return{bars:[],threshold:1.2}},mounted:function(){this.$set(this,"bars",[]);for(var e=0;e<this.maxBars;e++)this.bars.push(0)},computed:{maxBars:function(){return 13},currentAverage:function(){if(!(this.average<15)){return Math.round(this.average/10)%2==1&&!0,Math.round(this.average)}},currentAmplitude:function(){if(this.amplitude<15)for(var e=0;e<this.bars.length;e++)this.bars[e]=0;else{var t=this.amplitude*this.threshold;if(Math.round(this.amplitude/10)%2==1){var r=Math.min(t,60);this.bars[6]=r;for(e=0;e<6;e++){var i=[16*(e+1),Math.min(100,16*(e+2))],n=Math.random()*(i[0]-i[1])+i[1];this.bars[5-e]=Math.min(10,r*(n/100)),this.bars[7+e]=Math.min(10,r*(n/100))}}else{var s=t;this.bars[6]=Math.min(t/2,10);for(e=0;e<6;e++){var o=[16*(e+1),Math.min(100,16*(e+2))],a=100-(Math.random()*(o[0]-o[1])+o[1]);this.bars[5-e]=Math.min(60,s*(a/100)),this.bars[7+e]=Math.min(60,s*(a/100))}}}}}},n=r(42),s=Object(n.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"mic-input bigversion",attrs:{"data-amplitude":e.currentAmplitude}},e._l(e.bars,(function(r,i){return t("div",{key:"bar_"+i,class:["bar","bar"+i],style:"height:"+e.bars[i]+"%;"})})),0)}),[],!1,null,null,null);t.default=s.exports},955:function(e,t,r){"use strict";r.r(t);r(316),r(28),r(62);var i=r(937),n=r(938),s=r(939),o=r(940),a=r(941),c={props:{show:{type:Boolean,default:!1},error:{type:String,default:"error_restapi"},tries:{type:Number,default:0}},data:function(){return{phase:1,warnpopup:!1}},computed:{environment:function(){return $nuxt.$config.env.environment.indexOf("library")>-1?"library":"app"},showDialog:function(){return this.tries>=5&&(this.phase=2),this.show},errorImage:function(){return"error_restapi"==this.error?a:"incorrect_execution"==this.error?n:"no_audio"==this.error?s:"too_noise"==this.error?o:i},errorTitle:function(){return"error_restapi"==this.error||"incorrect_execution"==this.error||"no_audio"==this.error||"too_noise"==this.error?"completitionfailed."+this.error+".title":"completitionfailed.title_"+this.phase},errorMessage:function(){return"error_restapi"==this.error||"incorrect_execution"==this.error||"no_audio"==this.error||"too_noise"==this.error?"completitionfailed."+this.error+".message":"completitionfailed.msg_"+this.phase}},methods:{requestDownload:function(e){console.log("some one requests a download"),this.$emit("blobdownload",e)},closeClick:function(e){1!==this.phase?this.closeAnyWay(e):this.warnpopup=!0},closeAnyWay:function(e){this.$emit("close",e),$nuxt.$router.replace($nuxt.localePath("/home"))},nextClick:function(e){this.$emit("retry",e)}},mounted:function(){}},u=r(42),l=Object(u.a)(c,(function(){var e=this,t=e._self._c;return t("v-dialog",{staticStyle:{"z-index":"1001"},attrs:{persistent:"",fullscreen:"","hide-overlay":"",scrollable:"","content-class":"failedUploadPopup",id:"failedupload_popup"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t("v-card",{staticClass:"accountDeletion"},[t("v-card-text",{staticClass:"pa-4"},[t("div",{staticClass:"fullcard",staticStyle:{position:"relative"},attrs:{"data-currenterror":e.error}},[t("h1",{domProps:{innerHTML:e._s(e.$t(e.errorTitle))}}),e._v(" "),t("v-img",{attrs:{src:e.errorImage}}),e._v(" "),t("div",{staticClass:"withdownload_audio",domProps:{innerHTML:e._s(e.$t(e.errorMessage))}}),e._v(" "),t("div",{staticClass:"completition_downloadcontainer",staticStyle:{"min-height":"68px"}},[t("a",{staticClass:"download_audio_btn hidden",attrs:{href:"#",id:"error_downloader"},on:{click:e.requestDownload}},[t("v-icon",[e._v("mdi-download")]),e._v("\n            "+e._s(e.$t("completitionfailed.download_audio"))+"\n          ")],1)])],1)]),e._v(" "),t("v-card-actions",[1===e.phase&&"library"!==e.environment?t("v-btn",{attrs:{color:"backvm",text:"",nuxt:""},on:{click:e.closeClick}},[t("span",{domProps:{innerHTML:e._s(e.$t("generic.home"))}})]):e._e(),e._v(" "),1===e.phase?t("v-btn",{class:["nextvm","library"!==e.environment?"":"fullwidth"],on:{click:e.nextClick}},[t("span",{domProps:{innerHTML:e._s(e.$t("generic.retry"))}}),e._v(" \n        "),t("v-icon",[e._v("mdi-reload")])],1):e._e(),e._v(" "),2===e.phase?t("v-btn",{staticClass:"nextvm fullwidth",on:{click:e.closeClick}},[t("span",{domProps:{innerHTML:e._s(e.$t("generic.home"))}})]):e._e()],1)],1),e._v(" "),t("v-bottom-sheet",{attrs:{persistent:"","overlay-opacity":.9,"content-class":"failedBottomSheet"},model:{value:e.warnpopup,callback:function(t){e.warnpopup=t},expression:"warnpopup"}},[t("div",{staticClass:"bottomsheet completitionfailed"},[t("div",{staticClass:"text"},[e._v("\n        "+e._s(e.$t("completitionfailed.bottomsheet_msg"))+"\n      ")]),e._v(" "),t("div",{staticClass:"actions"},[t("v-btn",{class:["library"!==e.environment?"":"fullwidth"],attrs:{color:"nextvm",nuxt:""},on:{click:function(t){e.warnpopup=!1}}},[t("span",{domProps:{innerHTML:e._s(e.$t("generic.cancel"))}})]),e._v(" "),"library"!==e.environment?t("v-btn",{attrs:{color:"leavevm",text:"",nuxt:"",outlined:""},on:{click:e.closeAnyWay}},[t("span",{domProps:{innerHTML:e._s(e.$t("generic.home"))}})]):e._e(),e._v(" "),t("v-spacer")],1)])])],1)}),[],!1,null,null,null);t.default=l.exports},990:function(e,t,r){"use strict";r(949)},991:function(e,t,r){var i=r(134),n=r(320),s=r(936),o=i((function(e){return e[1]})),a=n(s);o.push([e.i,".sine_merger{background-image:url("+a+")}",""]),o.locals={},e.exports=o}}]);
//# sourceMappingURL=b055630.js.map