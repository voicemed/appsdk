{"version":3,"sources":["webpack:///./pages/ml/exerciseexecutor/noise.vue","webpack:///./pages/ml/exerciseexecutor/noise.vue?3ff5","webpack:///./pages/ml/exerciseexecutor/noise.vue?d6f8","webpack:///./mixins.js/basepage.js","webpack:///./components/countdown.vue","webpack:///./components/countdown.vue?cd31","webpack:///./components/countdown.vue?6c73","webpack:///./components/exerciseanimationprogress.vue","webpack:///./components/exerciseanimationprogress.vue?fb08","webpack:///./components/exerciseanimationprogress.vue?ee9d"],"names":["name","mixins","basepage","components","CountDownItem","beforeRouteLeave","to","from","next","document","querySelector","classList","remove","this","$closeStream","data","audioLevels","peakLevel","averageLevel","audioInput","exid","$route","params","id","programid","fromprogram","withindex","backto","bottomsheet","show","uploadProgress","passed","hasWarning","errorMessage","loading","finish","intervals","computed","_objectSpread","mapGetters","getExercises","getCurrentExercise","getAudioDevices","exercise","currentUploadProgress","perc","currentPercent","finalPerc","timer","timerLength","timerRest","getTitle","$t","replace","methods","exitStep","add","exerciseStepBack","retryNoise","setupAll","leaveMe","_this","$refs","noisecountdown","abort","$capacitor","isNativePlatform","$nuxt","$loading","start","$airlyn","removeAllListeners","stopRecording","finally","$router","push","localePath","audio","audioRecorder","stop","prevStep","_this2","map","interval","clearTimeout","e","back","nextStep","suffix","buildSuffix","length","type","$exerciseManager","kindHOLD","sendDataToRest","blob","_this3","Date","_userID","$useractions","retrieveID","file","File","lastModified","now","FormData","append","deviceInfo","JSON","stringify","headers","Authorization","window","currentVMToken","timeout","longTaskTimeout","onUploadProgress","progress","loaded","total","$axios","$post","$apiConstants","preNoiseCheck_v2","then","r","console","log","errorTitle","resultCode","message","$root","$emit","hasretry","title","error","leaveBtn","click","$gtag","resetEvent","catch","$analytics","logEvent","$captureException","$nextTick","gotData","buffers","_this4","exportMonoWAV","gotDataNative","base64","mimetype","$base64ToBlob","_this5","value","recordDataBase64","mimeType","manageMicError","getBuffers","timerChange","totalSeconds","timerEnd","countdownrunning","countDownTimer","_this6","setTimeout","restart","initCountDown","startTimer","clear","record","initCountDownNative","_this7","addListener","info","peakPower","averagePower","startRecording","useAGC","initMicrophone","stream","inputPoint","audioContext","createGain","realAudioInput","createMediaStreamSource","connect","disconnect","convertToMono","$Recorder","worker","$worker","createRecorderWorker","input","splitter","createChannelSplitter","merger","createChannelMerger","_this8","navigator","mediaDevices","getSupportedConstraints","AudioContext","$captureMessage","join","$enumerateMediaDevices","$initAudio","mounted","_this9","$deviceInfo","getInfo","setDeviceCode","checkMicPerm","result","exception","component","_vm","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","_v","_s","proxy","directives","rawName","expression","domProps","_e","model","callback","$$v","staticStyle","ref","on","$set","class","installComponents","Exerciseanimationprogress","default","FullpageCard","transition","mode","css","beforeEnter","el","contains","startPoint","$anime","set","scale","opacity","translateX","enter","done","targets","duration","easing","complete","leave","translateY","afterLeave","hasBack","hasNext","hasInfo","getCurrentPagerHeight","isVoicemed","$config","env","environment","indexOf","isAirlyn","nuxtloading","defaultHomeUrl","mapActions","setCurrentPage","setCurrentPagerHeight","finishExercise","closeExercise","suffixes","programCheck","hasJoinedProgramById","$store","getters","getProgramJoinedAtById","getProgramById","getOverallProgressProgramById","getDoneCountByProgramId","getNextExerciseByProgramId","getExercisetocompleteCountProgramById","getExercisecompletedCountProgramById","printDeviceError","prefix","clickEvent","toLowerCase","state","showError","printDeviceErrorOLD","openPermissionPanel","retryBtn","manageCamError","manageMicCamError","swipeEvent","attachSwipeListener","addEventListener","detachSwipeListeners","removeEventListener","fixWindowVariables","variable","top","beforeMount","forEach","item","beforeDestroy","dynamicTexts","Object","keys","text","$appConfiguration","getText","style","height","Math","max","clientHeight","offsetHeight","EVENT_ABORT","EVENT_PROGRESS","EVENT_START","EVENT_VISIBILITY_CHANGE","props","Number","reverse","Boolean","Function","emits","EVENT_END","counting","totalMilliseconds","requestId","endTime","elapsed","floor","watch","$props","deep","immediate","handler","handleVisibilityChange","beforeUnmount","pause","visibilityState","continue","getElapsed","delay","min","init","prev","requestAnimationFrame","step","range","end","cancelAnimationFrame","update","exerciseSteps","startPercent","doneClass","String","maxPercent","runningPercent","primaryColor","exercisescount","currentExercise","getRotation","index","_t"],"mappings":"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","file":"c9eae17.js","sourcesContent":["\nimport basepage from \"~/mixins.js/basepage\";\nimport CountDownItem from \"~/components/countdown\";\nimport {mapGetters} from 'vuex'\n\nconst timerMax = 5;\n\nexport default {\n  name: 'ml_start',\n  mixins: [basepage],\n  components: {\n    CountDownItem\n  },\n  beforeRouteLeave(to, from, next) {\n    document.querySelector('.nextvm').classList.remove('pumpAnimation');\n    this.$closeStream();\n    next();\n  },\n  data() {\n    return {\n      audioLevels: {\n        peakLevel: 0,\n        averageLevel: 0\n      },\n      audioInput: {},\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || false),\n      backto: (this.$route.params.backto || false),\n      \"name\": \"ml_start\",\n      \"deviceInfo\": \"\",\n      \"hasBack\": true,\n      \"hasNext\": true,\n      \"timer\": 0,\n      \"countdownrunning\": false,\n      \"startTimer\": false,\n      'audio': {\n        \"audioContext\": null,\n        \"audioInput\": null,\n        \"realAudioInput\": null,\n        \"inputPoint\": null,\n        \"audioRecorder\": null,\n        \"stereo\": false\n      },\n      bottomsheet: {\n        show: false\n      },\n      uploadProgress: 0,\n      passed: false,\n      hasWarning: false,\n      errorMessage: \"\",\n      loading: false,\n      finish: false,\n      intervals: []\n\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getExercises: 'getExercises',\n      getCurrentExercise: 'getCurrentExercise',\n      getAudioDevices: 'getAudioDevices'\n    }),\n    exercise() {\n      return this.getCurrentExercise\n    },\n\n    currentUploadProgress: function () {\n      const perc = (this.uploadProgress) * 100;\n      if (perc > 100) {\n        return 100;\n      }\n      return perc;\n    },\n    currentPercent() {\n      const perc = ((this.timer / this.timerLength) * 100) * 75 / 100;\n      const updPerc = this.currentUploadProgress * 25 / 100;\n      const finalPerc = perc + updPerc\n      if (finalPerc > 100) {\n        return 100;\n      }\n      return finalPerc;\n    },\n    timerLength() {\n      return timerMax\n    },\n    timerRest() {\n      return timerMax - this.timer\n    },\n    getTitle() {\n      let _title = this.$t(this.name + '.title')\n      return _title.replace(\"%s\", this.timer);\n    }\n  },\n  methods: {\n    exitStep() {\n      if (document.querySelector('#__nuxt')) {\n        document.querySelector('#__nuxt').classList.add('quit');\n      }\n      this.exerciseStepBack()\n    },\n    retryNoise() {\n      this.bottomsheet.show = false;\n      this.setupAll();\n      return true;\n    },\n    leaveMe() {\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        $nuxt.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          if (document.querySelector('#__nuxt')) {\n            document.querySelector('#__nuxt').classList.add('quit');\n          }\n          this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        if (document.querySelector('#__nuxt')) {\n          document.querySelector('#__nuxt').classList.add('quit');\n        }\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"\"));\n      }\n\n    },\n    prevStep() {\n      this.intervals.map((interval) => {\n        try {\n          clearTimeout(interval)\n        } catch (e) {\n        }\n      })\n      this.$refs.noisecountdown.abort();\n      //Se stai registrando devi interrompere tutto.\n      if (this.$capacitor.isNativePlatform()) {\n        this.$nuxt.$loading.start();\n        this.$airlyn.stopRecording().finally(() => {\n          this.$nuxt.$loading.finish();\n          this.$router.back();\n        })\n      } else {\n        this.$closeStream();\n        if (this.audio && this.audio.audioRecorder) {\n          this.audio.audioRecorder.stop();\n        }\n        this.$router.back();\n      }\n\n\n    },\n    nextStep() {\n      let suffix = this.buildSuffix();\n      if(suffix.length>0) {\n        suffix = \"/\" + suffix\n      }\n      if (this.exercise.type === this.$exerciseManager.kindHOLD) {\n\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runnersilent\" + suffix));\n      } else {\n        this.$router.push($nuxt.localePath(\"/ml/exercises/\" + this.exid + \"/runner\" + suffix));\n      }\n    },\n    sendDataToRest(blob) {\n      /*\n            var url = (window.URL || window.webkitURL).createObjectURL(blob);\n            var link = document.getElementById(\"downloader\");\n            link.href = url;\n            link.download = 'output_noise.wav';\n            link.click();\n      */\n      this.passed = false;\n      this.loading = true;\n      this.$nuxt.$loading.start()\n      //Axios send rest API...\n      const today = new Date();\n      const _userID = this.$useractions.retrieveID();\n      const fileName = 'soundcheck_' + _userID + '.wav'\n\n      const file = new File([blob], fileName, {type: 'audio/x-wav', lastModified: Date.now()})\n      const params = new FormData();\n      params.append('audio', file, file.name);\n      params.append('device_code', this.deviceInfo)\n      if (this.audioInput) {\n        params.append('device_info', JSON.stringify(this.audioInput));\n      }\n      const headers = {\n        Authorization: 'Bearer '+window.currentVMToken,\n        timeout: this.$exerciseManager.longTaskTimeout,\n        onUploadProgress: (progress) => {\n          this.uploadProgress = progress.loaded / progress.total;\n        }\n      }\n      this.$axios.$post(($nuxt.$apiConstants.preNoiseCheck_v2),\n        params,\n        headers,\n      ).then((r) => {\n        console.log('noiseCheck result', r)\n        this.uploadProgress = 1;\n        this.passed = false;\n        this.hasWarning = false;\n        this.errorMessage = \"\";\n        let errorTitle = \"\";\n        let errorMessage = \"\";\n\n        if (r && r.resultCode) {\n          /*\n          QUIET_STATUS_CODE = 308\n          QUIET_MSG = 'Wonderful! Your recording environment sounds extremely quiet.'\n\n          MODERATE_STATUS_CODE = 309\n          MODERATE_MSG = 'Not bad! But your recording environment sounds like is becoming noisy, be careful.'\n\n          NOISY_STATUS_CODE = 310\n          NOISY_MSG = 'Too noisy! It\\'s better for you to change the environment. Try also to close doors and windows.'\n          Se l'analisi è andata a buon fine, altrimenti uno di questi:\n          NO_SIGNAL_ERROR_CODE = 301\n          NO_SIGNAL_MSG = 'No signal was detected.'\n\n          EMPTY_FILE_ERROR_CODE = 307\n          EMPTY_FILE_MSG = 'Your recording is empty! Please contact the assistance.'\n           */\n          if(r.resultCode>310) {\n            this.passed = true;\n          } else if(r.resultCode>307) {\n            this.passed = true;\n            this.hasWarning = true;\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          } else {\n            this.passed = false;\n            errorTitle = this.$t('errors.noise.title');\n            this.errorMessage = r.message || this.$t('errors.noise.description');\n          }\n        } else {\n          this.passed = false;\n          errorTitle = this.$t('errors.noise.title');\n          errorMessage = this.$t('errors.noise.description');\n        }\n        if (this.passed === false) {\n          this.$root.$emit('showError', {\n            hasretry: true,\n            title: errorTitle,\n            error: errorMessage,\n            leaveBtn: this.$t('generic.startanyway'),\n            click: () => {\n              this.setupAll();\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseReCheck',\n                'event_category': 'Exercises',\n              })\n              return true;\n            },\n            resetEvent: () => {\n              this.passed = true;\n              this.$gtag('event', 'click', {\n                'event_label': 'NoiseStartAnyWay',\n                'event_category': 'Exercises',\n              })\n              //this.$root.$emit('nextstep');\n              this.bottomsheet.show = true;\n              return true;\n            }\n          });\n        }\n      }).catch((e) => {\n        console.log('noiseCheck error', e)\n        console.error(\"Errore invio api [pre_noise_check]:\", e);\n        this.$analytics.logEvent(\"error\", {\n          \"title\":'noise check error'\n        });\n        this.$captureException(e);\n        this.$root.$emit('showError', {\n          hasretry: false,\n          title: \"An error has occurred\",\n          error: \"Sorry an issue with the VoiceServer has occurred\",\n          click: () => {\n            this.setupAll();\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseReCheck',\n              'event_category': 'Exercises',\n            })\n            return true;\n          },\n          resetEvent: () => {\n            this.passed = true;\n            this.$gtag('event', 'click', {\n              'event_label': 'NoiseStartAnyWay',\n              'event_category': 'Exercises',\n            })\n            //this.$root.$emit('nextstep');\n            this.bottomsheet.show = true;\n            return true;\n          }\n        });\n      }).finally(() => {\n        if (this.passed) {\n          //this.$root.$emit('nextstep'); > non emettere il next step.\n          this.$root.$emit('disableNext', false);\n          this.$nextTick(() => {\n            document.querySelector('.nextvm').classList.add('pumpAnimation')\n          });\n        }\n        this.loading = false;\n        this.finish = true;\n        this.$nuxt.$loading.finish();\n      });\n    },\n    gotData(buffers) {\n      console.log('got buffers');\n      this.$nuxt.$loading.finish();\n      this.audio.audioRecorder.exportMonoWAV((blob) => {\n        this.$closeStream(); //Ferma gli stream di registrazione non servono più\n        this.sendDataToRest(blob)\n      });\n    },\n    gotDataNative(base64, mimetype) {\n      console.log('ready to store file for sending...', mimetype);\n      const blob = this.$base64ToBlob(base64, mimetype);\n      this.sendDataToRest(blob)\n    },\n    stopRecording() {\n\n      this.$nuxt.$loading.start();\n      this.loading = true;\n      if (this.$capacitor.isNativePlatform()) {\n        console.log('request stop recording!')\n        this.$airlyn.removeAllListeners();\n        this.$airlyn.stopRecording().then((r) => {\n          if (r && r.value) {\n            this.gotDataNative(r.value.recordDataBase64, r.value.mimeType);\n          } else {\n            console.error('(catch)Errore stop :', e);\n            this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n              this.exitStep()\n              return true;\n            });\n          }\n        }).catch((e) => {\n          console.error('(catch)Errore stop :', e);\n          this.manageMicError({\"name\": \"Cannot retrieve Recording\", error: e}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }).finally(() => {\n          this.$nuxt.$loading.finish();\n        })\n      } else {\n        console.log('request stop web')\n        this.audio.audioRecorder.stop();\n        console.log('retrieve buffers')\n        this.audio.audioRecorder.getBuffers(this.gotData);\n      }\n    },\n    timerChange(progress) {\n      this.timer = this.timerLength - progress.totalSeconds;\n    },\n    timerEnd() {\n      console.log('timer finito, ', this.timer);\n      this.countdownrunning = false;\n      this.loading = true;\n      this.stopRecording();\n    },\n    countDownTimer() {\n      if (this.countdownrunning === false) {\n        this.intervals.push(setTimeout(() => {\n          this.$nextTick(() => {\n            console.log('avvia tutto');\n            this.countdownrunning = true;\n            console.log(this.$refs);\n            this.$refs.noisecountdown.restart();\n          });\n        }, 1000));\n        return;\n      }\n    },\n    initCountDown() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      this.countDownTimer();\n    },\n    initCountDownNative() {\n      this.timer = 0;\n      this.uploadProgress = 0;\n      this.countdownrunning = false;\n      this.startTimer = true;\n      $nuxt.$airlyn.addListener('airlynUpdateMeters', (info) => {\n//console.log('got meters',/*info.peakPowers, */ $nuxt.$normalizeLevels(info.peakPowers));\n        //console.log('got meters', info);\n        if (info) {\n          if (info.peakPower) {\n            this.audioLevels.peakLevel = info.peakPower\n          }\n          if (info.averagePower) {\n            this.audioLevels.averageLevel = info.averagePower\n          }\n        }\n\n      });\n      $nuxt.$airlyn.addListener('airlynUpdateMic', (info) => {\n        console.log('got mic INFO', info);\n        this.audioInput = info;\n      });\n\n      this.$airlyn.startRecording({useAGC: true}).then((r) => {\n        console.log('start recording...', r);\n        if (r && r.value === true) {\n          this.countDownTimer();\n        } else {\n          console.error('(then)Errore start :', r);\n          this.manageMicError({\"name\": \"Cannot start Recording\"}, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error('(catch)Errore start :', e);\n        this.manageMicError({\"name\": \"Cannot start Recording\", error: e}, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n\n    },\n    initMicrophone(stream) {\n      this.audio.inputPoint = this.audio.audioContext.createGain();\n      this.audio.realAudioInput = this.audio.audioContext.createMediaStreamSource(stream);\n      this.audio.audioInput = this.audio.realAudioInput;\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.realAudioInput.disconnect();\n      this.audio.audioInput = this.convertToMono(this.audio.realAudioInput);\n      this.audio.audioInput.connect(this.audio.inputPoint);\n      this.audio.audioRecorder = new this.$Recorder(this.audio.inputPoint, {worker: this.$worker.createRecorderWorker()});\n\n      /*\n      this.audio.audioRecorder.clear();\n      this.audio.audioRecorder.record();\n      */\n      this.initCountDown()\n    },\n    convertToMono(input) {\n      var splitter = this.audio.audioContext.createChannelSplitter(2);\n      var merger = this.audio.audioContext.createChannelMerger(2);\n      input.connect(splitter);\n      splitter.connect(merger, 0, 0);\n      splitter.connect(merger, 0, 1);\n      return merger;\n    },\n    setupAll() {\n      this.loading = false;\n      this.finish = false;\n      this.$closeStream();\n      if (this.$capacitor.isNativePlatform()) {\n        this.timer = 0\n        this.countdownrunning = false;\n        this.initCountDownNative();\n      } else {\n        let message = [];\n        console.log(JSON.stringify(this.getAudioDevices));\n        console.log(navigator.mediaDevices.getSupportedConstraints());\n        message.push(\"Ready to record Audio\");\n        message.push(JSON.stringify(this.getAudioDevices));\n        message.push(\"Supported Constraints:\");\n        message.push(JSON.stringify(navigator.mediaDevices.getSupportedConstraints()));\n        if (null == this.audio.audioContext) {\n          this.audio.audioContext = new AudioContext();\n        }\n        this.$captureMessage(message.join(\"\\n \"));\n        //Debug mode - enumerate device and store info on Sentry:\n        this.$enumerateMediaDevices().then((mediaDevices) => {\n          console.log('got devices', mediaDevices);\n          return this.$initAudio(mediaDevices).then((stream) => {\n            console.log(stream);\n            window.stream = stream;\n            if (null == this.audio.audioContext) {\n              this.audio.audioContext = new AudioContext();\n            }\n            this.timer = 0\n            this.countdownrunning = false;\n            this.initMicrophone(stream)\n          });\n        }).catch((e) => {\n          console.error('errore init microfono non gestito', e);\n          this.$captureException(e);\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n\n        })\n      }\n    }\n  },\n  mounted() {\n    this.$root.$emit('showPager', {\"show\": true});\n    this.$deviceInfo.getInfo().then((r) => {\n      this.deviceInfo = r;\n      this.$exerciseManager.setDeviceCode(r);\n    });\n    if (this.$capacitor.isNativePlatform()) {\n      this.$closeStream();\n      this.$airlyn.checkMicPerm().then((r) => {\n        console.log('Permessi al microfono garantiti?', r, JSON.stringify(r));\n        if (r && r.result === true) {\n          console.log('permessi OK!');\n        } else {\n          const e = {\n            \"name\": \"NotAllowedError\",\n            exception: r\n          }\n          this.manageMicError(e, null, function () {\n            this.exitStep()\n            return true;\n          });\n        }\n      }).catch((e) => {\n        console.error(\"Permission request fails\", e)\n        this.manageMicError({\n          \"name\": \"NotAllowedError\",\n          exception: e\n        }, null, function () {\n          this.exitStep()\n          return true;\n        });\n      });\n    }\n    this.$nextTick(() => {\n      this.$root.$emit('showPager', {\"show\": true});\n      this.$root.$emit('setNextText', this.$t('generic.start_chevron'));\n      this.$root.$emit('disableNext', true);\n    })\n    this.intervals.push(setTimeout(() => {\n      this.$nextTick(() => {\n        this.setupAll();\n      });\n    }, 700));\n  }\n}\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./noise.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./noise.vue?vue&type=template&id=5942f9b2\"\nimport script from \"./noise.vue?vue&type=script&lang=js\"\nexport * from \"./noise.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {Exerciseanimationprogress: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/exerciseanimationprogress.vue').default,FullpageCard: require('/Users/francescolotruglio/Lavori/VoiceMed/VoiceMedSdk-Sources/voicemed-layoutsdk/components/fullpage-card.vue').default})\n","import {mapGetters, mapActions} from 'vuex'\n\nexport default {\n  name: 'basePage',\n  transition: {\n    name: 'slide',\n    mode: 'out-in',\n    css: false,\n    beforeEnter(el) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime.set(el, {\n        scale: 1,\n        opacity: 0,\n        translateX: startPoint\n      })\n    },\n    enter(el, done) {\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '-100%' : '100%';\n      this.$anime({\n        targets: el,\n        opacity: [0, 1],\n        translateX: [startPoint, \"0\"],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      })\n    },\n    leave(el, done) {\n      if (document.querySelector('#__nuxt').classList.contains('quit')) {\n        this.$anime({\n          targets: el,\n          /*opacity: [1, 0],*/\n          translateY: [0, '100%'],\n          duration: 500,\n          easing: 'easeInOutSine',\n          complete: done\n        });\n        return\n      }\n      const startPoint = document.querySelector('#__nuxt').classList.contains('back') ? '100%' : '-100%';\n      this.$anime({\n        targets: el,\n        opacity: [1, 0],\n        translateX: [\"0\", startPoint],\n        duration: 500,\n        easing: 'easeInOutSine',\n        complete: done\n      });\n    },\n    afterLeave(el) {\n      document.querySelector('#__nuxt').classList.remove('quit');\n      document.querySelector('#__nuxt').classList.remove('back');\n    }\n  },\n  data() {\n    return {\n      \"name\": \"basePage\",\n      exid: (this.$route.params.id),\n      programid: (this.$route.params.fromprogram || false),\n      withindex: (this.$route.params.withindex || -1),\n      backto: (this.$route.params.backto || false),\n      hasBack: false,\n      hasNext: false,\n      hasInfo: false\n    }\n  },\n  computed: {\n    ...mapGetters({\n      getCurrentPagerHeight: 'getCurrentPagerHeight'\n    }),\n    isVoicemed() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_') > -1\n    },\n    isAirlyn() {\n      return $nuxt.$config.env.environment.indexOf('voicemed_') < 0\n    },\n    nuxtloading() {\n      return $nuxt.$loading.loading\n    },\n    defaultHomeUrl() {\n      //We know that we can customize the opening url:\n      return \"/\";\n      if (this.isAirlyn) {\n        return \"/\";\n      }\n      if (this.isVoicemed) {\n        return \"/\";\n      }\n    }\n  },\n  methods: {\n    ...mapActions({\n      setCurrentPage: 'setCurrentPage',\n      setCurrentPagerHeight: 'setCurrentPagerHeight'\n    }),\n    exerciseStepBack() {\n      console.log('exit test', this.backto, this.programid)\n      if (this.backto == \"standalone\" || this.backto == \"challengemode\") {\n        $nuxt.$airlyn.finishExercise({\"reason\": 'user-cancelled', \"result\": {}}).finally(() => {\n          console.log('exercise finished by user')\n        });\n        $nuxt.$airlyn.closeExercise().finally(() => {\n          console.log('exercise closed, success')\n        });\n        return\n      }\n      if (this.backto == 'today') {\n        $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        return\n      }\n      if (this.backto == 'discovery') {\n        $nuxt.$router.replace($nuxt.localePath(\"/home\"));\n        return\n      }\n      if (this.programid) {\n        if (this.programid == \"-1\" || this.programid == -1 || this.programid == \"false\" || this.programid == false) {\n          $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n        } else {\n          $nuxt.$router.replace($nuxt.localePath(\"/ml/programs/\" + this.programid));\n        }\n        return\n      }\n\n      $nuxt.$router.replace($nuxt.localePath(\"/user/today\"));\n    },\n    buildSuffix() {\n      let suffixes = [];\n      const programCheck = this.programid ? this.programid : false;\n      suffixes.push(programCheck !== '-1' ? programCheck : false);\n      suffixes.push(this.withindex ? this.withindex : \"-1\")\n      suffixes.push(this.backto ? this.backto : false)\n      return suffixes.join(\"/\")\n    }, hasJoinedProgramById(id) {\n      return this.$nuxt.$store.getters.hasJoinedProgramById(id)\n    },\n    getProgramJoinedAtById(id) {\n      return this.$nuxt.$store.getters.getProgramJoinedAtById(id)\n    },\n    getProgramById(id) {\n      return this.$nuxt.$store.getters.getProgramById(id)\n    },\n    getOverallProgressProgramById(id) {\n      return this.$nuxt.$store.getters.getOverallProgressProgramById(id)\n    },\n    getDoneCountByProgramId(id) {\n      return this.$nuxt.$store.getters.getDoneCountByProgramId(id)\n    },\n    getNextExerciseByProgramId(id) {\n      return this.$nuxt.$store.getters.getNextExerciseByProgramId(id)\n    },\n    getExercisetocompleteCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisetocompleteCountProgramById(id)\n    },\n    getExercisecompletedCountProgramById(id) {\n      return this.$nuxt.$store.getters.getExercisecompletedCountProgramById(id)\n    },\n    printDeviceError(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\" || error.exception.state == \"denied\" || error.exception.state == \"DENIED\")) {\n        this.$root.$emit('showPermssionError', true)\n        return\n      }\n\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    printDeviceErrorOLD(prefix, error, clickEvent, resetEvent) {\n      this.$analytics.logEvent(\"permission_error\", {\n        \"title\": 'errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\",\n        \"kind\": prefix\n      });\n      console.error('Got device error', error)\n      if (error.exception && prefix == \"mic\") {\n        if (error.exception.state == \"denied\" || error.exception.state == \"DENIED\") {\n          error.name = \"DeniedError\";\n          this.$root.$emit('showError', {\n            title: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n            error: this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n            hasretry: true,\n            click: function () {\n              $nuxt.$airlyn.openPermissionPanel().then((r) => {\n                console.log('got openPermission Panel then', r, JSON.stringify(r))\n              }).catch((e) => {\n                console.log('got openPermission Panel catch', e, JSON.stringify(e))\n              }).finally(() => {\n                //esegui comunque il reset event...\n                if (typeof resetEvent == 'function') {\n                  console.log('dopo il setting riport cmq a inizio')\n                  resetEvent()\n                }\n              })\n              return true\n            },\n            resetEvent: resetEvent || function () {\n            },\n            retryBtn: \"Settings\"\n          });\n          return\n        }\n      }\n      if (error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\")) {\n        //Permission error\n        this.showError(\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".title\"),\n          this.$t('errors.' + prefix + \".\" + error.name.toLowerCase() + \".description\"),\n          clickEvent,\n          resetEvent\n        );\n        return\n      }\n      this.showError(\n        this.$t('errors.generic.title'),\n        this.$t('errors.generic.description'),\n        clickEvent,\n        resetEvent\n      );\n    },\n    manageMicError(e, clickEvent, resetEvent) {\n      this.printDeviceError('mic', e, clickEvent, resetEvent);\n    },\n    manageCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('cam', e, clickEvent, resetEvent);\n    },\n    manageMicCamError(e, clickEvent, resetEvent) {\n      this.printDeviceError('miccam', e, clickEvent, resetEvent);\n    },\n    showError(title, error, clickEvent, resetEvent) {\n      this.$root.$emit('showError', {\n        title: title,\n        error: error,\n        hasretry: clickEvent !== null ? true : false,\n        click: clickEvent || function () {\n        },\n        resetEvent: resetEvent || function () {\n        }\n      });\n    },\n    swipeEvent(e) {\n      //console.log(e.target); // element that was swiped\n      //console.log(e.detail); // see event data below\n      this.$root.$emit(\"swipe\", e);\n    },\n    attachSwipeListener() {\n      document.addEventListener('swiped-left', this.swipeEvent);\n      document.addEventListener('swiped-right', this.swipeEvent);\n    },\n    detachSwipeListeners() {\n      document.removeEventListener('swiped-left', this.swipeEvent);\n      document.removeEventListener('swiped-right', this.swipeEvent);\n    },\n    fixWindowVariables(variable) {\n      if (typeof window[variable] === 'undefined') {\n        if (window.top[variable] !== 'undefined') {\n          window[variable] = window.top[variable];\n        }\n      }\n    }\n  },\n  beforeMount() {\n    console.log('PRE loaded base Page')\n\n    console.log('fix loading variables');\n      ['currentChallenge','currentExercise', 'currentVMToken', 'currentVMKey', 'currentVMUrl'].forEach((item) => {\n      this.fixWindowVariables(item);\n    })\n\n    this.setCurrentPage(this);\n  },\n  beforeDestroy() {\n    this.detachSwipeListeners();\n  },\n  mounted() {\n    console.log('loaded base Page')\n    //Init Preferences if app is native:\n    console.log('try Load index', this.name, this.dynamicTexts);\n    if (this.dynamicTexts && Object.keys(this.dynamicTexts).length > 0) {\n      Object.keys(this.dynamicTexts).map((text) => {\n        this.$appConfiguration.getText(text).then((r) => {\n          this.dynamicTexts[text] = r;\n        }).catch((e) => {\n          this.dynamicTexts[text] = this.$t(this.name + '.' + text);\n        })\n      })\n    }\n    if (this.getCurrentPagerHeight !== null && document.querySelector('.v-main__wrap > div.pager')) {\n      document.querySelector('.v-main__wrap > div.pager').style.height = this.getCurrentPagerHeight + \"px\";\n    }\n    this.$nextTick(() => {\n      //Start swipe features:\n      this.attachSwipeListener();\n      if (this.getCurrentPagerHeight === null) {\n        if (document.querySelector('.v-main__wrap > div.pager')) {\n          this.setCurrentPagerHeight(Math.max(document.querySelector('.v-main__wrap > div.pager').clientHeight, document.querySelector('.v-main__wrap > div.pager').offsetHeight));\n        }\n      }\n    });\n  }\n\n}\n","\nconst MILLISECONDS_SECOND = 1000;\nconst EVENT_ABORT = 'abort';\nconst EVENT_END = 'end';\nconst EVENT_PROGRESS = 'progress';\nconst EVENT_START = 'start';\nconst EVENT_VISIBILITY_CHANGE = 'visibilitychange';\n\nexport default {\n  name: \"CountDown\",\n  props: {\n    interval: {\n      type: Number,\n      default: 1000\n    },\n    timerLength: {\n      type: Number,\n      default: 10000\n    },\n    reverse: {\n      type: Boolean,\n      default: false\n    },\n    now: {\n      type: Function,\n      default: () => Date.now(),\n    },\n    emits: {\n      EVENT_ABORT,\n      EVENT_END,\n      EVENT_PROGRESS,\n      EVENT_START\n    }\n  },\n  data() {\n    return {\n      counting: false,\n      totalMilliseconds: 0,\n      requestId: 0,\n      endTime: 0,\n      elapsed: 0\n    }\n  },\n  computed: {\n    totalSeconds() {\n      return Math.floor(this.totalMilliseconds / MILLISECONDS_SECOND);\n    }\n  },\n  watch: {\n    $props: {\n      deep: true,\n      immediate: true,\n      handler() {\n        this.totalMilliseconds = this.timerLength;\n        this.endTime = this.now() + this.timerLength;\n        //this.start();\n      }\n    },\n  },\n  mounted() {\n    document.addEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n  },\n\n  beforeUnmount() {\n    document.removeEventListener(EVENT_VISIBILITY_CHANGE, this.handleVisibilityChange);\n    this.pause();\n  },\n  methods: {\n    restart() {\n      this.totalMilliseconds = this.timerLength;\n      this.endTime = this.now() + this.timerLength;\n      this.elapsed = 0;\n      this.start();\n    },\n    start() {\n      if (this.counting) {\n        return;\n      }\n      this.counting = true;\n      this.$emit(EVENT_START);\n      if (document.visibilityState === 'visible') {\n        this.continue();\n      }\n    },\n    getElapsed() {\n      return this.elapsed;\n    },\n    continue() {\n      if (!this.counting) {\n        return;\n      }\n      const delay = Math.min(this.totalMilliseconds, this.interval);\n      if (delay > 0) {\n        let init;\n        let prev;\n        const step = (now) => {\n          if (!init) {\n            init = now;\n          }\n          if (!prev) {\n            prev = now;\n          }\n          const range = now - init;\n          if (range >= delay || range + ((now - prev) / 2) >= delay) {\n            this.progress();\n          } else {\n            this.requestId = requestAnimationFrame(step);\n          }\n          prev = now;\n        };\n        this.requestId = requestAnimationFrame(step);\n      } else {\n        this.end();\n      }\n    },\n    pause() {\n      cancelAnimationFrame(this.requestId);\n    },\n    progress() {\n      if (!this.counting) {\n        return;\n      }\n      this.totalMilliseconds -= this.interval;\n      this.elapsed += this.interval;\n      if (this.totalMilliseconds > 0) {\n        this.$emit(EVENT_PROGRESS, {\n          totalSeconds: this.totalSeconds,\n          totalMilliseconds: this.totalMilliseconds,\n          interval: this.interval,\n          elapsed: this.elapsed\n        });\n      }\n      this.continue();\n    },\n    abort() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_ABORT);\n    },\n    end() {\n      if (!this.counting) {\n        return;\n      }\n      this.pause();\n      this.counting = false;\n      this.$emit(EVENT_END, {\n        totalSeconds: this.totalSeconds,\n        totalMilliseconds: this.totalMilliseconds,\n        interval: this.interval,\n        elapsed: this.elapsed\n      });\n      this.totalMilliseconds = 0;\n    },\n    update() {\n      if (this.counting) {\n        this.totalMilliseconds = Math.max(0, this.endTime - this.now());\n      }\n    },\n    handleVisibilityChange() {\n      switch (document.visibilityState) {\n        case 'visible':\n          this.update();\n          this.continue();\n          break;\n        case 'hidden':\n          this.pause();\n          break;\n        default:\n      }\n    }\n  }\n\n\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./countdown.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./countdown.vue?vue&type=template&id=e4d0548a\"\nimport script from \"./countdown.vue?vue&type=script&lang=js\"\nexport * from \"./countdown.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n  export default {\n    props: {\n      value : {\n        type:Number,\n        default:0\n      },\n      exerciseSteps:{\n        type:Number,\n        default:1\n      },\n      startPercent: {\n        type:Number,\n        default: 0\n      },\n      doneClass: {\n        type:String,\n        default:'done'\n      },\n      maxPercent : {\n        type:Number,\n        default: 1\n      },\n      runningPercent: {\n        type:Number,\n        default: 0\n      }\n    },\n    computed : {\n      primaryColor() {\n        return $nuxt.$config.env.environment.indexOf('voicemed_')>-1?\"#EC483F\":\"#848CE6\";\n      },\n      exercisescount() {\n        return this.exerciseSteps\n      },\n      currentExercise() {\n        return this.value\n      },\n      currentPercent() {\n        return this.runningPercent\n      }\n    },\n    methods: {\n      getRotation(index) {\n        if(index === 0) {\n          return \"transform:rotate(0deg);\";\n        }\n        //Get deg for position\n        const angles = 360/(this.exercisescount)*(index);\n        return \"transform:rotate(\"+angles+\"deg);\";\n      },\n    }\n  }\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./exerciseanimationprogress.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./exerciseanimationprogress.vue?vue&type=template&id=106df5ae\"\nimport script from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\nexport * from \"./exerciseanimationprogress.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}